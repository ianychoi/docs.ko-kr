---
description: '자세히 알아보기: 확장 가능한 개체'
title: 확장 가능한 개체
ms.date: 03/30/2017
helpviewer_keywords:
- extensible objects [WCF]
ms.assetid: bc88cefc-31fb-428e-9447-6d20a7d452af
ms.openlocfilehash: 80082f4c94adf2d668ff4c241d286959d9a05038
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99756697"
---
# <a name="extensible-objects"></a><span data-ttu-id="9cc9f-103">확장 가능한 개체</span><span class="sxs-lookup"><span data-stu-id="9cc9f-103">Extensible Objects</span></span>

<span data-ttu-id="9cc9f-104">새 기능과 함께 기존 런타임 클래스를 확장하거나 새 상태를 개체에 추가하기 위해 확장명 가능한 개체 패턴이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-104">The extensible object pattern is used to either extend existing runtime classes with new functionality or to add new state to an object.</span></span> <span data-ttu-id="9cc9f-105">확장명 가능한 개체 중 하나에 연결된 확장은 이 개체에서 액세스할 수 있는 확장명 가능한 일반 개체에 연결된 공유 상태 및 기능에 액세스하는 처리 시에 매우 다른 단계에서 동작을 활성화합니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-105">Extensions, attached to one of the extensible objects, enable behaviors at very different stages in processing to access shared state and functionality attached to a common extensible object that they can access.</span></span>

## <a name="the-iextensibleobjectt-pattern"></a><span data-ttu-id="9cc9f-106">Iextensibleobject<t> \<T> 패턴</span><span class="sxs-lookup"><span data-stu-id="9cc9f-106">The IExtensibleObject\<T> Pattern</span></span>

<span data-ttu-id="9cc9f-107">확장명 가능한 개체 패턴에는 세 가지 인터페이스인 <xref:System.ServiceModel.IExtensibleObject%601>, <xref:System.ServiceModel.IExtension%601> 및 <xref:System.ServiceModel.IExtensionCollection%601>이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-107">There are three interfaces in the extensible object pattern: <xref:System.ServiceModel.IExtensibleObject%601>, <xref:System.ServiceModel.IExtension%601>, and <xref:System.ServiceModel.IExtensionCollection%601>.</span></span>

<span data-ttu-id="9cc9f-108"><xref:System.ServiceModel.IExtensibleObject%601> 인터페이스는 <xref:System.ServiceModel.IExtension%601> 개체가 해당 기능을 사용자 지정할 수 있도록 하는 형식에 의해 구현됩니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-108">The <xref:System.ServiceModel.IExtensibleObject%601> interface is implemented by types that allow <xref:System.ServiceModel.IExtension%601> objects to customize their functionality.</span></span>

<span data-ttu-id="9cc9f-109">확장 가능한 개체를 사용하면 <xref:System.ServiceModel.IExtension%601> 개체를 동적으로 집계할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-109">Extensible objects allow dynamic aggregation of <xref:System.ServiceModel.IExtension%601> objects.</span></span> <span data-ttu-id="9cc9f-110"><xref:System.ServiceModel.IExtension%601> 개체는 다음 인터페이스로 구분됩니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-110"><xref:System.ServiceModel.IExtension%601> objects are characterized by the following interface:</span></span>

```csharp
public interface IExtension<T>
where T : IExtensibleObject<T>
{
    void Attach(T owner);
    void Detach(T owner);
}
```

<span data-ttu-id="9cc9f-111">형식 제한은 <xref:System.ServiceModel.IExtensibleObject%601>인 클래스에 대해서만 확장이 정의될 수 있도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-111">The type restriction guarantees that extensions can only be defined for classes that are <xref:System.ServiceModel.IExtensibleObject%601>.</span></span> <span data-ttu-id="9cc9f-112"><xref:System.ServiceModel.IExtension%601.Attach%2A> 및 <xref:System.ServiceModel.IExtension%601.Detach%2A>는 집계 또는 분배 알림을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-112"><xref:System.ServiceModel.IExtension%601.Attach%2A> and <xref:System.ServiceModel.IExtension%601.Detach%2A> provide notification of aggregation or disaggregation.</span></span>

<span data-ttu-id="9cc9f-113">구현에서 확장을 추가하고 소유자에서 제거할 수 있는 시기를 제한할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-113">It is valid for implementations to restrict when they may be added and removed from an owner.</span></span> <span data-ttu-id="9cc9f-114">예를 들어 완전히 제거를 허용하지 않거나, 소유자 또는 확장이 특정 상태에 있을 때 확장 추가 또는 제거를 허용하지 않거나, 여러 소유자에 동시에 추가하는 것을 허용하지 않거나, 단일 추가 후에만 단일 제거를 허용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-114">For example, you can disallow removal entirely, disallowing adding or removing extensions when the owner or extension are in a certain state, disallow adding to multiple owners concurrently, or allow only a single addition followed by a single remove.</span></span>

<span data-ttu-id="9cc9f-115"><xref:System.ServiceModel.IExtension%601>에서는 다른 관리되는 표준 인터페이스와의 상호 작용을 나타내지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-115"><xref:System.ServiceModel.IExtension%601> does not imply any interactions with other standard managed interfaces.</span></span> <span data-ttu-id="9cc9f-116">특히 소유자 개체의 <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> 메서드는 일반적으로 확장을 분리하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-116">Specifically, the <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> method on the owner object does not normally detach its extensions.</span></span>

<span data-ttu-id="9cc9f-117">컬렉션에 확장을 추가 하면 <xref:System.ServiceModel.IExtension%601.Attach%2A> 가 컬렉션으로 이동 하기 전에 호출 됩니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-117">When an extension is added to the collection, <xref:System.ServiceModel.IExtension%601.Attach%2A> is called before it goes into the collection.</span></span> <span data-ttu-id="9cc9f-118">컬렉션에서 확장을 제거 하면 <xref:System.ServiceModel.IExtension%601.Detach%2A> 가 제거 된 후가 호출 됩니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-118">When an extension is removed from the collection, <xref:System.ServiceModel.IExtension%601.Detach%2A> is called after it is removed.</span></span> <span data-ttu-id="9cc9f-119">즉, 적절 한 동기화를 가정할 때 확장은와 사이에 있는 동안에만 컬렉션에서 발견 될 수 <xref:System.ServiceModel.IExtension%601.Attach%2A> 있습니다 <xref:System.ServiceModel.IExtension%601.Detach%2A> .</span><span class="sxs-lookup"><span data-stu-id="9cc9f-119">This means (assuming appropriate synchronization) an extension can count on only being found in the collection while it is between <xref:System.ServiceModel.IExtension%601.Attach%2A> and <xref:System.ServiceModel.IExtension%601.Detach%2A>.</span></span>

<span data-ttu-id="9cc9f-120"><xref:System.ServiceModel.IExtensionCollection%601.FindAll%2A> 또는 <xref:System.ServiceModel.IExtensionCollection%601.Find%2A>에 전달된 개체가 <xref:System.ServiceModel.IExtension%601>일 필요는 없지만(예를 들어 아무 개체나 전달할 수 있음) 반환되는 확장은 <xref:System.ServiceModel.IExtension%601>입니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-120">The object passed to <xref:System.ServiceModel.IExtensionCollection%601.FindAll%2A> or <xref:System.ServiceModel.IExtensionCollection%601.Find%2A> need not be <xref:System.ServiceModel.IExtension%601> (for example, you can pass any object), but the returned extension is an <xref:System.ServiceModel.IExtension%601>.</span></span>

<span data-ttu-id="9cc9f-121">컬렉션에가 인 확장이 없는 경우는 <xref:System.ServiceModel.IExtension%601> <xref:System.ServiceModel.IExtensionCollection%601.Find%2A> null을 반환 하 고는 <xref:System.ServiceModel.IExtensionCollection%601.FindAll%2A> 빈 컬렉션을 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-121">If no extension in the collection is an <xref:System.ServiceModel.IExtension%601>, <xref:System.ServiceModel.IExtensionCollection%601.Find%2A> returns null, and <xref:System.ServiceModel.IExtensionCollection%601.FindAll%2A> returns an empty collection.</span></span> <span data-ttu-id="9cc9f-122">여러 확장을 구현 하는 경우 <xref:System.ServiceModel.IExtension%601> <xref:System.ServiceModel.IExtensionCollection%601.Find%2A> 는 이러한 확장 중 하나를 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-122">If multiple extensions implement <xref:System.ServiceModel.IExtension%601>, <xref:System.ServiceModel.IExtensionCollection%601.Find%2A> returns one of them.</span></span> <span data-ttu-id="9cc9f-123"><xref:System.ServiceModel.IExtensionCollection%601.FindAll%2A>에서 반환되는 값은 스냅샷입니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-123">The value returned from <xref:System.ServiceModel.IExtensionCollection%601.FindAll%2A> is a snapshot.</span></span>

<span data-ttu-id="9cc9f-124">두 가지 주요 시나리오가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-124">There are two main scenarios.</span></span> <span data-ttu-id="9cc9f-125">첫 번째 시나리오에서는 <xref:System.ServiceModel.IExtensibleObject%601.Extensions%2A> 속성을 개체에 상태를 삽입하는 형식 기반 사전으로 사용하여 다른 구성 요소에서 해당 형식으로 개체를 조회할 수 있게 합니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-125">The first scenario uses the <xref:System.ServiceModel.IExtensibleObject%601.Extensions%2A> property as a type-based dictionary to insert state on an object to enable another component to look it up using the type.</span></span>

<span data-ttu-id="9cc9f-126">두 번째 시나리오에서는 <xref:System.ServiceModel.IExtension%601.Attach%2A> 및 <xref:System.ServiceModel.IExtension%601.Detach%2A> 속성을 사용하여 개체가 이벤트 등록, 상태 전환 감시 등의 사용자 지정 동작에 참여할 수 있게 합니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-126">The second scenario uses the <xref:System.ServiceModel.IExtension%601.Attach%2A> and <xref:System.ServiceModel.IExtension%601.Detach%2A> properties to enable an object to participate in custom behavior, such as registering for events, watching state transitions, and so on.</span></span>

<span data-ttu-id="9cc9f-127"><xref:System.ServiceModel.IExtensionCollection%601> 인터페이스는 <xref:System.ServiceModel.IExtension%601>을 형식별로 검색할 수 있는 <xref:System.ServiceModel.IExtension%601> 개체의 컬렉션입니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-127">The <xref:System.ServiceModel.IExtensionCollection%601> interface is a collection of the <xref:System.ServiceModel.IExtension%601> objects that allow for retrieving the <xref:System.ServiceModel.IExtension%601> by its type.</span></span> <span data-ttu-id="9cc9f-128"><xref:System.ServiceModel.IExtensionCollection%601.Find%2A?displayProperty=nameWithType>는 해당 형식의 <xref:System.ServiceModel.IExtension%601> 중에서 최근 추가된 개체만 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-128"><xref:System.ServiceModel.IExtensionCollection%601.Find%2A?displayProperty=nameWithType> returns the most recently added object that is an <xref:System.ServiceModel.IExtension%601> of that type.</span></span>

### <a name="extensible-objects-in-windows-communication-foundation"></a><span data-ttu-id="9cc9f-129">Windows Communication Foundation의 확장 가능한 개체</span><span class="sxs-lookup"><span data-stu-id="9cc9f-129">Extensible Objects in Windows Communication Foundation</span></span>

<span data-ttu-id="9cc9f-130">WCF (Windows Communication Foundation)에는 네 가지 확장 가능한 개체가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-130">There are four extensible objects in Windows Communication Foundation (WCF):</span></span>

- <span data-ttu-id="9cc9f-131"><xref:System.ServiceModel.ServiceHostBase> – 서비스 호스트의 기본 클래스입니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-131"><xref:System.ServiceModel.ServiceHostBase> – This is the base class for the service’s host.</span></span>  <span data-ttu-id="9cc9f-132">이 클래스의 확장을 사용하여 <xref:System.ServiceModel.ServiceHostBase> 자체의 동작을 확장하거나 각 서비스의 상태를 저장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-132">Extensions of this class can be used to extend the behavior of the <xref:System.ServiceModel.ServiceHostBase> itself or to store the state for each service.</span></span>

- <span data-ttu-id="9cc9f-133"><xref:System.ServiceModel.InstanceContext> – 이 클래스는 서비스 형식의 인스턴스를 서비스 런타임과 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-133"><xref:System.ServiceModel.InstanceContext> – This class connects an instance of the service’s type with the service runtime.</span></span>  <span data-ttu-id="9cc9f-134">인스턴스에 대한 정보와 <xref:System.ServiceModel.InstanceContext>의 포함 <xref:System.ServiceModel.ServiceHostBase>에 대한 참조가 들어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-134">It contains information about the instance as well as a reference to the <xref:System.ServiceModel.InstanceContext>'s containing <xref:System.ServiceModel.ServiceHostBase>.</span></span> <span data-ttu-id="9cc9f-135">이 클래스의 확장을 사용하여 <xref:System.ServiceModel.InstanceContext>의 동작을 확장하거나 각 서비스의 상태를 저장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-135">Extensions of this class can be used to extend the behavior of the <xref:System.ServiceModel.InstanceContext> or to store the state for each service.</span></span>

- <span data-ttu-id="9cc9f-136"><xref:System.ServiceModel.OperationContext> – 이 클래스는 런타임에서 각 작업에 대해 수집하는 작업 정보를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-136"><xref:System.ServiceModel.OperationContext> – This class represents the operation information that the runtime gathers for each operation.</span></span>  <span data-ttu-id="9cc9f-137">여기에는 들어오는 메시지 헤더, 들어오는 메시지 속성, 들어오는 보안 ID, 기타 정보 등이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-137">This includes information such as the incoming message headers, the incoming message properties, the incoming security identity, and other information.</span></span>  <span data-ttu-id="9cc9f-138">이 클래스의 확장은 <xref:System.ServiceModel.OperationContext>의 동작을 확장하거나 각 작업의 상태를 저장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-138">Extensions of this class can either extend the behavior of <xref:System.ServiceModel.OperationContext> or store the state for each operation.</span></span>

- <span data-ttu-id="9cc9f-139"><xref:System.ServiceModel.IContextChannel> –이 인터페이스를 사용 하면 WCF 런타임에 의해 빌드된 채널 및 프록시에 대 한 각 상태를 검사할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-139"><xref:System.ServiceModel.IContextChannel> – This interface allows for the inspection of each state for the channels and proxies built by the WCF runtime.</span></span>  <span data-ttu-id="9cc9f-140">이 클래스의 확장은 <xref:System.ServiceModel.IClientChannel>의 동작을 확장하거나 이 동작을 사용하여 각 채널의 상태를 저장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-140">Extensions of this class can either extend the behavior of <xref:System.ServiceModel.IClientChannel> or can use it to store the state for each channel.</span></span>

<span data-ttu-id="9cc9f-141">다음 코드 예제에서는 단순한 확장을 사용하여 <xref:System.ServiceModel.InstanceContext> 개체를 추적하는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="9cc9f-141">The following code example shows the use of a simple extension to track <xref:System.ServiceModel.InstanceContext> objects.</span></span>

[!code-csharp[IInstanceContextInitializer#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/iinstancecontextinitializer/cs/initializer.cs#1)]

## <a name="see-also"></a><span data-ttu-id="9cc9f-142">참고 항목</span><span class="sxs-lookup"><span data-stu-id="9cc9f-142">See also</span></span>

- <xref:System.ServiceModel.IExtensibleObject%601>
- <xref:System.ServiceModel.IExtension%601>
- <xref:System.ServiceModel.IExtensionCollection%601>
