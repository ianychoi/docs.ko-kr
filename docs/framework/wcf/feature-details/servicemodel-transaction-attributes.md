---
description: ServiceModel 트랜잭션 특성에 대해 자세히 알아보세요.
title: ServiceModel 트랜잭션 특성
ms.date: 03/30/2017
helpviewer_keywords:
- transactions [WCF], ServiceModel attributes
ms.assetid: 1e0d2436-6ae5-439b-9765-a448d6f60000
ms.openlocfilehash: 0b443fc6b9503007574608afe03c5e0508f666d9
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99793482"
---
# <a name="servicemodel-transaction-attributes"></a><span data-ttu-id="cbd62-103">ServiceModel 트랜잭션 특성</span><span class="sxs-lookup"><span data-stu-id="cbd62-103">ServiceModel Transaction Attributes</span></span>

<span data-ttu-id="cbd62-104">WCF (Windows Communication Foundation) <xref:System.ServiceModel> 는 wcf 서비스에 대 한 트랜잭션의 동작을 구성할 수 있는 세 가지 표준 특성에 대 한 속성을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-104">Windows Communication Foundation (WCF) provides properties on three standard <xref:System.ServiceModel> attributes that enable you to configure the behavior of transactions for a WCF service:</span></span>

- <xref:System.ServiceModel.TransactionFlowAttribute>

- <xref:System.ServiceModel.ServiceBehaviorAttribute>

- <xref:System.ServiceModel.OperationBehaviorAttribute>

## <a name="transactionflowattribute"></a><span data-ttu-id="cbd62-105">TransactionFlowAttribute</span><span class="sxs-lookup"><span data-stu-id="cbd62-105">TransactionFlowAttribute</span></span>

<span data-ttu-id="cbd62-106"><xref:System.ServiceModel.TransactionFlowAttribute> 특성은 클라이언트로부터 들어오는 트랜잭션을 허용하도록 서비스 계약에서 작업의 의지를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-106">The <xref:System.ServiceModel.TransactionFlowAttribute> attribute specifies the willingness of an operation in a service contract to accept incoming transactions from a client.</span></span> <span data-ttu-id="cbd62-107">해당 특성은 다음 속성과 함께 이 컨트롤을 제공합니다. 트랜잭션은 <xref:System.ServiceModel.TransactionFlowOption> 열거형을 사용하여 들어오는 트랜잭션이 <xref:System.ServiceModel.TransactionFlowOption.Mandatory>, <xref:System.ServiceModel.TransactionFlowOption.Allowed>인지 또는 <xref:System.ServiceModel.TransactionFlowOption.NotAllowed>인지를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-107">The attribute provides this control with the following property: Transactions use the <xref:System.ServiceModel.TransactionFlowOption> enumeration to specify whether an incoming transaction is <xref:System.ServiceModel.TransactionFlowOption.Mandatory>, <xref:System.ServiceModel.TransactionFlowOption.Allowed>, or <xref:System.ServiceModel.TransactionFlowOption.NotAllowed>.</span></span>

<span data-ttu-id="cbd62-108">이 특성은 클라이언트와의 외부 상호 작용에 서비스 작업을 연관시키는 유일한 특성입니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-108">This is the only attribute that relates service operations to external interactions with a client.</span></span> <span data-ttu-id="cbd62-109">다음 단원에서 설명할 특성은 작업 실행 내에서의 트랜잭션 사용과 연관된 특성입니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-109">The attributes described in the following sections relate to the use of transactions within the execution of the operation.</span></span>

## <a name="servicebehaviorattribute"></a><span data-ttu-id="cbd62-110">ServiceBehaviorAttribute</span><span class="sxs-lookup"><span data-stu-id="cbd62-110">ServiceBehaviorAttribute</span></span>

<span data-ttu-id="cbd62-111"><xref:System.ServiceModel.ServiceBehaviorAttribute> 특성은 서비스 계약 구현의 내부 실행 동작을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-111">The <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute specifies the internal execution behavior of a service contract implementation.</span></span> <span data-ttu-id="cbd62-112">이 특성의 트랜잭션별 속성에는 다음이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-112">Transaction-specific properties of this attribute include:</span></span>

- <span data-ttu-id="cbd62-113"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A>는 세션이 닫힐 때 완료되지 않은 트랜잭션을 완료할지 여부를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-113"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A> specifies whether to complete an uncompleted transaction when the session closes.</span></span> <span data-ttu-id="cbd62-114">이 속성의 기본값은 `false`입니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-114">The default value for this property is `false`.</span></span> <span data-ttu-id="cbd62-115">이 속성이 `true`이고 들어오는 세션이 네트워크 또는 클라이언트 오류로 인해 닫히지 않고 올바르게 닫힌 경우, 완료되지 않은 모든 트랜잭션이 완료됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-115">If this property is `true`, and the incoming session was gracefully shut down instead of closing due to network or client faults, any uncompleted transaction is successfully completed.</span></span> <span data-ttu-id="cbd62-116">이와는 반대로, 이 속성이 `false`이거나 세션이 올바르게 닫히지 않은 경우에는 세션이 닫힐 때 완료되지 않은 모든 트랜잭션이 롤백됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-116">Otherwise, if this property is `false` or if the session was not gracefully closed, any uncompleted transaction is rolled back when the session closes.</span></span> <span data-ttu-id="cbd62-117">이 속성이 `true`인 경우 들어오는 채널은 세션 기반이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-117">If this property is `true`, the incoming channel must be session-based.</span></span>

- <span data-ttu-id="cbd62-118"><xref:System.ServiceModel.ServiceBehaviorAttribute.ReleaseServiceInstanceOnTransactionComplete%2A>은 기본 서비스 인스턴스가 트랜잭션 완료 시 해제되는지 여부를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-118"><xref:System.ServiceModel.ServiceBehaviorAttribute.ReleaseServiceInstanceOnTransactionComplete%2A> specifies whether the underlying service instance is released when a transaction completes.</span></span> <span data-ttu-id="cbd62-119">이 속성의 기본값은 `true`입니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-119">The default value for this property is `true`.</span></span> <span data-ttu-id="cbd62-120">다음 인바운드 메시지는 이전 인스턴스의 트랜잭션별 상태를 무시하면서 새 기본 인스턴스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-120">The next inbound message causes a new underlying instance to be created, discarding any per-transaction state that the previous instance might have held.</span></span> <span data-ttu-id="cbd62-121">서비스 인스턴스를 릴리스하는 것은 서비스가 수행하는 내부 작업이며, 클라이언트가 설정한 기존 연결 또는 세션에는 영향을 주지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-121">Releasing a service instance is an internal action the service takes and has no impact on any existing connections or sessions that clients might have established.</span></span> <span data-ttu-id="cbd62-122">이 기능은 COM+가 제공하는 Just-In-Time 활성화 기능에 해당합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-122">This functionality is equivalent to the just-in-time activation feature COM+ provides.</span></span> <span data-ttu-id="cbd62-123">속성이 `true`이면 <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A>는 <xref:System.ServiceModel.ConcurrencyMode.Single>과 같아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-123">If the property is `true`, <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> must be equal to <xref:System.ServiceModel.ConcurrencyMode.Single>.</span></span> <span data-ttu-id="cbd62-124">그렇지 않으면 서비스는 시작하는 동안 유효하지 않은 구성의 유효성 검사 예외를 throw합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-124">Otherwise, the service throws an invalid configuration validation exception during startup.</span></span>

- <span data-ttu-id="cbd62-125"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionIsolationLevel%2A>은 서비스 내의 트랜잭션에 사용하도록 격리 수준을 지정합니다. 이 속성은 <xref:System.Transactions.IsolationLevel> 값 중 하나를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-125"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionIsolationLevel%2A> specifies the isolation level to use for transactions within the service; this property takes one of the <xref:System.Transactions.IsolationLevel> values.</span></span> <span data-ttu-id="cbd62-126">로컬 격리 수준 속성이 <xref:System.Transactions.IsolationLevel.Unspecified>가 아닌 경우 들어오는 트랜잭션의 격리 수준은 이 로컬 속성의 설정과 일치해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-126">If the local isolation level property is anything other than <xref:System.Transactions.IsolationLevel.Unspecified>, the isolation level of an incoming transaction must match the setting of this local property.</span></span> <span data-ttu-id="cbd62-127">그렇지 않으면 들어오는 트랜잭션은 거부되며 오류가 클라이언트로 보내집니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-127">Otherwise, the incoming transaction is rejected, and a fault is sent back to the client.</span></span> <span data-ttu-id="cbd62-128"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A>가 `true`이고 이동한 트랜잭션이 없을 경우, 이 속성은 로컬로 만들어진 트랜잭션에 사용할 <xref:System.Transactions.IsolationLevel> 값을 결정합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-128">If <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> is `true`, and no transaction is flowed, this property determines the <xref:System.Transactions.IsolationLevel> value to use for the locally created transaction.</span></span> <span data-ttu-id="cbd62-129"><xref:System.Transactions.IsolationLevel>이 <xref:System.Transactions.IsolationLevel.Unspecified>이면 <xref:System.Transactions.IsolationLevel><xref:System.Transactions.IsolationLevel.Serializable>이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-129">If <xref:System.Transactions.IsolationLevel> is set to <xref:System.Transactions.IsolationLevel.Unspecified>, <xref:System.Transactions.IsolationLevel><xref:System.Transactions.IsolationLevel.Serializable> is used.</span></span>

- <span data-ttu-id="cbd62-130"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A>은 서비스에서 만들어진 새 트랜잭션이 완료되어야 하는 시간을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-130"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> specifies the time period within which a new transaction created at the service must complete.</span></span> <span data-ttu-id="cbd62-131">이 시간에 도달했는데도 트랜잭션이 완료되지 않으면 트랜잭션이 중단됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-131">If this time is reached and the transaction has not been completed, it will abort.</span></span> <span data-ttu-id="cbd62-132"><xref:System.TimeSpan>은 <xref:System.Transactions.TransactionScope>가 <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A>로 설정되고 새 트랜잭션이 만들어진 작업에 대한 `true` 시간 제한으로 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-132">The <xref:System.TimeSpan> is used as the <xref:System.Transactions.TransactionScope> time-out for any operations that have <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> set to `true` and for which a new transaction was created.</span></span> <span data-ttu-id="cbd62-133">시간 제한은 트랜잭션을 만든 시점으로부터 2단계 커밋 프로토콜의 1단계를 완료할 때까지의 최대 허용 기간입니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-133">The time-out is the maximum allowed duration from the creation of the transaction to the completion of phase 1 in the two-phase commit protocol.</span></span> <span data-ttu-id="cbd62-134"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> 속성과 `transactionTimeout` 구성 설정 사이에서 항상 더 낮은 값이 시간 제한 값으로 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-134">The time-out value used is always the lower value between the <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> property and the `transactionTimeout` configuration setting.</span></span>

## <a name="operationbehaviorattribute"></a><span data-ttu-id="cbd62-135">OperationBehaviorAttribute</span><span class="sxs-lookup"><span data-stu-id="cbd62-135">OperationBehaviorAttribute</span></span>

<span data-ttu-id="cbd62-136"><xref:System.ServiceModel.OperationBehaviorAttribute> 특성은 서비스 구현에서 메서드의 동작을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-136">The <xref:System.ServiceModel.OperationBehaviorAttribute> attribute specifies the behaviors of the methods in the service implementation.</span></span> <span data-ttu-id="cbd62-137">이를 사용하여 작업의 특정 실행 동작을 나타낼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-137">You can use it to indicate the operation's specific execution behavior.</span></span> <span data-ttu-id="cbd62-138">이 특성의 속성은 서비스 계약의 WSDL (웹 서비스 기술 언어) 설명에 영향을 주지 않으며, 개발자가 직접 구현 해야 하는 일반적인 기능을 가능 하 게 하는 WCF 프로그래밍 모델의 요소입니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-138">Properties of this attribute do not affect the Web Service Description Language (WSDL) description of the service contract, and are purely elements of the WCF programming model that enable common features that developers otherwise have to implement themselves.</span></span>

<span data-ttu-id="cbd62-139">이 특성에는 다음과 같은 트랜잭션별 속성이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-139">This attribute has the following transaction-specific properties:</span></span>

- <span data-ttu-id="cbd62-140"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A>는 활성 트랜잭션 범위 내에서 메서드를 실행해야 할지 여부를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-140"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> specifies whether a method must execute within an active transaction scope.</span></span> <span data-ttu-id="cbd62-141">기본값은 `false`입니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-141">The default is `false`.</span></span> <span data-ttu-id="cbd62-142">메서드에 <xref:System.ServiceModel.OperationBehaviorAttribute> 특성을 설정하지 않으면 메서드가 트랜잭션에서 실행되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-142">If the <xref:System.ServiceModel.OperationBehaviorAttribute> attribute is not set for a method, it also implies that the method will not execute in a transaction.</span></span> <span data-ttu-id="cbd62-143">작업에 트랜잭션 범위가 필요하지 않을 경우, 메시지 헤더 내의 모든 트랜잭션은 활성화되지 않고 <xref:System.ServiceModel.OperationContext.IncomingMessageProperties%2A>의 <xref:System.ServiceModel.OperationContext> 요소로 유지됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-143">If a transaction scope is not required for an operation, any transaction that is present within the message header is not activated and remains as an element of the <xref:System.ServiceModel.OperationContext.IncomingMessageProperties%2A> of the <xref:System.ServiceModel.OperationContext>.</span></span> <span data-ttu-id="cbd62-144">작업에 트랜잭션 범위가 필요한 경우 트랜잭션에 대한 소스는 다음 중 하나에서 파생됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-144">If a transaction scope is required for an operation, the source for the transaction is derived from one of the following:</span></span>

  - <span data-ttu-id="cbd62-145">트랜잭션이 클라이언트로부터 이동해 오는 경우, 메서드는 분산된 해당 트랜잭션을 사용하여 만들어진 트랜잭션 범위에서 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-145">If a transaction is flowed from the client, the method is executed under a transaction scope created using that distributed transaction.</span></span>

  - <span data-ttu-id="cbd62-146">대기 중인 전송과 함께, 메시지를 큐에서 제거하는 데 사용하는 트랜잭션이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-146">With a queued transport, the transaction used to dequeue the message is used.</span></span> <span data-ttu-id="cbd62-147">이 트랜잭션은 메시지의 원래 발신자가 제공한 것이 아니기 때문에 이동된 트랜잭션이 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-147">Note that the transaction used is not a flowed transaction, in that it was not provided by the original sender of the message.</span></span>

  - <span data-ttu-id="cbd62-148">사용자 지정 전송은 `TransportTransactionProperty`를 사용하여 트랜잭션을 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-148">A custom transport can provide a transaction through the use of the `TransportTransactionProperty`.</span></span>

  - <span data-ttu-id="cbd62-149">위의 항목 중 트랜잭션에 대한 외부 소스를 제공하는 항목이 없는 경우, 메서드를 호출하기 전에 새 <xref:System.Transactions.Transaction> 인스턴스가 즉시 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-149">If none of the above provides an external source for a transaction, a new <xref:System.Transactions.Transaction> instance is created immediately prior to calling the method.</span></span>

- <span data-ttu-id="cbd62-150"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionAutoComplete%2A>는 처리되지 않은 예외가 throw되지 않을 경우 메서드가 실행하는 트랜잭션을 자동으로 완료할지 여부를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-150"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionAutoComplete%2A> specifies whether the transaction in which the method executes is automatically completed if no unhandled exceptions are thrown.</span></span> <span data-ttu-id="cbd62-151">이 속성이 `true`이면 호출 인프라는 사용자 메서드가 예외를 throw하지 않고 반환할 경우 자동으로 트랜잭션을 "완료됨"으로 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-151">If this property is `true`, the calling infrastructure automatically marks the transaction as "completed" if the user method returns without throwing an exception.</span></span> <span data-ttu-id="cbd62-152">이 속성이 `false`이면 트랜잭션이 인스턴스에 연결된 상태에서, 클라이언트가 이 속성이 `true`로 표시된 후속 메서드를 호출할 경우 또는 후속 메서드가 명시적으로 <xref:System.ServiceModel.OperationContext.SetTransactionComplete%2A>를 호출할 경우에만 "완료됨"으로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-152">If this property is `false`, the transaction is attached to the instance, and is only marked as "completed" if the client calls a subsequent method that is marked with this property equal to `true`, or if a subsequent method explicitly calls <xref:System.ServiceModel.OperationContext.SetTransactionComplete%2A>.</span></span> <span data-ttu-id="cbd62-153">트랜잭션에서 이러한 결과를 수행하는 데 하나라도 실패하면 "완료됨" 상태가 될 수 없으며, <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A> 속성을 `true`로 설정하지 않으면 포함된 작업도 커밋되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-153">Failure to perform either of these results in the transaction never being "completed," and the contained work is not committed, unless the <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A> property is set to `true`.</span></span> <span data-ttu-id="cbd62-154">이 속성을 `true`로 설정하면 세션과 함께 채널을 사용해야 하며, <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A>를 <xref:System.ServiceModel.InstanceContextMode.PerSession>으로 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd62-154">If this property is set to `true`, you must use a channel with a session, and the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> must be set to <xref:System.ServiceModel.InstanceContextMode.PerSession>.</span></span>
