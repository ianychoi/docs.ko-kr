---
description: '자세한 정보: WCF의 큐'
title: WCF의 큐
ms.date: 03/30/2017
ms.assetid: e98d76ba-1acf-42cd-b137-0f8214661112
ms.openlocfilehash: 21ba3980d7ef5d043a1bf9fed03e0c98ea34a933
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99733361"
---
# <a name="queuing-in-wcf"></a><span data-ttu-id="4851c-103">WCF의 큐</span><span class="sxs-lookup"><span data-stu-id="4851c-103">Queuing in WCF</span></span>

<span data-ttu-id="4851c-104">이 섹션에서는 WCF (Windows Communication Foundation)에서 대기 중인 통신을 사용 하는 방법을 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-104">This section describes how to use queued communication in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="queues-as-a-wcf-transport-binding"></a><span data-ttu-id="4851c-105">큐를 WCF 전송 바인딩으로</span><span class="sxs-lookup"><span data-stu-id="4851c-105">Queues as a WCF transport binding</span></span>  

 <span data-ttu-id="4851c-106">WCF에서 계약은 교환할 대상을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-106">In WCF, the contracts specify what is being exchanged.</span></span> <span data-ttu-id="4851c-107">계약은 비즈니스 종속 또는 애플리케이션별 메시지 교환입니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-107">Contracts are business-dependent or application-specific message exchanges.</span></span> <span data-ttu-id="4851c-108">메시지를 교환하는 데 사용되는 메커니즘(또는 "방법")은 바인딩에 지정됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-108">The mechanism used to exchange messages (or the "how") is specified in the bindings.</span></span> <span data-ttu-id="4851c-109">WCF의 바인딩은 메시지 교환에 대 한 세부 정보를 캡슐화 합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-109">Bindings in WCF encapsulate details of the message exchange.</span></span> <span data-ttu-id="4851c-110">또한 다양한 전송 모양과 바인딩이 나타내는 프로토콜을 제어할 수 있도록 구성 노브를 사용자에게 노출합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-110">They expose configuration knobs for the user to control various aspects of the transport or the protocol that the bindings represent.</span></span> <span data-ttu-id="4851c-111">WCF의 큐는 다른 전송 바인딩과 마찬가지로 처리 되며이는 많은 큐 응용 프로그램에 큰 장점입니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-111">Queuing in WCF is treated like any other transport binding, which is a big advantage for many queuing applications.</span></span> <span data-ttu-id="4851c-112">대부분의 큐 애플리케이션은 다른 RPC(원격 프로시저 호출) 스타일 분산 애플리케이션과 다르게 작성되어 사용 및 유지 관리가 어려울 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-112">Today, many queuing applications are written differently from other remote procedure call (RPC)-style distributed applications, making it harder to follow and maintain.</span></span> <span data-ttu-id="4851c-113">WCF를 사용 하 여 배포 응용 프로그램을 작성 하는 스타일은 거의 동일 하므로 더 쉽게 따르고 유지 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-113">With WCF, the style of writing a distributed application is much the same, making it easier to follow and maintain.</span></span> <span data-ttu-id="4851c-114">교환 메커니즘을 비즈니스 논리와 분리하여 애플리케이션별 코드를 적용하지 않고도 전송을 변경하거나 쉽게 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-114">Moreover, by factoring out the mechanism of exchange separately from the business logic, it is easier to configure the transport or make changes to it without affecting application specific code.</span></span> <span data-ttu-id="4851c-115">다음 그림에서는 MSMQ를 전송으로 사용하는 WCF 서비스 및 클라이언트의 구조를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-115">The following figure illustrates the structure of a WCF service and client using MSMQ as a transport.</span></span>  
  
 <span data-ttu-id="4851c-116">![대기 중인 응용 프로그램 다이어그램](media/distributed-queue-figure.jpg "분산 큐 그림")</span><span class="sxs-lookup"><span data-stu-id="4851c-116">![Queued Application Diagram](media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="4851c-117">이전 그림에서 볼 수 있듯이 클라이언트와 서비스는 애플리케이션 의미 즉, 계약과 구현만 정의해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-117">As you can see from the preceding figure, the client and service must define only the application semantics, that is, the contract and implementation.</span></span> <span data-ttu-id="4851c-118">서비스는 기본 설정을 사용하여 대기 중인 바인딩을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-118">The service configures a queued binding with preferred settings.</span></span> <span data-ttu-id="4851c-119">클라이언트는 [ServiceModel Metadata 유틸리티 도구 (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) 를 사용 하 여 WCF 클라이언트를 서비스에 생성 하 고 서비스에 메시지를 보내는 데 사용할 바인딩을 설명 하는 구성 파일을 생성 합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-119">The client uses the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) to generate a WCF client to the service and to generate a configuration file that describes the bindings to use to send messages to the service.</span></span> <span data-ttu-id="4851c-120">따라서 대기 중인 메시지를 보내기 위해 클라이언트는 WCF 클라이언트를 인스턴스화하고 해당 클라이언트에 대 한 작업을 호출 합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-120">Thus, to send a queued message, the client instantiates a WCF client and invokes an operation on it.</span></span> <span data-ttu-id="4851c-121">그러면 메시지가 전송 큐로 보내진 다음 대상 큐로 전송됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-121">This causes the message to be sent to the transmission queue and transferred to the target queue.</span></span> <span data-ttu-id="4851c-122">대기 중인 통신의 모든 복잡한 과정이 메시지를 보내고 받는 애플리케이션에서 숨겨집니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-122">All the complexities of queued communication are hidden from the application that is sending and receiving messages.</span></span>  
  
 <span data-ttu-id="4851c-123">WCF의 대기 중인 바인딩에 대 한 주의 사항은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-123">Caveats about queued binding in WCF include:</span></span>  
  
- <span data-ttu-id="4851c-124">WCF의 기본 대기 중인 바인딩이 큐를 사용 하는 이중 통신을 지원 하지 않기 때문에 모든 서비스 작업은 단방향 이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-124">All service operations must be one-way because the default queued binding in WCF does not support duplex communication using queues.</span></span> <span data-ttu-id="4851c-125">양방향 통신 샘플 ([양방향 통신](../samples/two-way-communication.md))에서는 2 1 방향 계약을 사용 하 여 큐를 사용 하는 이중 통신을 구현 하는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-125">A two-way communication sample ([Two-Way Communication](../samples/two-way-communication.md)) illustrates how to use two one-way contracts to implement duplex communication using queues.</span></span>  
  
- <span data-ttu-id="4851c-126">메타 데이터 교환을 사용 하 여 WCF 클라이언트를 생성 하려면 WCF 클라이언트를 생성 하는 데 직접 쿼리할 수 있도록 서비스에 추가 HTTP 끝점이 필요 하며, 대기 중인 통신을 적절 하 게 구성 하는 바인딩 정보를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-126">To generate a WCF client using metadata exchange requires an additional HTTP endpoint on the service so that it can be queried directly to generate the WCF client and obtain binding information to appropriately configure queued communication.</span></span>  
  
- <span data-ttu-id="4851c-127">대기 중인 바인딩에 따라 WCF 외부의 추가 구성이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-127">Based on the queued binding, extra configuration outside of WCF is required.</span></span> <span data-ttu-id="4851c-128">예를 들어 <xref:System.ServiceModel.NetMsmqBinding> WCF와 함께 제공 되는 클래스에는 메시지 큐 (MSMQ)를 최소한으로 구성 하는 것 뿐만 아니라 바인딩을 구성 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-128">For example, the <xref:System.ServiceModel.NetMsmqBinding> class that is shipped with WCF requires you to configure the bindings as well as minimally configure Message Queuing (MSMQ).</span></span>  
  
 <span data-ttu-id="4851c-129">다음 섹션에서는 MSMQ를 기반으로 하는 WCF와 함께 제공 되는 대기 중인 특정 바인딩에 대해 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-129">The following sections describe the specific queued bindings shipped with WCF, which are based on MSMQ.</span></span>  
  
### <a name="msmq"></a><span data-ttu-id="4851c-130">MSMQ</span><span class="sxs-lookup"><span data-stu-id="4851c-130">MSMQ</span></span>  

 <span data-ttu-id="4851c-131">WCF의 대기 중인 전송에서는 대기 중인 통신에 MSMQ를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-131">The queued transport in WCF uses MSMQ for its queued communication.</span></span>  
  
 <span data-ttu-id="4851c-132">MSMQ는 Windows의 선택적 구성 요소로 제공되고 NT 서비스로 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-132">MSMQ ships as an optional component with Windows and runs as an NT service.</span></span> <span data-ttu-id="4851c-133">MSMQ는 전송 큐에서 전송할 메시지를 캡처하여 대상 큐로 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-133">It captures messages for transmission in a transmission queue and for delivery in a target queue.</span></span> <span data-ttu-id="4851c-134">MSMQ 큐 관리자는 전송 중에 메시지가 손실되지 않도록 신뢰할 수 있는 메시지 전송 프로토콜을 구현합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-134">The MSMQ queue managers implement a reliable message-transfer protocol so that messages are not lost in transmission.</span></span> <span data-ttu-id="4851c-135">이 프로토콜에는 네이티브 프로토콜이나 SRMP(SOAP Reliable Messaging Protocol)와 같은 SOAP 기반 프로토콜이 해당됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-135">The protocol can be either native or SOAP-based, such as the SOAP Reliable Message Protocol (SRMP).</span></span>  
  
 <span data-ttu-id="4851c-136">MSMQ의 큐는 트랜잭션 큐이거나 비트랜잭션 큐입니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-136">In MSMQ, queues can be transactional or non-transactional.</span></span> <span data-ttu-id="4851c-137">트랜잭션 큐를 통해 메시지를 캡처하여 트랜잭션에 전달한 다음 큐에 영구적으로 저장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-137">A transactional queue allows messages to be captured and delivered in a transaction and then stored durably in the queue.</span></span> <span data-ttu-id="4851c-138">트랜잭션 큐로 보낸 메시지는 순서대로 한 번에 정확하게 전송됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-138">Messages sent to a transactional queue are transferred exactly once in order.</span></span> <span data-ttu-id="4851c-139">비트랜잭션 큐를 사용하여 일시적 메시지와 지속성 메시지를 모두 보낼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-139">You can use a non-transactional queue to send both volatile and durable messages.</span></span> <span data-ttu-id="4851c-140">비트랜잭션 큐로 보낸 메시지는 안정적인 전송 보증을 제공하지 않기 때문에 메시지가 손실될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-140">A message sent to a non-transactional queue does not carry any reliable transfer assurances; thus, messages can be lost.</span></span>  
  
 <span data-ttu-id="4851c-141">Active Directory 디렉터리 서비스에 등록된 Windows ID를 사용하여 MSMQ 큐를 보안할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-141">MSMQ queues can also be secured using a Windows identity registered with the Active Directory directory service.</span></span> <span data-ttu-id="4851c-142">MSMQ를 설치할 때 Active Directory 통합을 설치할 수 있습니다. 이 경우 컴퓨터가 Windows 도메인 네트워크에 속해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-142">When installing MSMQ, you can install Active Directory integration, which requires the computer to be part of a Windows domain network.</span></span>  
  
 <span data-ttu-id="4851c-143">MSMQ에 대 한 자세한 내용은 [msmq (메시지 큐) 설치](../samples/installing-message-queuing-msmq.md)를 참조 하십시오.</span><span class="sxs-lookup"><span data-stu-id="4851c-143">For more information about MSMQ, see [Installing Message Queuing (MSMQ)](../samples/installing-message-queuing-msmq.md).</span></span>  
  
### <a name="netmsmqbinding"></a><span data-ttu-id="4851c-144">NetMsmqBinding</span><span class="sxs-lookup"><span data-stu-id="4851c-144">NetMsmqBinding</span></span>  

 <span data-ttu-id="4851c-145">는 [\<netMsmqBinding>](../../configure-apps/file-schema/wcf/netmsmqbinding.md) MSMQ를 사용 하 여 통신 하기 위해 wcf에서 제공 하는 대기 중인 바인딩입니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-145">The [\<netMsmqBinding>](../../configure-apps/file-schema/wcf/netmsmqbinding.md) is the queued binding WCF provides for two WCF endpoints to communicate using MSMQ.</span></span> <span data-ttu-id="4851c-146">따라서 바인딩은 MSMQ에 특정한 속성을 노출합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-146">The binding, therefore, exposes properties that are specific to MSMQ.</span></span> <span data-ttu-id="4851c-147">그러나 모든 MSMQ 기능과 속성이 `NetMsmqBinding`에 노출되는 것은 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-147">However, not all MSMQ features and properties are exposed in the `NetMsmqBinding`.</span></span> <span data-ttu-id="4851c-148">압축 `NetMsmqBinding`은 대부분의 고객에게 적합한 최적의 기능들로 디자인되었습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-148">The compact `NetMsmqBinding` is designed with an optimal set of features that most customers should find sufficient.</span></span>  
  
 <span data-ttu-id="4851c-149">`NetMsmqBinding`에서는 여기에서 지금까지 설명한 핵심 큐 개념을 바인딩에 대한 속성의 형태로 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-149">The `NetMsmqBinding` manifests the core queuing concepts discussed thus far in the form of properties on the bindings.</span></span> <span data-ttu-id="4851c-150">이러한 속성은 메시지를 전송 및 전달하는 방법을 MSMQ에 알려 줍니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-150">These properties, in turn, communicate to MSMQ how to transfer and deliver the messages.</span></span> <span data-ttu-id="4851c-151">속성 범주에 대한 자세한 내용은 다음 단원을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="4851c-151">A discussion of the property categories is in the following sections.</span></span> <span data-ttu-id="4851c-152">자세한 내용은 특정 속성을 자세히 설명 하는 개념 항목을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="4851c-152">For more information, see the conceptual topics that describe specific properties more completely.</span></span>  
  
#### <a name="exactlyonce-and-durable-properties"></a><span data-ttu-id="4851c-153">ExactlyOnce 및 Durable 속성</span><span class="sxs-lookup"><span data-stu-id="4851c-153">ExactlyOnce and Durable Properties</span></span>  

 <span data-ttu-id="4851c-154">`ExactlyOnce` 및 `Durable` 속성은 큐 사이에서 메시지가 전송되는 방법에 영향을 줍니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-154">The `ExactlyOnce` and `Durable` properties affect how messages are transferred between queues:</span></span>  
  
- <span data-ttu-id="4851c-155">`ExactlyOnce`: `true`(기본값)로 설정되어 있으면 대기 중인 채널에서 메시지(전달되는 경우)가 중복되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-155">`ExactlyOnce`: When set to `true` (the default), the queued channel ensures that the message, if delivered, is not duplicated.</span></span> <span data-ttu-id="4851c-156">또한 메시지가 손실되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-156">It also ensures that the message is not lost.</span></span> <span data-ttu-id="4851c-157">메시지를 전달할 수 없거나 메시지를 전달하기 전에 메시지 TTL(Time-To-Live)이 만료되면 실패 메시지가 배달 실패 이유와 함께 배달 못 한 편지 큐에 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-157">If the message cannot be delivered, or the message Time-To Live expires before the message can be delivered, the failed message along with the delivery failure reason is recorded in a dead-letter queue.</span></span> <span data-ttu-id="4851c-158">`false`로 설정된 경우 대기 중인 채널에서 메시지를 전송하려고 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-158">When set to `false`, the queued channel makes an effort to transfer the message.</span></span> <span data-ttu-id="4851c-159">이 경우 필요에 따라 배달 못한 편지 큐를 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-159">In this case, you can optionally choose a dead-letter queue.</span></span>  
  
- <span data-ttu-id="4851c-160">`Durable:``true`(기본값)로 설정되어 있으면 대기 중인 채널에서 MSMQ를 통해 메시지를 디스크에 영구히 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-160">`Durable:` When set to `true` (the default), the queued channel ensures that MSMQ stores the message durably on disk.</span></span> <span data-ttu-id="4851c-161">따라서 MSMQ 서비스를 중지했다가 다시 시작하면 디스크에 있는 메시지가 대상 큐에 전송되거나 서비스에 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-161">Thus, if the MSMQ service were to stop and restart, the messages on disk is transferred to the target queue or delivered to the service.</span></span> <span data-ttu-id="4851c-162">`false`로 설정되어 있으면 메시지가 임시 저장소에 저장되므로 MSMQ 서비스를 중지했다가 다시 시작하면 손실됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-162">When set to `false`, the messages are stored in volatile store and are lost on stopping and restarting the MSMQ service.</span></span>  
  
 <span data-ttu-id="4851c-163">`ExactlyOnce` 신뢰할 수 있는 전송을 위해 MSMQ에 트랜잭션 큐가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-163">For `ExactlyOnce` reliable transfer, MSMQ requires the queue to be transactional.</span></span> <span data-ttu-id="4851c-164">또한 MSMQ에서 트랜잭션 큐를 읽으려면 트랜잭션이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-164">Also, MSMQ requires a transaction to read from a transactional queue.</span></span> <span data-ttu-id="4851c-165">따라서 `NetMsmqBinding`을 사용할 때 `ExactlyOnce`가 `true`로 설정되어 있는 경우 메시지를 보내거나 받으려면 트랜잭션이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-165">As such, when you use the `NetMsmqBinding`, remember that a transaction is required to send or receive messages when `ExactlyOnce` is set to `true`.</span></span> <span data-ttu-id="4851c-166">마찬가지로 `ExactlyOnce`가 `false`일 때의 임시 메시징의 경우와 마찬가지로 MSMQ에 비트랜잭션 큐가 있어야 가장 효율적입니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-166">Similarly, MSMQ requires the queue to be non-transactional for best-effort assurances, such as when `ExactlyOnce` is `false` and for volatile messaging.</span></span> <span data-ttu-id="4851c-167">따라서 `ExactlyOnce`를 `false`로 설정하거나 durable을 `false`로 설정하면 트랜잭션을 사용하여 메시지를 보내거나 받을 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-167">Thus, when setting `ExactlyOnce` to `false` or durable to `false`, you cannot send or receive using a transaction.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="4851c-168">바인딩의 설정을 기반으로 올바른 큐(트랜잭션 또는 비트랜잭션)가 만들어지는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-168">Ensure that the correct queue (transactional or non-transactional) is created based on settings in the bindings.</span></span> <span data-ttu-id="4851c-169">`ExactlyOnce`가 `true`이면 트랜잭션 큐를 사용하고, 그렇지 않으면 비트랜잭션 큐를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-169">If `ExactlyOnce` is `true`, use a transactional queue; otherwise, use a non-transactional queue.</span></span>  
  
#### <a name="dead-letter-queue-properties"></a><span data-ttu-id="4851c-170">배달 못한 편지 큐 속성</span><span class="sxs-lookup"><span data-stu-id="4851c-170">Dead-Letter Queue Properties</span></span>  

 <span data-ttu-id="4851c-171">배달 못한 편지 큐는 배달하지 못한 메시지를 저장하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-171">The dead-letter queue is used to store messages that fail delivery.</span></span> <span data-ttu-id="4851c-172">배달 못한 편지 큐에서 메시지를 읽는 보정 논리를 작성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-172">The user can write compensating logic that reads messages out of the dead-letter queue.</span></span>  
  
 <span data-ttu-id="4851c-173">대부분의 큐 시스템에서는 시스템 차원의 배달 못한 편지 큐를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-173">Many queuing systems provide for a system-wide dead-letter queue.</span></span> <span data-ttu-id="4851c-174">MSMQ에서는 비트랜잭션 큐에 배달하지 못한 메시지를 위한 시스템 차원의 비트랜잭션 배달 못한 편지 큐와 트랜잭션 큐에 배달하지 못한 메시지를 위한 시스템 차원의 트랜잭션 배달 못한 편지 큐를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-174">MSMQ provides a system-wide non-transactional dead-letter queue for messages that fail delivery to non-transactional queues and a system-wide transactional dead-letter queue for messages that fail delivery to transactional queues.</span></span>  
  
 <span data-ttu-id="4851c-175">서로 다른 대상 큐에 메시지를 보내는 여러 클라이언트가 MSMQ 서비스를 공유하는 경우 클라이언트가 보내는 모든 메시지는 동일한 배달 못한 편지 큐로 이동됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-175">If multiple clients sending messages to different target queues share the MSMQ service, all messages sent by the clients go to the same dead-letter queue.</span></span> <span data-ttu-id="4851c-176">이것이 항상 좋은 것은 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-176">This is not always preferable.</span></span> <span data-ttu-id="4851c-177">격리를 향상 시키기 위해 Windows Vista의 WCF 및 MSMQ는 사용자가 배달에 실패 한 메시지를 저장 하도록 지정할 수 있는 사용자 지정 배달 못 한 편지 큐 또는 응용 프로그램별 배달 못한 편지 큐를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-177">For better isolation, WCF and MSMQ in Windows Vista provide a custom dead-letter queue (or application-specific dead-letter queue) that the user can specify to store messages that fail delivery.</span></span> <span data-ttu-id="4851c-178">따라서 클라이언트 간에 동일한 배달 못한 편지 큐를 공유하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-178">Therefore, different clients do not share the same dead-letter queue.</span></span>  
  
 <span data-ttu-id="4851c-179">바인딩에는 다음과 같은 두 가지 속성이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-179">The binding has two properties of interest:</span></span>  
  
- <span data-ttu-id="4851c-180">`DeadLetterQueue`: 이 속성은 배달 못한 편지 큐가 필요한지 여부를 나타내는 열거형입니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-180">`DeadLetterQueue`: This property is an enumeration that indicates whether a dead-letter queue is requested.</span></span> <span data-ttu-id="4851c-181">요청 시 열거형에는 배달 못 한 편지 큐도 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-181">The enumeration also contains the kind of dead-letter queue, if one is requested.</span></span> <span data-ttu-id="4851c-182">가능한 값은 `None`, `System` 및 `Custom`입니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-182">The values are `None`, `System`, and `Custom`.</span></span> <span data-ttu-id="4851c-183">이러한 속성의 해석에 대 한 자세한 내용은 [Dead-Letter 큐를 사용 하 여 메시지 전송 오류 처리](using-dead-letter-queues-to-handle-message-transfer-failures.md) 를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="4851c-183">For more information about the interpretation of these properties, see [Using Dead-Letter Queues to Handle Message Transfer Failures](using-dead-letter-queues-to-handle-message-transfer-failures.md)</span></span>  
  
- <span data-ttu-id="4851c-184">`CustomDeadLetterQueue`: 이 속성은 애플리케이션별 배달 못한 편지 큐의 URI(Uniform Resource Identifier) 주소입니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-184">`CustomDeadLetterQueue`: This property is the Uniform Resource Identifier (URI) address of the application-specific dead-letter queue.</span></span> <span data-ttu-id="4851c-185">인 경우 필요 `DeadLetterQueue` 합니다.`Custom`</span><span class="sxs-lookup"><span data-stu-id="4851c-185">This is required if `DeadLetterQueue`.`Custom`</span></span> <span data-ttu-id="4851c-186">을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-186">is chosen.</span></span>  
  
#### <a name="poison-message-handling-properties"></a><span data-ttu-id="4851c-187">포이즌 메시지 처리 속성</span><span class="sxs-lookup"><span data-stu-id="4851c-187">Poison Message Handling properties</span></span>  

 <span data-ttu-id="4851c-188">서비스에서 트랜잭션의 대상 큐에 있는 메시지를 읽을 때 서비스에서 여러 가지 이유로 메시지를 처리하지 못할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-188">When the service reads messages from the target queue under a transaction, the service may fail to process the message for various reasons.</span></span> <span data-ttu-id="4851c-189">그러면 메시지를 큐에 넣고 다시 읽습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-189">The message is then put back into the queue to be read again.</span></span> <span data-ttu-id="4851c-190">반복적으로 실패하는 메시지를 처리하려면 바인딩에서 포이즌 메시지 처리 속성을 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-190">To deal with messages that fail repeatedly, a set of poison-message handling properties can be configured in the binding.</span></span> <span data-ttu-id="4851c-191">`ReceiveRetryCount`, `MaxRetryCycles`, `RetryCycleDelay` 및 `ReceiveErrorHandling`의 네 가지 속성이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-191">There are four properties: `ReceiveRetryCount`, `MaxRetryCycles`, `RetryCycleDelay`, and `ReceiveErrorHandling`.</span></span> <span data-ttu-id="4851c-192">이러한 속성에 대 한 자세한 내용은 [포이즌 메시지 처리](poison-message-handling.md)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="4851c-192">For more information about these properties, see [Poison Message Handling](poison-message-handling.md).</span></span>  
  
#### <a name="security-properties"></a><span data-ttu-id="4851c-193">보안 속성</span><span class="sxs-lookup"><span data-stu-id="4851c-193">Security Properties</span></span>  

 <span data-ttu-id="4851c-194">MSMQ는 큐의 ACL(액세스 제어 목록) 또는 인증된 메시지 보내기와 같은 고유한 보안 모델을 노출합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-194">MSMQ exposes its own security model, such as access control lists (ACLs) on a queue or sending authenticated messages.</span></span> <span data-ttu-id="4851c-195">`NetMsmqBinding`은 이러한 보안 속성을 전송 보안 설정의 일부로 노출합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-195">The `NetMsmqBinding` exposes these security properties as part of its transport security settings.</span></span> <span data-ttu-id="4851c-196">전송 보안의 바인딩에는 `MsmqAuthenticationMode` 및 `MsmqProtectionLevel`의 두 가지 속성이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-196">There are two properties in the binding for transport security: `MsmqAuthenticationMode` and `MsmqProtectionLevel`.</span></span> <span data-ttu-id="4851c-197">이러한 속성의 설정은 MSMQ가 구성되는 방법에 따라 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-197">Settings in these properties depend on how MSMQ is configured.</span></span> <span data-ttu-id="4851c-198">자세한 내용은 [전송 보안을 사용 하 여 메시지 보안](securing-messages-using-transport-security.md)설정을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="4851c-198">For more information, see [Securing Messages Using Transport Security](securing-messages-using-transport-security.md).</span></span>  
  
 <span data-ttu-id="4851c-199">전송 보안 이외에 메시지 보안을 사용하여 실제 SOAP 메시지를 보안할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-199">In addition to transport security, the actual SOAP message itself can be secured using message security.</span></span> <span data-ttu-id="4851c-200">자세한 내용은 [메시지 보안을 사용 하 여 메시지](securing-messages-using-message-security.md)보안을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="4851c-200">For more information, see [Securing Messages Using Message Security](securing-messages-using-message-security.md).</span></span>  
  
 <span data-ttu-id="4851c-201">또한 `MsmqTransportSecurity`는 `MsmqEncryptionAlgorithm` 및 `MsmqHashAlgorithm`의 두 가지 속성을 노출합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-201">`MsmqTransportSecurity` also exposes two properties, `MsmqEncryptionAlgorithm` and `MsmqHashAlgorithm`.</span></span> <span data-ttu-id="4851c-202">이러한 속성은 메시지의 큐 간 전송 암호화와 서명 해시에 대해 선택하는 서로 다른 알고리즘의 열거형입니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-202">These are enumerations of different algorithms to choose for queue-to-queue transfer encryption of messages and hashing of the signatures.</span></span>  
  
#### <a name="other-properties"></a><span data-ttu-id="4851c-203">기타 속성</span><span class="sxs-lookup"><span data-stu-id="4851c-203">Other Properties</span></span>  

 <span data-ttu-id="4851c-204">이전 속성 외에도 다음과 같은 MSMQ별 속성이 바인딩에 노출됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-204">In addition to the preceding properties, other MSMQ-specific properties exposed in the binding include:</span></span>  
  
- <span data-ttu-id="4851c-205">`UseSourceJournal`: 소스 저널링 설정을 나타내는 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-205">`UseSourceJournal`: A property to indicate that source journaling is turned on.</span></span> <span data-ttu-id="4851c-206">소스 저널링은 전송 큐에서 성공적으로 전송한 메시지를 추적하는 MSMQ 기능입니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-206">Source journaling is an MSMQ feature that keeps track of messages that have been successfully transmitted from the transmission queue.</span></span>  
  
- <span data-ttu-id="4851c-207">`UseMsmqTracing`: MSMQ 추적 설정을 나타내는 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-207">`UseMsmqTracing`: A property to indicate that MSMQ tracing is turned on.</span></span> <span data-ttu-id="4851c-208">MSMQ 추적은 MSMQ 큐 관리자를 호스트하는 컴퓨터에서 메시지를 보내거나 받을 때마다 보고서 큐에 보고서 메시지를 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-208">MSMQ tracing sends report messages to a report queue each time a message leaves or arrives at a machine hosting an MSMQ queue manager.</span></span>  
  
- <span data-ttu-id="4851c-209">`QueueTransferProtocol`: 큐 간 메시지 전송에 사용할 프로토콜의 열거형입니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-209">`QueueTransferProtocol`: An enumeration of the protocol to use for queue-to-queue message transfers.</span></span> <span data-ttu-id="4851c-210">MSMQ는 네이티브 큐 간 전송 프로토콜과 SRMP(SOAP Reliable Messaging Protocol)라는 SOAP 기반 프로토콜을 구현합니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-210">MSMQ implements a native queue-to-queue transfer protocol and a SOAP-based protocol called SOAP Reliable Messaging Protocol (SRMP).</span></span> <span data-ttu-id="4851c-211">SRMP는 큐 간 전송에 HTTP 전송을 사용할 때 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-211">SRMP is used when using HTTP transport for queue-to-queue transfers.</span></span> <span data-ttu-id="4851c-212">SRMP 보안은 큐 간 전송에 HTTPS를 사용할 때 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-212">SRMP secure is used when using HTTPS for queue-to-queue transfers.</span></span>  
  
- <span data-ttu-id="4851c-213">`UseActiveDirectory`: 큐 주소 확인에 Active Directory를 사용해야 하는지 여부를 나타내는 부울 값입니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-213">`UseActiveDirectory`: A Boolean value to indicate whether the Active Directory must be used for queue address resolution.</span></span> <span data-ttu-id="4851c-214">기본적으로 해제됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-214">By default, this is off.</span></span> <span data-ttu-id="4851c-215">자세한 내용은 [서비스 끝점 및 큐 주소 지정](service-endpoints-and-queue-addressing.md)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="4851c-215">For more information, see [Service Endpoints and Queue Addressing](service-endpoints-and-queue-addressing.md).</span></span>  
  
### <a name="msmqintegrationbinding"></a><span data-ttu-id="4851c-216">MsmqIntegrationBinding</span><span class="sxs-lookup"><span data-stu-id="4851c-216">MsmqIntegrationBinding</span></span>  

 <span data-ttu-id="4851c-217">는 `MsmqIntegrationBinding` WCF 끝점이 c, c + +, COM 또는 System. 메시징 api로 작성 된 기존 MSMQ 응용 프로그램과 통신 하도록 하려는 경우에 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-217">The `MsmqIntegrationBinding` is used when you want a WCF endpoint to communicate with an existing MSMQ application written in C, C++, COM, or System.Messaging APIs.</span></span>  
  
 <span data-ttu-id="4851c-218">바인딩 속성은 `NetMsmqBinding`에서와 같습니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-218">The binding properties are the same as for `NetMsmqBinding`.</span></span> <span data-ttu-id="4851c-219">그러나 다음과 같은 차이가 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-219">However, the following differences apply:</span></span>  
  
- <span data-ttu-id="4851c-220">`MsmqIntegrationBinding`에 대한 작업 계약은 형식 매개 변수가 본문 형식인 <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> 형식의 단일 매개 변수를 사용하도록 제한됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-220">The operation contract for `MsmqIntegrationBinding` is restricted to taking a single parameter of type <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> where the type parameter is the body type.</span></span>  
  
- <span data-ttu-id="4851c-221">대부분의 MSMQ 네이티브 메시지 속성은 <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601>에서 사용하도록 노출됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-221">Much of MSMQ native message properties are exposed in the <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> for use.</span></span>  
  
- <span data-ttu-id="4851c-222">메시지 본문 serialization 및 deserialization을 돕기 위해 XML 및 ActiveX와 같은 serializer가 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="4851c-222">To help with serialization and deserialization of the message body, serializers such as XML and ActiveX are provided.</span></span>  
  
### <a name="sample-code"></a><span data-ttu-id="4851c-223">샘플 코드</span><span class="sxs-lookup"><span data-stu-id="4851c-223">Sample Code</span></span>  

 <span data-ttu-id="4851c-224">MSMQ를 사용하는 WCF 서비스를 작성하는 방법에 대한 단계별 지침은 다음 항목을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="4851c-224">For step by step instructions on how to write WCF services that use MSMQ see the following topics:</span></span>  
  
- [<span data-ttu-id="4851c-225">방법: WCF 엔드포인트 및 메시지 큐 애플리케이션과 메시지 교환</span><span class="sxs-lookup"><span data-stu-id="4851c-225">How to: Exchange Messages with WCF Endpoints and Message Queuing Applications</span></span>](how-to-exchange-messages-with-wcf-endpoints-and-message-queuing-applications.md)  
  
- [<span data-ttu-id="4851c-226">방법: WCF 엔드포인트와 대기 중인 메시지 교환</span><span class="sxs-lookup"><span data-stu-id="4851c-226">How to: Exchange Queued Messages with WCF Endpoints</span></span>](how-to-exchange-queued-messages-with-wcf-endpoints.md)  
  
 <span data-ttu-id="4851c-227">WCF에서 MSMQ 사용을 보여 주는 전체 코드 샘플은 다음 항목을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="4851c-227">For a completed code sample illustrating the use of MSMQ in WCF see the following topics:</span></span>  
  
- [<span data-ttu-id="4851c-228">트랜잭션된 MSMQ 바인딩</span><span class="sxs-lookup"><span data-stu-id="4851c-228">Transacted MSMQ Binding</span></span>](../samples/transacted-msmq-binding.md)  
  
- [<span data-ttu-id="4851c-229">일시 대기 통신</span><span class="sxs-lookup"><span data-stu-id="4851c-229">Volatile Queued Communication</span></span>](../samples/volatile-queued-communication.md)  
  
- [<span data-ttu-id="4851c-230">배달 못 한 편지 큐</span><span class="sxs-lookup"><span data-stu-id="4851c-230">Dead Letter Queues</span></span>](../samples/dead-letter-queues.md)  
  
- [<span data-ttu-id="4851c-231">세션 및 큐</span><span class="sxs-lookup"><span data-stu-id="4851c-231">Sessions and Queues</span></span>](../samples/sessions-and-queues.md)  
  
- [<span data-ttu-id="4851c-232">상호 통신</span><span class="sxs-lookup"><span data-stu-id="4851c-232">Two-Way Communication</span></span>](../samples/two-way-communication.md)
  
- [<span data-ttu-id="4851c-233">SRMP</span><span class="sxs-lookup"><span data-stu-id="4851c-233">SRMP</span></span>](../samples/srmp.md)  
  
- [<span data-ttu-id="4851c-234">메시지 큐에 대한 메시지 보안</span><span class="sxs-lookup"><span data-stu-id="4851c-234">Message Security over Message Queuing</span></span>](../samples/message-security-over-message-queuing.md)  
  
## <a name="see-also"></a><span data-ttu-id="4851c-235">참고 항목</span><span class="sxs-lookup"><span data-stu-id="4851c-235">See also</span></span>

- [<span data-ttu-id="4851c-236">서비스 엔드포인트 및 큐 주소 지정</span><span class="sxs-lookup"><span data-stu-id="4851c-236">Service Endpoints and Queue Addressing</span></span>](service-endpoints-and-queue-addressing.md)
- [<span data-ttu-id="4851c-237">대기 중인 애플리케이션 웹 호스팅</span><span class="sxs-lookup"><span data-stu-id="4851c-237">Web Hosting a Queued Application</span></span>](web-hosting-a-queued-application.md)
