---
description: '자세한 정보: 스트리밍 메시지 전송'
title: 스트리밍 메시지 전송
ms.date: 03/30/2017
ms.assetid: 72a47a51-e5e7-4b76-b24a-299d51e0ae5a
ms.openlocfilehash: 282b16850e4babe73207e3f3e1a8bd5da24c70cf
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99793391"
---
# <a name="streaming-message-transfer"></a><span data-ttu-id="340ff-103">스트리밍 메시지 전송</span><span class="sxs-lookup"><span data-stu-id="340ff-103">Streaming Message Transfer</span></span>

<span data-ttu-id="340ff-104">WCF (Windows Communication Foundation) 전송에서는 메시지를 전송 하는 두 가지 모드를 지원 합니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-104">Windows Communication Foundation (WCF) transports support two modes for transferring messages:</span></span>  
  
- <span data-ttu-id="340ff-105">버퍼링 된 전송은 전송이 완료 될 때까지 전체 메시지를 메모리 버퍼에 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-105">Buffered transfers hold the entire message in a memory buffer until the transfer is complete.</span></span> <span data-ttu-id="340ff-106">버퍼링된 메시지는 수신기에서 읽기 전에 완전히 전달되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-106">A buffered message must be completely delivered before a receiver can read it.</span></span>  
  
- <span data-ttu-id="340ff-107">스트리밍 전송에서는 메시지를 스트림으로 노출합니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-107">Streamed transfers expose the message as a stream.</span></span> <span data-ttu-id="340ff-108">수신기는 전달이 완료되기 전에 메시지 처리를 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-108">The receiver starts processing the message before it is completely delivered.</span></span>  
  
- <span data-ttu-id="340ff-109">스트리밍 전송은 대용량 메모리 버퍼에 대한 요구 사항을 제거하여 서비스 확장성을 향상시킬 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-109">Streamed transfers can improve the scalability of a service by eliminating the requirement for large memory buffers.</span></span> <span data-ttu-id="340ff-110">전송 모드를 변경하면 확장성이 향상되는지 여부는 전송할 메시지의 크기에 따라 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-110">Whether changing the transfer mode improves scalability depends on the size of the messages being transferred.</span></span> <span data-ttu-id="340ff-111">메시지의 크기가 클수록 스트리밍 전송을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-111">Large message sizes favor using streamed transfers.</span></span>  
  
 <span data-ttu-id="340ff-112">기본적으로 HTTP, TCP/IP 및 명명된 파이프 전송에서는 버퍼링 전송을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-112">By default, the HTTP, TCP/IP, and named pipe transports use buffered transfers.</span></span> <span data-ttu-id="340ff-113">이 문서에서는 이러한 전송을 버퍼링 전송 모드에서 스트리밍 전송 모드로 전환하는 방법과 그 결과에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-113">This document describes how to switch these transports from a buffered to streamed transfer mode and the consequences of doing so.</span></span>  
  
## <a name="enabling-streamed-transfers"></a><span data-ttu-id="340ff-114">스트리밍 전송 사용</span><span class="sxs-lookup"><span data-stu-id="340ff-114">Enabling Streamed Transfers</span></span>  

 <span data-ttu-id="340ff-115">버퍼링 전송 모드와 스트리밍 전송 모드의 선택은 전송의 바인딩 요소에서 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-115">Selecting between buffered and streamed transfer modes is done on the binding element of the transport.</span></span> <span data-ttu-id="340ff-116">바인딩 요소에는 <xref:System.ServiceModel.TransferMode>, `Buffered`, `Streamed` 또는 `StreamedRequest`로 설정할 수 있는 `StreamedResponse` 속성이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-116">The binding element has a <xref:System.ServiceModel.TransferMode> property that can be set to `Buffered`, `Streamed`, `StreamedRequest`, or `StreamedResponse`.</span></span> <span data-ttu-id="340ff-117">전송 모드를 `Streamed`로 설정하면 양방향 스트리밍 통신이 가능합니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-117">Setting the transfer mode to `Streamed` enables streaming communication in both directions.</span></span> <span data-ttu-id="340ff-118">전송 모드를 `StreamedRequest` 또는 `StreamedResponse`로 설정하면 표시된 방향으로만 스트리밍 통신이 가능합니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-118">Setting the transfer mode to `StreamedRequest` or `StreamedResponse` enables streaming communication in the indicated direction only.</span></span>  
  
 <span data-ttu-id="340ff-119"><xref:System.ServiceModel.BasicHttpBinding>, <xref:System.ServiceModel.NetTcpBinding> 및 <xref:System.ServiceModel.NetNamedPipeBinding> 바인딩은 <xref:System.ServiceModel.TransferMode> 속성을 노출합니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-119">The <xref:System.ServiceModel.BasicHttpBinding>, <xref:System.ServiceModel.NetTcpBinding>, and <xref:System.ServiceModel.NetNamedPipeBinding> bindings expose the <xref:System.ServiceModel.TransferMode> property.</span></span> <span data-ttu-id="340ff-120">다른 전송의 경우 전송 모드를 설정하려면 사용자 지정 바인딩을 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-120">For other transports, you must create a custom binding to set the transfer mode.</span></span>  
  
 <span data-ttu-id="340ff-121">버퍼링 또는 스트리밍 전송 중 어느 것을 사용할 것인지를 결정하는 것은 엔드포인트의 로컬 결정입니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-121">The decision to use either buffered or streamed transfers is a local decision of the endpoint.</span></span> <span data-ttu-id="340ff-122">HTTP 전송의 경우 전송 모드는 연결 전체 또는 서버 및 다른 매개로 전파되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-122">For HTTP transports, the transfer mode does not propagate across a connection, or to servers and other intermediaries.</span></span> <span data-ttu-id="340ff-123">서비스 인터페이스의 설명에 전송 모드 설정이 반영되지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-123">Setting the transfer mode is not reflected in the description of the service interface.</span></span> <span data-ttu-id="340ff-124">서비스에 대한 클라이언트 클래스를 생성하고 나면 스트리밍 전송에서 모드 설정에 사용할 서비스의 구성 파일을 편집해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-124">After generating a client class for a service, you must edit the configuration file for services intended to be used with streamed transfers to set the mode.</span></span> <span data-ttu-id="340ff-125">TCP 및 명명 된 파이프 전송의 경우 전송 모드가 정책 어설션으로 전파 됩니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-125">For TCP and named pipe transports, the transfer mode is propagated as a policy assertion.</span></span>  
  
 <span data-ttu-id="340ff-126">코드 샘플은 [방법: 스트리밍 사용](how-to-enable-streaming.md)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="340ff-126">For code samples, see [How to: Enable Streaming](how-to-enable-streaming.md).</span></span>  
  
## <a name="enabling-asynchronous-streaming"></a><span data-ttu-id="340ff-127">비동기 스트리밍 사용</span><span class="sxs-lookup"><span data-stu-id="340ff-127">Enabling Asynchronous Streaming</span></span>  

 <span data-ttu-id="340ff-128">비동기 스트리밍을 사용하려면 <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior> 엔드포인트 동작을 서비스 호스트에 추가하고 <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.AsynchronousSendEnabled%2A> 속성을 `true`로 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-128">To enable asynchronous streaming, add the  <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior> endpoint behavior to the service host and set its <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.AsynchronousSendEnabled%2A> property to `true`.</span></span>  
  
 <span data-ttu-id="340ff-129">이 WCF 버전은 전송 측에 진정한 의미의 비동기 스트리밍 기능을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-129">This version of WCF also adde the capability of true asynchronous streaming on the send side.</span></span> <span data-ttu-id="340ff-130">이에 따라 메시지를 복수 클라이언트로 스트리밍하고 그 중 일부는 네트워크 혼잡으로 인해 읽는 속도가 느리거나 전혀 읽고 있지 않은 시나리오에서 서비스 확장성이 향상되었습니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-130">This improves scalability of the service in scenarios where it is streaming messages to multiple clients some of which are slow in reading; possibly due to network congestion or are not reading at all.</span></span> <span data-ttu-id="340ff-131">이러한 시나리오에서는 WCF가 클라이언트당 서비스에서 개별 스레드를 차단하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-131">In these scenarios WCF no longer blocks individual threads on the service per client.</span></span> <span data-ttu-id="340ff-132">그러므로 서비스가 훨씬 더 많은 클라이언트를 처리해서 서비스 확장성이 향상됩니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-132">This ensures that the service is able to process many more clients thereby improving the scalability of the service.</span></span>  
  
## <a name="restrictions-on-streamed-transfers"></a><span data-ttu-id="340ff-133">스트리밍 전송에 대한 제한 사항</span><span class="sxs-lookup"><span data-stu-id="340ff-133">Restrictions on Streamed Transfers</span></span>  

 <span data-ttu-id="340ff-134">스트리밍 전송 모드를 사용하면 런타임에 추가 제한 사항이 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-134">Using the streamed transfer mode causes the run time to enforce additional restrictions.</span></span>  
  
 <span data-ttu-id="340ff-135">스트리밍 전송을 통해 발생하는 작업에서 계약은 입력 또는 출력 매개 변수를 최대 하나만 가질 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-135">Operations that occur across a streamed transport can have a contract with at most one input or output parameter.</span></span> <span data-ttu-id="340ff-136">해당 매개 변수는 메시지의 전체 본문에 해당하며 <xref:System.ServiceModel.Channels.Message>, <xref:System.IO.Stream>의 파생 형식 또는 <xref:System.Xml.Serialization.IXmlSerializable> 구현이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-136">That parameter corresponds to the entire body of the message and must be a <xref:System.ServiceModel.Channels.Message>, a derived type of <xref:System.IO.Stream>, or an <xref:System.Xml.Serialization.IXmlSerializable> implementation.</span></span> <span data-ttu-id="340ff-137">작업에 대 한 반환 값은 출력 매개 변수를 갖는 것과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-137">Having a return value for an operation is equivalent to having an output parameter.</span></span>  
  
 <span data-ttu-id="340ff-138">신뢰할 수 있는 메시징, 트랜잭션 및 SOAP 메시지 수준 보안과 같은 일부 WCF 기능은 전송용 메시지 버퍼링을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-138">Some WCF features, such as reliable messaging, transactions, and SOAP message-level security, rely on buffering messages for transmissions.</span></span> <span data-ttu-id="340ff-139">이러한 기능을 사용 하면 스트리밍을 사용 하 여 얻을 수 있는 성능 이점을 줄이거나 없앨 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-139">Using these features may reduce or eliminate the performance benefits gained by using streaming.</span></span> <span data-ttu-id="340ff-140">스트리밍 전송을 보안하려면 전송 수준 보안만 사용하거나 전송 수준 보안과 인증 전용 메시지 보안을 함께 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-140">To secure a streamed transport, use transport-level security only or use transport-level security plus authentication-only message security.</span></span>  
  
 <span data-ttu-id="340ff-141">SOAP 헤더는 전송 모드가 스트리밍으로 설정되어 있더라도 항상 버퍼링됩니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-141">SOAP headers are always buffered, even when the transfer mode is set to streamed.</span></span> <span data-ttu-id="340ff-142">메시지 헤더는 `MaxBufferSize` 전송 할당량 크기를 초과할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-142">The headers for a message must not exceed the size of the `MaxBufferSize` transport quota.</span></span> <span data-ttu-id="340ff-143">이 설정에 대 한 자세한 내용은 [Transport 할당량](transport-quotas.md)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="340ff-143">For more information about this setting, see [Transport Quotas](transport-quotas.md).</span></span>  
  
## <a name="differences-between-buffered-and-streamed-transfers"></a><span data-ttu-id="340ff-144">버퍼링 전송과 스트리밍 전송 사이의 차이점</span><span class="sxs-lookup"><span data-stu-id="340ff-144">Differences Between Buffered and Streamed Transfers</span></span>  

 <span data-ttu-id="340ff-145">전송 모드를 버퍼링 전송에서 스트리밍 전송으로 변경하면 TCP 및 명명된 파이프 전송의 기본 채널 셰이프도 함께 변경됩니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-145">Changing the transfer mode from buffered to streamed also changes the native channel shape of the TCP and named pipe transports.</span></span> <span data-ttu-id="340ff-146">버퍼링 된 전송의 경우 네이티브 채널 셰이프는 <xref:System.ServiceModel.Channels.IDuplexSessionChannel> 입니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-146">For buffered transfers, the native channel shape is <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span></span> <span data-ttu-id="340ff-147">스트리밍된 전송의 경우 네이티브 채널은 <xref:System.ServiceModel.Channels.IRequestChannel> 및 <xref:System.ServiceModel.Channels.IReplyChannel> 입니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-147">For streamed transfers, the native channels are <xref:System.ServiceModel.Channels.IRequestChannel> and <xref:System.ServiceModel.Channels.IReplyChannel>.</span></span> <span data-ttu-id="340ff-148">서비스 계약을 통하지 않고 이러한 전송을 직접 사용하는 기존 애플리케이션에서 전송 모드를 변경하려면 채널 팩터리 및 수신기에 대한 예상 채널 셰이프를 변경해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="340ff-148">Changing the transfer mode in an existing application that uses these transports directly (that is, not through a service contract) requires changing the expected channel shape for channel factories and listeners.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="340ff-149">참고 항목</span><span class="sxs-lookup"><span data-stu-id="340ff-149">See also</span></span>

- [<span data-ttu-id="340ff-150">방법: 스트리밍 사용</span><span class="sxs-lookup"><span data-stu-id="340ff-150">How to: Enable Streaming</span></span>](how-to-enable-streaming.md)
