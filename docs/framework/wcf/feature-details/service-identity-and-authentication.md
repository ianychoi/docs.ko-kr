---
title: 서비스 ID 및 인증
description: WCF에서 서비스를 인증 하는 데 사용 하는 WSDL 서비스에서 생성 된 값인 서비스의 끝점 id에 대해 알아봅니다.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- authentication [WCF], specifying the identity of a service
ms.assetid: a4c8f52c-5b30-45c4-a545-63244aba82be
ms.openlocfilehash: f1c1d41f3d2ebc4482fa7e5f28fcbefe88bb9a02
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/26/2020
ms.locfileid: "96253910"
---
# <a name="service-identity-and-authentication"></a><span data-ttu-id="7ca56-103">서비스 ID 및 인증</span><span class="sxs-lookup"><span data-stu-id="7ca56-103">Service Identity and Authentication</span></span>

<span data-ttu-id="7ca56-104">서비스의 *끝점 id* 는 서비스 WSDL (웹 서비스 기술 언어)에서 생성 된 값입니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-104">A service's *endpoint identity* is a value generated from the service Web Services Description Language (WSDL).</span></span> <span data-ttu-id="7ca56-105">모든 클라이언트에 전파되는 이 값은 서비스를 인증하는 데 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-105">This value, propagated to any client, is used to authenticate the service.</span></span> <span data-ttu-id="7ca56-106">클라이언트가 엔드포인트에 대한 통신을 시작하고 서비스가 클라이언트에 대해 인증되면 클라이언트는 엔드포인트 ID 값과 엔드포인트 인증 프로세스에서 반환된 실제 값을 비교합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-106">After the client initiates a communication to an endpoint and the service authenticates itself to the client, the client compares the endpoint identity value with the actual value the endpoint authentication process returned.</span></span> <span data-ttu-id="7ca56-107">두 값이 일치하는 경우 클라이언트는 예상 서비스 엔드포인트에 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-107">If they match, the client is assured it has contacted the expected service endpoint.</span></span> <span data-ttu-id="7ca56-108">이는 클라이언트가 악의적인 서비스에서 호스트 되는 끝점으로 리디렉션되는 것을 방지 하 여 *피싱* 으로부터 보호 하는 역할을 합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-108">This functions as a protection against *phishing* by preventing a client from being redirected to an endpoint hosted by a malicious service.</span></span>  
  
 <span data-ttu-id="7ca56-109">Id 설정을 보여 주는 샘플 응용 프로그램은 [서비스 Id 샘플](../samples/service-identity-sample.md)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="7ca56-109">For a sample application that demonstrates identity setting, see [Service Identity Sample](../samples/service-identity-sample.md).</span></span> <span data-ttu-id="7ca56-110">끝점 및 끝점 주소에 대 한 자세한 내용은 [주소](endpoint-addresses.md)를 참조 하십시오.</span><span class="sxs-lookup"><span data-stu-id="7ca56-110">For more information about endpoints and endpoint addresses, see [Addresses](endpoint-addresses.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="7ca56-111">인증을 위해 NTLM(NT LanMan)을 사용하는 경우 NTLM에서 클라이언트는 서버를 인증할 수 없기 때문에 서비스 ID가 확인되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-111">When you use NT LanMan (NTLM) for authentication, the service identity is not checked because, under NTLM, the client is unable to authenticate the server.</span></span> <span data-ttu-id="7ca56-112">NTLM은 컴퓨터가 Windows 작업 그룹의 일부이거나 Kerberos 인증을 지원하지 않는 이전 버전의 Windows를 실해하는 경우 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-112">NTLM is used when computers are part of a Windows workgroup, or when running an older version of Windows that does not support Kerberos authentication.</span></span>  
  
 <span data-ttu-id="7ca56-113">클라이언트가 보안 채널을 시작 하 여 서비스에 메시지를 보내는 경우 WCF (Windows Communication Foundation) 인프라는 서비스를 인증 하 고 서비스 id가 클라이언트에서 사용 하는 끝점 주소에 지정 된 id와 일치 하는 경우에만 메시지를 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-113">When the client initiates a secure channel to send a message to a service over it, the Windows Communication Foundation (WCF) infrastructure authenticates the service, and only sends the message if the service identity matches the identity specified in the endpoint address the client uses.</span></span>  
  
 <span data-ttu-id="7ca56-114">다음 단계를 통해 ID 처리를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-114">Identity processing consists of the following stages:</span></span>  
  
- <span data-ttu-id="7ca56-115">디자인 타임에 클라이언트 개발자는 WSDL을 통해 노출된 엔드포인트의 메타데이터에서 서비스의 ID를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-115">At design time, the client developer determines the service's identity from the endpoint's metadata (exposed through WSDL).</span></span>  
  
- <span data-ttu-id="7ca56-116">런타임에 클라이언트 애플리케이션은 메시지를 서비스에 보내기 전에 서비스의 보안 자격 증명 클레임을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-116">At runtime, the client application checks the claims of the service's security credentials before sending any messages to the service.</span></span>  
  
 <span data-ttu-id="7ca56-117">클라이언트에서의 ID 처리 작업은 서비스에 대한 클라이언트 인증과 유사합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-117">Identity processing on the client is analogous to client authentication on the service.</span></span> <span data-ttu-id="7ca56-118">보안 서비스는 클라이언트의 자격 증명이 인증될 때까지 코드를 실행하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-118">A secure service does not execute code until the client's credentials have been authenticated.</span></span> <span data-ttu-id="7ca56-119">마찬가지로 서비스 메타데이터에서 미리 알려진 정보에 따라 서비스의 자격 증명이 인증될 때까지 클라이언트에서 메시지를 서비스로 보내지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-119">Likewise, the client does not send messages to the service until the service's credentials have been authenticated based on what is known in advance from the service's metadata.</span></span>  
  
 <span data-ttu-id="7ca56-120"><xref:System.ServiceModel.EndpointAddress.Identity%2A> 클래스의 <xref:System.ServiceModel.EndpointAddress> 속성은 클라이언트에서 호출한 서비스의 ID를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-120">The <xref:System.ServiceModel.EndpointAddress.Identity%2A> property of the <xref:System.ServiceModel.EndpointAddress> class represents the identity of the service called by the client.</span></span> <span data-ttu-id="7ca56-121">서비스는 메타데이터에 <xref:System.ServiceModel.EndpointAddress.Identity%2A>를 게시합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-121">The service publishes the <xref:System.ServiceModel.EndpointAddress.Identity%2A> in its metadata.</span></span> <span data-ttu-id="7ca56-122">클라이언트 개발자가 서비스 끝점에 대해 [ServiceModel Metadata 유틸리티 도구 (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) 를 실행 하는 경우 생성 된 구성에는 서비스의 속성 값이 포함 <xref:System.ServiceModel.EndpointAddress.Identity%2A> 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-122">When the client developer runs the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) against the service endpoint, the generated configuration contains the value of the service's <xref:System.ServiceModel.EndpointAddress.Identity%2A> property.</span></span> <span data-ttu-id="7ca56-123">WCF 인프라 (보안을 사용 하 여 구성 된 경우)는 서비스가 지정 된 id를 소유 하 고 있는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-123">The WCF infrastructure (if configured with security) verifies that the service possesses the identity specified.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="7ca56-124">메타데이터에는 서비스의 예상 ID가 포함되어 있기 때문에 서비스에 대한 HTTPS 엔드포인트를 만드는 것과 같이 보안을 설정하여 서비스 메타데이터를 노출하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-124">The metadata contains the expected identity of the service, so it is recommended that you expose the service metadata through secure means, for example, by creating an HTTPS endpoint for the service.</span></span> <span data-ttu-id="7ca56-125">자세한 내용은 [방법: 메타 데이터 끝점 보안](how-to-secure-metadata-endpoints.md)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="7ca56-125">For more information, see [How to: Secure Metadata Endpoints](how-to-secure-metadata-endpoints.md).</span></span>  
  
## <a name="identity-types"></a><span data-ttu-id="7ca56-126">ID 형식</span><span class="sxs-lookup"><span data-stu-id="7ca56-126">Identity Types</span></span>  

 <span data-ttu-id="7ca56-127">서비스는 6 가지 유형의 id를 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-127">A service can provide six types of identities.</span></span> <span data-ttu-id="7ca56-128">각 ID 형식은 구성의 `<identity>` 요소 내에 포함될 수 있는 요소에 해당합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-128">Each identity type corresponds to an element that can be contained inside the `<identity>` element in configuration.</span></span> <span data-ttu-id="7ca56-129">사용되는 형식은 시나리오 및 서비스 보안 요구 사항에 따라 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-129">The type used depends on the scenario and the service's security requirements.</span></span> <span data-ttu-id="7ca56-130">다음 표에서는 각 ID 형식에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-130">The following table describes each identity type.</span></span>  
  
|<span data-ttu-id="7ca56-131">ID 형식</span><span class="sxs-lookup"><span data-stu-id="7ca56-131">Identity type</span></span>|<span data-ttu-id="7ca56-132">Description</span><span class="sxs-lookup"><span data-stu-id="7ca56-132">Description</span></span>|<span data-ttu-id="7ca56-133">일반적인 시나리오</span><span class="sxs-lookup"><span data-stu-id="7ca56-133">Typical scenario</span></span>|  
|-------------------|-----------------|----------------------|  
|<span data-ttu-id="7ca56-134">DNS(Domain Name System)</span><span class="sxs-lookup"><span data-stu-id="7ca56-134">Domain Name System (DNS)</span></span>|<span data-ttu-id="7ca56-135">이 요소를 X.509 인증서 또는 Windows 계정과 함께 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-135">Use this element with X.509 certificates or Windows accounts.</span></span> <span data-ttu-id="7ca56-136">자격 증명에 지정된 DNS 이름과 이 요소에 지정된 값을 비교합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-136">It compares the DNS name specified in the credential with the value specified in this element.</span></span>|<span data-ttu-id="7ca56-137">DNS 검사를 사용하면 DNS 또는 주체 이름을 가진 인증서를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-137">A DNS check enables you to use certificates with DNS or subject names.</span></span> <span data-ttu-id="7ca56-138">DNS 또는 주체 이름이 같은 인증서를 다시 발급하는 경우 ID 검사가 계속 유효합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-138">If a certificate is reissued with the same DNS or subject name, then the identity check is still valid.</span></span> <span data-ttu-id="7ca56-139">인증서를 다시 발급하면 새 RSA 키를 얻게 되지만 같은 DNS 또는 주체 이름을 유지합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-139">When a certificate is reissued, it gets a new RSA key but retains the same DNS or subject name.</span></span> <span data-ttu-id="7ca56-140">따라서 클라이언트는 서비스에 대한 ID 정보를 업데이트할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-140">This means that clients do not have to update their identity information about the service.</span></span>|  
|<span data-ttu-id="7ca56-141">인증서</span><span class="sxs-lookup"><span data-stu-id="7ca56-141">Certificate.</span></span> <span data-ttu-id="7ca56-142">`ClientCredentialType`을 Certificate로 설정한 경우 기본값입니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-142">The default when `ClientCredentialType` is set to Certificate.</span></span>|<span data-ttu-id="7ca56-143">이 요소는 클라이언트와 비교할 Base64 인코딩된 X.509 인증서 값을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-143">This element specifies a Base64-encoded X.509 certificate value to compare with the client.</span></span><br /><br /> <span data-ttu-id="7ca56-144">또한 서비스를 인증 하는 데 CardSpace를 자격 증명으로 사용 하는 경우이 요소를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-144">Also use this element when using a CardSpace as a credential to authenticate the service.</span></span>|<span data-ttu-id="7ca56-145">이 요소는 지문 값에 따라 하나의 인증서만 사용하도록 인증을 제한합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-145">This element restricts authentication to a single certificate based upon its thumbprint value.</span></span> <span data-ttu-id="7ca56-146">이렇게 하면 고유한 지문 값을 가지므로 인증을 강화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-146">This enables stricter authentication because thumbprint values are unique.</span></span> <span data-ttu-id="7ca56-147">이 경우 "주체 이름이 같은 인증서를 다시 발급하는 경우에도 새 지문이 제공됩니다."라는 경고가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-147">This comes with one caveat: If the certificate is reissued with the same Subject name, it also has a new Thumbprint.</span></span> <span data-ttu-id="7ca56-148">따라서 새 지문을 모르는 경우 클라이언트가 서비스의 유효성을 검사할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-148">Therefore, clients are not able to validate the service unless the new thumbprint is known.</span></span> <span data-ttu-id="7ca56-149">인증서의 지문을 찾는 방법에 대 한 자세한 내용은 [방법: 인증서의 지문 검색](how-to-retrieve-the-thumbprint-of-a-certificate.md)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="7ca56-149">For more information about finding a certificate's thumbprint, see [How to: Retrieve the Thumbprint of a Certificate](how-to-retrieve-the-thumbprint-of-a-certificate.md).</span></span>|  
|<span data-ttu-id="7ca56-150">Certificate Reference</span><span class="sxs-lookup"><span data-stu-id="7ca56-150">Certificate Reference</span></span>|<span data-ttu-id="7ca56-151">앞에서 설명한 Certificate 옵션과 동일합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-151">Identical to the Certificate option described previously.</span></span> <span data-ttu-id="7ca56-152">그러나 이 요소를 사용하면 인증서 이름 및 인증서를 검색할 저장소 위치를 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-152">However, this element enables you to specify a certificate name and store location from which to retrieve the certificate.</span></span>|<span data-ttu-id="7ca56-153">앞에서 설명한 Certificate 시나리오와 동일합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-153">Same as the Certificate scenario described previously.</span></span><br /><br /> <span data-ttu-id="7ca56-154">인증서 저장소 위치를 변경할 수 있는 이점이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-154">The benefit is that the certificate store location can change.</span></span>|  
|<span data-ttu-id="7ca56-155">RSA</span><span class="sxs-lookup"><span data-stu-id="7ca56-155">RSA</span></span>|<span data-ttu-id="7ca56-156">이 요소는 클라이언트와 비교할 RSA 키 값을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-156">This element specifies an RSA key value to compare with the client.</span></span> <span data-ttu-id="7ca56-157">Certificate 옵션과 비슷하지만 인증서 지문을 사용하는 대신 인증서의 RSA 키를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-157">This is similar to the certificate option but rather than using the certificate's thumbprint, the certificate's RSA key is used instead.</span></span>|<span data-ttu-id="7ca56-158">RSA 검사를 사용하면 RSA 키에 따라 하나의 인증서만 사용하도록 인증을 제한할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-158">An RSA check enables you to specifically restrict authentication to a single certificate based upon its RSA key.</span></span> <span data-ttu-id="7ca56-159">이렇게 하면 RSA 키 값이 변경된 경우 기존 클라이언트와 작동하지 않는 서비스 대신 특정 RSA 키에 대한 인증을 강화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-159">This enables stricter authentication of a specific RSA key at the expense of the service, which no longer works with existing clients if the RSA key value changes.</span></span>|  
|<span data-ttu-id="7ca56-160">사용자 계정 이름(UPN).</span><span class="sxs-lookup"><span data-stu-id="7ca56-160">User principal name (UPN).</span></span> <span data-ttu-id="7ca56-161">`ClientCredentialType`이 Windows로 설정되고 시스템 계정 중 하나로 서비스 프로세스가 실행되지 않는 경우 기본값입니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-161">The default when the `ClientCredentialType` is set to Windows and the service process is not running under one of the system accounts.</span></span>|<span data-ttu-id="7ca56-162">이 요소는 서비스를 실행하는 UPN을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-162">This element specifies the UPN that the service is running under.</span></span> <span data-ttu-id="7ca56-163">[인증을 위해 서비스 id를 재정의](../extending/overriding-the-identity-of-a-service-for-authentication.md)하는 Kerberos 프로토콜 및 id 섹션을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="7ca56-163">See the Kerberos Protocol and Identity section of [Overriding the Identity of a Service for Authentication](../extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>|<span data-ttu-id="7ca56-164">이렇게 하면 서비스가 특정 Windows 사용자 계정으로 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-164">This ensures that the service is running under a specific Windows user account.</span></span> <span data-ttu-id="7ca56-165">사용자 계정은 현재 로그온한 사용자이거나 특정 사용자 계정으로 실행 중인 서비스일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-165">The user account can be either the current logged-on user or the service running under a particular user account.</span></span><br /><br /> <span data-ttu-id="7ca56-166">서비스가 Active Directory 환경 내의 도메인 계정으로 실행 중인 경우 이 설정에서는 Windows Kerberos 보안을 활용합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-166">This setting takes advantage of Windows Kerberos security if the service is running under a domain account within an Active Directory environment.</span></span>|  
|<span data-ttu-id="7ca56-167">SPN(서비스 사용자 이름).</span><span class="sxs-lookup"><span data-stu-id="7ca56-167">Service principal name (SPN).</span></span> <span data-ttu-id="7ca56-168">`ClientCredentialType`을 Windows로 설정하고 서비스 프로세스가 LocalService, LocalSystem 또는 NetworkService의 시스템 계정 중 하나로 실행 중인 경우 기본값입니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-168">The default when the `ClientCredentialType` is set to Windows and the service process is running under one of the system accounts—LocalService, LocalSystem, or NetworkService.</span></span>|<span data-ttu-id="7ca56-169">이 요소는 서비스 계정과 연결된 SPN을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-169">This element specifies the SPN associated with the service's account.</span></span> <span data-ttu-id="7ca56-170">[인증을 위해 서비스 id를 재정의](../extending/overriding-the-identity-of-a-service-for-authentication.md)하는 Kerberos 프로토콜 및 id 섹션을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="7ca56-170">See the Kerberos Protocol and Identity section of [Overriding the Identity of a Service for Authentication](../extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>|<span data-ttu-id="7ca56-171">이렇게 하면 SPN 및 SPN과 연결된 특정 Windows 계정이 서비스를 식별합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-171">This ensures that the SPN and the specific Windows account associated with the SPN identify the service.</span></span><br /><br /> <span data-ttu-id="7ca56-172">Setspn.exe 도구를 사용하여 서비스 사용자 계정의 컴퓨터 계정을 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-172">You can use the Setspn.exe tool to associate a machine account for the service's user account.</span></span><br /><br /> <span data-ttu-id="7ca56-173">서비스가 시스템 계정 중 하나 또는 연결된 SPN 이름을 가진 도메인 계정으로 실행 중이고 컴퓨터가 Active Directory 환경 내의 도메인 멤버인 경우 이 설정에서는 Windows Kerberos 보안을 활용합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-173">This setting takes advantage of Windows Kerberos security if the service is running under one of the system accounts or under a domain account that has an associated SPN name with it and the computer is a member of a domain within an Active Directory environment.</span></span>|  
  
## <a name="specifying-identity-at-the-service"></a><span data-ttu-id="7ca56-174">서비스에서 ID 지정</span><span class="sxs-lookup"><span data-stu-id="7ca56-174">Specifying Identity at the Service</span></span>  

 <span data-ttu-id="7ca56-175">일반적으로 선택한 클라이언트 자격 증명 형식에 따라 서비스 메타데이터에 노출되는 ID 형식이 결정되므로 서비스에 ID를 설정할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-175">Typically, you do not have to set the identity on a service because the selection of a client credential type dictates the type of identity exposed in the service metadata.</span></span> <span data-ttu-id="7ca56-176">서비스 id를 재정의 하거나 지정 하는 방법에 대 한 자세한 내용은 [인증을 위해 서비스 Id 재정의](../extending/overriding-the-identity-of-a-service-for-authentication.md)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="7ca56-176">For more information about how to override or specify service identity, see [Overriding the Identity of a Service for Authentication](../extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>  
  
## <a name="using-the-identity-element-in-configuration"></a><span data-ttu-id="7ca56-177">\<identity>구성에서 요소 사용</span><span class="sxs-lookup"><span data-stu-id="7ca56-177">Using the \<identity> Element in Configuration</span></span>  

 <span data-ttu-id="7ca56-178">이전에 `Certificate,`에 표시된 바인딩에서 클라이언트 자격 증명 형식을 변경하면 생성된 WSDL에 다음 코드에 표시된 ID 값에 대한 Base64로 serialize된 X.509 인증서가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-178">If you change the client credential type in the binding previously shown to `Certificate,` then the generated WSDL contains a Base64 serialized X.509 certificate for the identity value as shown in the following code.</span></span> <span data-ttu-id="7ca56-179">이는 Windows 이외의 모든 클라이언트 자격 증명 형식에 대한 기본값입니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-179">This is the default for all client credential types other than Windows.</span></span>  

 <span data-ttu-id="7ca56-180">`<identity>`구성의 요소를 사용 하거나 코드에서 id를 설정 하 여 기본 서비스 id의 값을 변경 하거나 id 형식을 변경할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-180">You can change the value of the default service identity or change the type of the identity by using the `<identity>` element in configuration or by setting the identity in code.</span></span> <span data-ttu-id="7ca56-181">다음 구성 코드에서는 값 `contoso.com`으로 DNS(Domain Name System) ID를 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-181">The following configuration code sets a domain name system (DNS) identity with the value `contoso.com`.</span></span>  

## <a name="setting-identity-programmatically"></a><span data-ttu-id="7ca56-182">프로그래밍 방식으로 ID 설정</span><span class="sxs-lookup"><span data-stu-id="7ca56-182">Setting Identity Programmatically</span></span>  

 <span data-ttu-id="7ca56-183">WCF가 자동으로 결정 하므로 서비스에서 명시적으로 id를 지정할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-183">Your service does not have to explicitly specify an identity, because WCF automatically determines it.</span></span> <span data-ttu-id="7ca56-184">그러나 WCF를 사용 하면 필요한 경우 끝점에 id를 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-184">However, WCF allows you to specify an identity on an endpoint, if required.</span></span> <span data-ttu-id="7ca56-185">다음 코드에서는 특정 DNS ID를 사용하여 새 서비스 엔드포인트를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-185">The following code adds a new service endpoint with a specific DNS identity.</span></span>  
  
 [!code-csharp[C_Identity#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_identity/cs/source.cs#5)]
 [!code-vb[C_Identity#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_identity/vb/source.vb#5)]  
  
## <a name="specifying-identity-at-the-client"></a><span data-ttu-id="7ca56-186">클라이언트에서 ID 지정</span><span class="sxs-lookup"><span data-stu-id="7ca56-186">Specifying Identity at the Client</span></span>  

 <span data-ttu-id="7ca56-187">디자인 타임에 클라이언트 개발자는 일반적으로 [ServiceModel Metadata 유틸리티 도구 (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) 를 사용 하 여 클라이언트 구성을 생성 합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-187">At design time, a client developer typically uses the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) to generate client configuration.</span></span> <span data-ttu-id="7ca56-188">생성된 구성 파일(클라이언트에서 사용)에는 서버 ID가 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-188">The generated configuration file (intended for use by the client) contains the server's identity.</span></span> <span data-ttu-id="7ca56-189">예를 들어, 다음 코드는 앞의 예제에서처럼 DNS ID를 지정하는 서비스에서 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-189">For example, the following code is generated from a service that specifies a DNS identity, as shown in the preceding example.</span></span> <span data-ttu-id="7ca56-190">클라이언트 엔드포인트 ID 값은 서비스 값과 일치합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-190">Note that the client's endpoint identity value matches that of the service.</span></span> <span data-ttu-id="7ca56-191">이 경우 클라이언트가 서비스에 대한 Windows(Kerberos) 자격 증명을 받을 때 값은 `contoso.com`이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-191">In this case, when the client receives the Windows (Kerberos) credentials for the service, it expects the value to be `contoso.com`.</span></span>  

 <span data-ttu-id="7ca56-192">Windows 대신 서비스가 Certificate를 클라이언트 자격 증명 형식으로 지정하는 경우 인증서의 DNS 속성 값은 `contoso.com`이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-192">If, instead of Windows, the service specifies a certificate as the client credential type, then the certificate's DNS property is expected to be the value `contoso.com`.</span></span> <span data-ttu-id="7ca56-193">또는 DNS 속성이 `null`인 경우 인증서의 주체 이름은 `contoso.com`이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-193">(Or if the DNS property is `null`, the certificate's subject name must be `contoso.com`.)</span></span>  
  
#### <a name="using-a-specific-value-for-identity"></a><span data-ttu-id="7ca56-194">ID에 대해 특정 값 사용</span><span class="sxs-lookup"><span data-stu-id="7ca56-194">Using a Specific Value for Identity</span></span>  

 <span data-ttu-id="7ca56-195">다음 클라이언트 구성 파일에서는 서비스 ID가 특정 값이 되는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-195">The following client configuration file shows how the service's identity is expected to be a specific value.</span></span> <span data-ttu-id="7ca56-196">다음 예제에서 클라이언트는 두 개의 엔드포인트와 통신할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-196">In the following example, the client can communicate with two endpoints.</span></span> <span data-ttu-id="7ca56-197">첫 번째 끝점은 인증서 지문으로 식별되고 두 번째는 인증서 RSA 키로 식별됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-197">The first is identified with a certificate thumbprint and the second with a certificate RSA key.</span></span> <span data-ttu-id="7ca56-198">즉, 퍼블릭 키/프라이빗 키 쌍만 포함하는 신뢰할 수 있는 기관에서 발급하지 않은 인증서입니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-198">That is, a certificate that contains only a public key/private key pair, but is not issued by a trusted authority.</span></span>  

## <a name="identity-checking-at-run-time"></a><span data-ttu-id="7ca56-199">런타임에 ID 검사</span><span class="sxs-lookup"><span data-stu-id="7ca56-199">Identity Checking at Run Time</span></span>  

 <span data-ttu-id="7ca56-200">디자인 타임에 클라이언트 개발자는 메타데이터를 통해 서버 ID를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-200">At design time, a client developer determines the server's identity through its metadata.</span></span> <span data-ttu-id="7ca56-201">런타임에 서비스에서 엔드포인트를 호출하기 전에 ID 검사가 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-201">At runtime, the identity check is performed before calling any endpoints on the service.</span></span>  
  
 <span data-ttu-id="7ca56-202">ID 값은 메타데이터에 의해 지정되는 인증 형식, 즉 서비스에 사용되는 자격 증명 형식과 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-202">The identity value is tied to the type of authentication specified by metadata; in other words, the type of credentials used for the service.</span></span>  
  
 <span data-ttu-id="7ca56-203">채널이 인증을 위해 X.509 인증서를 사용하여 메시지 수준 또는 전송 수준의 SSL(Secure Sockets Layer)을 인증하도록 구성된 경우 다음 ID 값이 유효합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-203">If the channel is configured to authenticate using message- or transport-level Secure Sockets Layer (SSL) with X.509 certificates for authentication, the following identity values are valid:</span></span>  
  
- <span data-ttu-id="7ca56-204">DNS.</span><span class="sxs-lookup"><span data-stu-id="7ca56-204">DNS.</span></span> <span data-ttu-id="7ca56-205">WCF는 SSL 핸드셰이크 중에 제공 된 인증서에 DNS 또는 `CommonName` (CN) 특성이 클라이언트의 dns id에 지정 된 값과 동일한 지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-205">WCF ensures that the certificate provided during the SSL handshake contains a DNS or `CommonName` (CN) attribute equal to the value specified in the DNS identity on the client.</span></span> <span data-ttu-id="7ca56-206">이러한 검사는 서버 인증서 유효성 검사 확인 작업 이외에 추가로 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-206">Note that these checks are done in addition to determining the validity of the server certificate.</span></span> <span data-ttu-id="7ca56-207">기본적으로 WCF는 신뢰할 수 있는 루트 인증 기관에서 서버 인증서를 발급 했는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-207">By default, WCF validates that the server certificate is issued by a trusted root authority.</span></span>  
  
- <span data-ttu-id="7ca56-208">인증서</span><span class="sxs-lookup"><span data-stu-id="7ca56-208">Certificate.</span></span> <span data-ttu-id="7ca56-209">SSL 핸드셰이크 중에 WCF는 원격 끝점이 id에 지정 된 정확한 인증서 값을 제공 하는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-209">During the SSL handshake, WCF ensures that the remote endpoint provides the exact certificate value specified in the identity.</span></span>  
  
- <span data-ttu-id="7ca56-210">인증서 참조.</span><span class="sxs-lookup"><span data-stu-id="7ca56-210">Certificate Reference.</span></span> <span data-ttu-id="7ca56-211">인증서와 동일합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-211">Same as Certificate.</span></span>  
  
- <span data-ttu-id="7ca56-212">RSA.</span><span class="sxs-lookup"><span data-stu-id="7ca56-212">RSA.</span></span> <span data-ttu-id="7ca56-213">WCF는 SSL 핸드셰이크 중에 원격 끝점이 id에 지정 된 정확한 RSA 키를 제공 하는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-213">During the SSL handshake, WCF ensures that the remote endpoint provides the exact RSA key specified in the identity.</span></span>  
  
 <span data-ttu-id="7ca56-214">서비스가 인증을 목적으로 Windows 자격 증명을 통해 메시지 또는 전송 수준 SSL을 사용하여 인증하고 자격 증명을 협상하는 경우 다음 ID 값이 유효합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-214">If the service authenticates using message- or transport-level SSL with a Windows credential for authentication, and negotiates the credential, the following identity values are valid:</span></span>  
  
- <span data-ttu-id="7ca56-215">DNS.</span><span class="sxs-lookup"><span data-stu-id="7ca56-215">DNS.</span></span> <span data-ttu-id="7ca56-216">협상은 DNS 이름을 검사할 수 있도록 서비스의 SPN을 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-216">The negotiation passes the service's SPN so that the DNS name can be checked.</span></span> <span data-ttu-id="7ca56-217">SPN은 `host/<dns name>` 형식입니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-217">The SPN is in the form `host/<dns name>`.</span></span>  
  
- <span data-ttu-id="7ca56-218">SPN.</span><span class="sxs-lookup"><span data-stu-id="7ca56-218">SPN.</span></span> <span data-ttu-id="7ca56-219">`host/myservice`와 같은 명시적 서비스 SPN이 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-219">An explicit service SPN is returned, for example, `host/myservice`.</span></span>  
  
- <span data-ttu-id="7ca56-220">UPN.</span><span class="sxs-lookup"><span data-stu-id="7ca56-220">UPN.</span></span> <span data-ttu-id="7ca56-221">서비스 계정의 UPN입니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-221">The UPN of the service account.</span></span> <span data-ttu-id="7ca56-222">UPN은 형식 `username` @ `domain` 입니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-222">The UPN is in the form `username`@`domain`.</span></span> <span data-ttu-id="7ca56-223">예를 들어, 서비스가 사용자 계정으로 실행 중인 경우 `username@contoso.com`일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-223">For example, when the service is running in a user account, it may be `username@contoso.com`.</span></span>  
  
 <span data-ttu-id="7ca56-224"><xref:System.ServiceModel.EndpointAddress.Identity%2A> 속성을 사용하여 ID를 프로그램 방식으로 지정하는 작업은 선택 사항입니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-224">Specifying the identity programmatically (using the <xref:System.ServiceModel.EndpointAddress.Identity%2A> property) is optional.</span></span> <span data-ttu-id="7ca56-225">ID를 지정하지 않고 클라이언트 자격 증명 형식이 Windows인 경우 기본값은 "host/" 리터럴이 접두사로 붙은 서비스 엔드포인트 주소의 호스트 이름 부분으로 값이 설정된 SPN입니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-225">If no identity is specified, and the client credential type is Windows, the default is SPN with the value set to the hostname part of the service endpoint address prefixed with the "host/" literal.</span></span> <span data-ttu-id="7ca56-226">ID를 지정하지 않고 클라이언트 자격 증명 형식이 Certificate인 경우 기본값은 `Certificate`입니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-226">If no identity is specified, and the client credential type is a certificate, the default is `Certificate`.</span></span> <span data-ttu-id="7ca56-227">이 값은 메시지 수준 및 전송 수준 보안 모두에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-227">This applies to both message- and transport-level security.</span></span>  
  
## <a name="identity-and-custom-bindings"></a><span data-ttu-id="7ca56-228">ID 및 사용자 지정 바인딩</span><span class="sxs-lookup"><span data-stu-id="7ca56-228">Identity and Custom Bindings</span></span>  

 <span data-ttu-id="7ca56-229">서비스 ID는 사용하는 바인딩 형식에 따라 달라지기 때문에 사용자 지정 바인딩을 만들 때 적절한 ID가 노출되는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-229">Because the identity of a service depends on the binding type used, ensure that an appropriate identity is exposed when creating a custom binding.</span></span> <span data-ttu-id="7ca56-230">예를 들어, 다음 코드 예제에서 보안 대화 부트스트랩 바인딩의 ID가 엔드포인트의 바인딩 ID와 일치하지 않기 때문에 노출된 ID는 보안 형식과 호환되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-230">For example, in the following code example, the identity exposed is not compatible with the security type, because the identity for the secure conversation bootstrap binding does not match the identity for the binding on the endpoint.</span></span> <span data-ttu-id="7ca56-231">보안 대화 바인딩은 DNS ID를 설정하는 반면 <xref:System.ServiceModel.Channels.WindowsStreamSecurityBindingElement>는 UPN 또는 SPN ID를 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="7ca56-231">The secure conversation binding sets the DNS identity, while the <xref:System.ServiceModel.Channels.WindowsStreamSecurityBindingElement> sets the UPN or SPN identity.</span></span>  
  
 [!code-csharp[C_Identity#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_identity/cs/source.cs#8)]
 [!code-vb[C_Identity#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_identity/vb/source.vb#8)]  
  
 <span data-ttu-id="7ca56-232">사용자 지정 바인딩에 대해 바인딩 요소를 올바르게 스택 하는 방법에 대 한 자세한 내용은 [User-Defined 바인딩 만들기](../extending/creating-user-defined-bindings.md)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="7ca56-232">For more information about how to stack binding elements correctly for a custom binding, see [Creating User-Defined Bindings](../extending/creating-user-defined-bindings.md).</span></span> <span data-ttu-id="7ca56-233">를 사용 하 여 사용자 지정 바인딩을 만드는 방법에 대 한 자세한 내용은 <xref:System.ServiceModel.Channels.SecurityBindingElement> [방법: 지정 된 인증 모드에 대 한 SecurityBindingElement 만들기](how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="7ca56-233">For more information about creating a custom binding with the <xref:System.ServiceModel.Channels.SecurityBindingElement>, see [How to: Create a SecurityBindingElement for a Specified Authentication Mode](how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7ca56-234">참고 항목</span><span class="sxs-lookup"><span data-stu-id="7ca56-234">See also</span></span>

- [<span data-ttu-id="7ca56-235">방법: SecurityBindingElement를 사용하여 사용자 지정 바인딩 만들기</span><span class="sxs-lookup"><span data-stu-id="7ca56-235">How to: Create a Custom Binding Using the SecurityBindingElement</span></span>](how-to-create-a-custom-binding-using-the-securitybindingelement.md)
- [<span data-ttu-id="7ca56-236">방법: 지정된 인증 모드에 대한 SecurityBindingElement 만들기</span><span class="sxs-lookup"><span data-stu-id="7ca56-236">How to: Create a SecurityBindingElement for a Specified Authentication Mode</span></span>](how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)
- [<span data-ttu-id="7ca56-237">방법: 사용자 지정 클라이언트 ID 검증 도구 만들기</span><span class="sxs-lookup"><span data-stu-id="7ca56-237">How to: Create a Custom Client Identity Verifier</span></span>](../extending/how-to-create-a-custom-client-identity-verifier.md)
- [<span data-ttu-id="7ca56-238">자격 증명 형식 선택</span><span class="sxs-lookup"><span data-stu-id="7ca56-238">Selecting a Credential Type</span></span>](selecting-a-credential-type.md)
- [<span data-ttu-id="7ca56-239">인증서 사용</span><span class="sxs-lookup"><span data-stu-id="7ca56-239">Working with Certificates</span></span>](working-with-certificates.md)
- [<span data-ttu-id="7ca56-240">ServiceModel Metadata 유틸리티 도구(Svcutil.exe)</span><span class="sxs-lookup"><span data-stu-id="7ca56-240">ServiceModel Metadata Utility Tool (Svcutil.exe)</span></span>](../servicemodel-metadata-utility-tool-svcutil-exe.md)
- [<span data-ttu-id="7ca56-241">사용자 정의 바인딩 만들기</span><span class="sxs-lookup"><span data-stu-id="7ca56-241">Creating User-Defined Bindings</span></span>](../extending/creating-user-defined-bindings.md)
- [<span data-ttu-id="7ca56-242">방법: 인증서 지문 검색</span><span class="sxs-lookup"><span data-stu-id="7ca56-242">How to: Retrieve the Thumbprint of a Certificate</span></span>](how-to-retrieve-the-thumbprint-of-a-certificate.md)
