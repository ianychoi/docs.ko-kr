---
description: '자세한 정보: 라우팅 시나리오'
title: 라우팅 시나리오
ms.date: 03/30/2017
helpviewer_keywords:
- routing [WCF], scenarios
ms.assetid: ec22f308-665a-413e-9f94-7267cb665dab
ms.openlocfilehash: cce69ca846f5179d78b2e7321e62444fc6f6ec26
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99733283"
---
# <a name="routing-scenarios"></a><span data-ttu-id="61d5f-103">라우팅 시나리오</span><span class="sxs-lookup"><span data-stu-id="61d5f-103">Routing Scenarios</span></span>

<span data-ttu-id="61d5f-104">라우팅 서비스는 폭넓은 사용자 지정이 가능하지만 새 구성을 처음부터 만드는 경우 효율적인 라우팅 논리를 디자인하기란 어려운 일입니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-104">While the Routing Service is highly customizable, it can be a challenge to design efficient routing logic when creating a new configuration from scratch.</span></span>  <span data-ttu-id="61d5f-105">다만 대부분의 라우팅 서비스 구성에 해당되는 몇 가지 일반적인 시나리오는 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-105">However, there are several common scenarios that most Routing Service configurations follow.</span></span> <span data-ttu-id="61d5f-106">이러한 시나리오가 사용자의 특정 구성에 바로 적용되지는 않겠지만 이러한 시나리오를 처리하도록 라우팅 서비스를 구성하는 방법을 이해하면 라우팅 서비스를 더 잘 이해할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-106">While these scenarios may not apply directly to your specific configuration, understanding how the Routing Service can be configured to handle these scenarios will aid you in understanding the Routing Service.</span></span>  
  
## <a name="common-scenarios"></a><span data-ttu-id="61d5f-107">일반적인 시나리오</span><span class="sxs-lookup"><span data-stu-id="61d5f-107">Common Scenarios</span></span>  

 <span data-ttu-id="61d5f-108">라우팅 서비스의 가장 기본적인 용도는 여러 대상 엔드포인트를 집계하여 클라이언트 애플리케이션에 노출되는 엔드포인트의 수를 줄인 다음 메시지 필터를 사용하여 각 메시지를 올바른 대상으로 라우트하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-108">The most basic use of the Routing Service is to aggregate multiple destination endpoints to reduce the number of endpoints exposed to the client applications, and then use message filters to route each message to the correct destination.</span></span> <span data-ttu-id="61d5f-109">메시지는 특정 서비스에서 처리해야 하는 메시지 형식과 같은 논리적 또는 물리적 처리 요구 사항이나 특정 소스의 메시지 처리에 우선 순위를 제공하는 것과 같은 임의의 비즈니스 요구 사항에 따라 라우트될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-109">Messages may be routed based on logical or physical processing requirements, such as a message type that must be processed by a specific service, or based on arbitrary business needs such as providing priority processing of messages from a specific source.</span></span> <span data-ttu-id="61d5f-110">다음 표에서는 몇 가지 일반적인 시나리오 및 이러한 시나리오가 발생하는 경우를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-110">The following table lists some of the common scenarios and when they are encountered:</span></span>  
  
|<span data-ttu-id="61d5f-111">시나리오</span><span class="sxs-lookup"><span data-stu-id="61d5f-111">Scenario</span></span>|<span data-ttu-id="61d5f-112">적용 가능한 상황</span><span class="sxs-lookup"><span data-stu-id="61d5f-112">Use when</span></span>|  
|--------------|--------------|  
|<span data-ttu-id="61d5f-113">서비스 버전 관리</span><span class="sxs-lookup"><span data-stu-id="61d5f-113">Service versioning</span></span>|<span data-ttu-id="61d5f-114">서비스의 여러 버전을 지원해야 하거나 앞으로 업데이트된 서비스를 배포할 가능성이 있는 경우</span><span class="sxs-lookup"><span data-stu-id="61d5f-114">You need to support multiple versions of a service or may deploy an updated service in the future</span></span>|  
|<span data-ttu-id="61d5f-115">서비스 데이터 분할</span><span class="sxs-lookup"><span data-stu-id="61d5f-115">Service data partitioning</span></span>|<span data-ttu-id="61d5f-116">여러 호스트로 서비스를 분할해야 하는 경우</span><span class="sxs-lookup"><span data-stu-id="61d5f-116">You must partition a service across multiple hosts</span></span>|  
|<span data-ttu-id="61d5f-117">동적 업데이트</span><span class="sxs-lookup"><span data-stu-id="61d5f-117">Dynamic update</span></span>|<span data-ttu-id="61d5f-118">변화하는 서비스 배포를 처리하기 위해 런타임에 라우팅 논리를 동적으로 다시 구성해야 하는 경우</span><span class="sxs-lookup"><span data-stu-id="61d5f-118">You must dynamically reconfigure routing logic at runtime to handle changing service deployments</span></span>|  
|<span data-ttu-id="61d5f-119">멀티캐스트</span><span class="sxs-lookup"><span data-stu-id="61d5f-119">Multicast</span></span>|<span data-ttu-id="61d5f-120">하나의 메시지를 여러 엔드포인트로 보내야 하는 경우</span><span class="sxs-lookup"><span data-stu-id="61d5f-120">You must send one message to multiple endpoints</span></span>|  
|<span data-ttu-id="61d5f-121">프로토콜 브리징</span><span class="sxs-lookup"><span data-stu-id="61d5f-121">Protocol bridging</span></span>|<span data-ttu-id="61d5f-122">하나의 전송 프로토콜을 통해 메시지를 받는데, 대상 엔드포인트가 이와 다른 프로토콜을 사용하는 경우</span><span class="sxs-lookup"><span data-stu-id="61d5f-122">You receive messages over one transport protocol, and the destination endpoint uses a different protocol</span></span>|  
|<span data-ttu-id="61d5f-123">오류 처리</span><span class="sxs-lookup"><span data-stu-id="61d5f-123">Error Handling</span></span>|<span data-ttu-id="61d5f-124">네트워크 장애 및 통신 오류에 대비한 복구 기능을 제공해야 하는 경우</span><span class="sxs-lookup"><span data-stu-id="61d5f-124">You need to provide resilience to network outages and communication failures</span></span>|  
  
> [!NOTE]
> <span data-ttu-id="61d5f-125">여기에 제시된 시나리오의 다수는 특정 비즈니스 요구나 처리 요구 사항에 해당되지만 동적 업데이트를 지원하도록 계획하고 오류 처리를 활용하는 것은 많은 경우 최선의 방법으로 간주됩니다. 이를 통해 런타임에 라우팅 논리를 수정하여 일시적인 네트워크 및 통신 오류에서 복구할 수 있기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-125">While many of the scenarios presented are specific to certain business needs or processing requirements, planning to support dynamic updates and utilizing error handling can often be considered as best practices as they allow you to modify routing logic at runtime and recover from transient network and communication failures.</span></span>  
  
### <a name="service-versioning"></a><span data-ttu-id="61d5f-126">서비스 버전 관리</span><span class="sxs-lookup"><span data-stu-id="61d5f-126">Service Versioning</span></span>  

 <span data-ttu-id="61d5f-127">서비스의 새 버전을 도입할 때는 많은 경우 모든 클라이언트가 새 서비스로 전환할 때까지 이전 버전을 유지 관리해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-127">When introducing a new version of a service, you must often maintain the previous version until all clients have transitioned to the new service.</span></span> <span data-ttu-id="61d5f-128">이는 서비스가 완료되기까지 며칠, 몇 주 또는 몇 개월이 걸리는 장기 실행 프로세스인 경우 특히 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-128">This is especially critical if the service is a long-running process that takes days, weeks, or even months to complete.</span></span> <span data-ttu-id="61d5f-129">일반적으로 이를 위해서는 이전 버전에 대한 원래 엔드포인트를 유지하면서 새 서비스에 대한 새 엔드포인트 주소를 구현해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-129">Usually this requires implementing a new endpoint address for the new service while maintaining the original endpoint for the previous version.</span></span>  
  
 <span data-ttu-id="61d5f-130">라우팅 서비스를 사용하면 클라이언트 애플리케이션에서 메시지를 받도록 하나의 엔드포인트를 노출한 다음 메시지 내용에 따라 각 메시지를 올바른 서비스 버전으로 라우트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-130">By using the Routing Service, you can expose one endpoint to receive messages from client applications and then route each message to the correct service version based on the message content.</span></span> <span data-ttu-id="61d5f-131">가장 기본적인 구현은 메시지를 처리할 서비스의 버전을 나타내는 사용자 지정 헤더를 메시지에 추가하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-131">The most basic implementation involves adding a custom header to the message that indicates the version of the service that the message is to be processed by.</span></span> <span data-ttu-id="61d5f-132">라우팅 서비스는 XPathMessageFilter를 사용하여 각 메시지에 사용자 지정 헤더가 있는지 여부를 검사하고 적절한 대상 엔드포인트로 메시지를 라우트합니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-132">The Routing Service can use the XPathMessageFilter to inspect each message for the presence of the custom header and route the message to the appropriate destination endpoint.</span></span>  
  
 <span data-ttu-id="61d5f-133">서비스 버전 관리 구성을 만드는 데 사용 되는 단계는 [방법: 서비스 버전 관리](how-to-service-versioning.md)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="61d5f-133">For the steps used to create a service versioning configuration, see [How To: Service Versioning](how-to-service-versioning.md).</span></span>
  
### <a name="service-data-partitioning"></a><span data-ttu-id="61d5f-134">서비스 데이터 분할</span><span class="sxs-lookup"><span data-stu-id="61d5f-134">Service Data Partitioning</span></span>  

 <span data-ttu-id="61d5f-135">분산 환경을 디자인하는 경우 고가용성을 제공하고 개별 컴퓨터의 처리 로드를 줄이거나 특정 메시지 하위 집합에 전용 리소스를 제공하려면 처리 로드를 여러 컴퓨터로 분산하는 것이 바람직합니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-135">When designing a distributed environment, it is often desirable to spread processing load across multiple computers in order to provide high availability, decrease processing load on individual computers, or to provide dedicated resources for a specific subset of messages.</span></span> <span data-ttu-id="61d5f-136">라우팅 서비스는 전용 부하 분산 솔루션을 대신할 수는 없지만 내용 기반 라우팅 기능을 사용하면 내용 외에는 서로 비슷한 메시지를 특정 대상으로 라우트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-136">While the Routing Service does not replace a dedicated load balancing solution, its ability to perform content based routing can be used to route otherwise similar messages to specific destinations.</span></span> <span data-ttu-id="61d5f-137">예를 들어 요구 사항에 따라 특정 클라이언트로부터 받은 메시지를 다른 클라이언트로부터 받은 메시지와 별개로 처리해야 하는 경우가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-137">For example, you may have a requirement to process messages from a specific client separately from messages received from other clients.</span></span>  
  
 <span data-ttu-id="61d5f-138">서비스 데이터 분할 구성을 만드는 데 사용 되는 단계는 [방법: 서비스 데이터 분할](how-to-service-data-partitioning.md)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="61d5f-138">For the steps used to create a service data partitioning configuration, see [How To: Service Data Partitioning](how-to-service-data-partitioning.md).</span></span>  
  
### <a name="dynamic-routing"></a><span data-ttu-id="61d5f-139">동적 라우팅</span><span class="sxs-lookup"><span data-stu-id="61d5f-139">Dynamic Routing</span></span>  

 <span data-ttu-id="61d5f-140">변화하는 비즈니스 요구를 충족하기 위해 더 새 버전의 서비스에 대한 경로를 추가하거나 라우팅 조건을 변경하거나 필터가 특정 메시지를 라우트하는 대상 엔드포인트를 변경하는 등 라우팅 구성을 수정해야 하는 경우가 많습니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-140">Often it is desirable to modify the routing configuration to satisfy changing business needs, such as adding a route to a newer version of a service, changing routing criteria, or changing the destination endpoint a specific message that the filter routes to.</span></span> <span data-ttu-id="61d5f-141">라우팅 서비스를 사용하면 런타임 중에 새 RoutingConfiguration을 제공할 수 있도록 하는 <xref:System.ServiceModel.Routing.RoutingExtension>을 통해 이를 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-141">The Routing Service allows you to do this through the <xref:System.ServiceModel.Routing.RoutingExtension>, which allows you to provide a new RoutingConfiguration during run time.</span></span> <span data-ttu-id="61d5f-142">새 구성은 즉시 적용되지만 라우팅 서비스에서 처리하는 새 세션에만 영향을 미칩니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-142">The new configuration takes effect immediately, but only affects any new sessions processed by the Routing Service.</span></span>  
  
 <span data-ttu-id="61d5f-143">동적 라우팅을 구현 하는 데 사용 되는 단계는 [방법: 동적 업데이트](how-to-dynamic-update.md)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="61d5f-143">For the steps used to implement dynamic routing, see [How To: Dynamic Update](how-to-dynamic-update.md).</span></span>
  
### <a name="multicast"></a><span data-ttu-id="61d5f-144">멀티캐스트</span><span class="sxs-lookup"><span data-stu-id="61d5f-144">Multicast</span></span>  

 <span data-ttu-id="61d5f-145">메시지를 라우트할 때는 일반적으로 각 메시지를 하나의 특정 대상 엔드포인트로 라우트합니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-145">When routing messages, usually you routing each message to one specific destination endpoint.</span></span>  <span data-ttu-id="61d5f-146">그러나 하나의 메시지 복사본을 여러 대상 엔드포인트로 라우트해야 하는 경우도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-146">However, you may occasionally need to route a copy of the message to multiple destination endpoints.</span></span> <span data-ttu-id="61d5f-147">멀티캐스트 라우팅을 수행하려면 다음 조건이 충족되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-147">To perform multicast routing, the following conditions must be true:</span></span>  
  
- <span data-ttu-id="61d5f-148">요청-회신에서는 클라이언트 애플리케이션이 요청에 대한 응답으로 하나의 회신만 수신할 수 있으므로 채널 셰이프가 요청-회신이면 안 됩니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-148">The channel shape must not be request-reply (though it may be one-way or duplex,) because request-reply mandates that only one reply can be received by the client application in response to the request.</span></span>  
  
- <span data-ttu-id="61d5f-149">메시지를 평가할 때 여러 필터에서 **true** 를 반환 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-149">Multiple filters must return **true** when evaluating the message.</span></span>  
  
 <span data-ttu-id="61d5f-150">이러한 조건이 충족되면 true를 반환하는 필터에 연결된 각 대상 엔드포인트가 메시지 복사본을 받게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-150">If these conditions are met, each destination endpoint that is associated with a filter that returns true will receive a copy of the message.</span></span>  
  
### <a name="protocol-bridging"></a><span data-ttu-id="61d5f-151">프로토콜 브리징</span><span class="sxs-lookup"><span data-stu-id="61d5f-151">Protocol Bridging</span></span>  

 <span data-ttu-id="61d5f-152">서로 다른 SOAP 프로토콜 사이에서 메시지를 라우트하는 경우 라우팅 서비스는 WCF API를 사용하여 메시지의 프로토콜을 다른 프로토콜로 변환합니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-152">When routing messages between dissimilar SOAP protocols, the Routing Service uses WCF APIs to convert the message from one protocol to the other.</span></span> <span data-ttu-id="61d5f-153">이 동작은 라우팅 서비스에 의해 노출되는 서비스 엔드포인트가 메시지가 라우트되는 클라이언트 엔드포인트와 다른 프로토콜을 사용하는 경우 자동으로 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-153">This occurs automatically when the service endpoint(s) exposed by the Routing Service use a different protocol than the client endpoint(s) that messages are routed to.</span></span> <span data-ttu-id="61d5f-154">사용되는 프로토콜이 표준이 아닌 경우 이 동작을 비활성화할 수 있지만 그러면 사용자가 직접 브리징 코드를 제공해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-154">It is possible to disable this behavior if the protocols in use are not standard; however, you must then provide your own bridging code.</span></span>
  
### <a name="error-handling"></a><span data-ttu-id="61d5f-155">오류 처리</span><span class="sxs-lookup"><span data-stu-id="61d5f-155">Error Handling</span></span>  

 <span data-ttu-id="61d5f-156">분산 환경에서는 일시적인 네트워크 또는 통신 오류가 종종 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-156">In a distributed environment, it is not uncommon to encounter transient network or communication failures.</span></span> <span data-ttu-id="61d5f-157">라우팅 서비스와 같은 매개 서비스가 없는 경우 이러한 오류를 처리하는 데 따르는 부담은 클라이언트 애플리케이션의 몫입니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-157">Without an intermediary service such as the Routing Service, the burden of handling such failures falls on the client application.</span></span> <span data-ttu-id="61d5f-158">클라이언트 애플리케이션에 네트워크 또는 통신 오류가 발생할 경우 재시도를 수행하기 위한 특정 논리 및 대체 위치에 대한 정보가 포함되지 않은 경우 사용자는 메시지가 대상 서비스에 의해 성공적으로 처리될 때까지 여러 차례 메시지를 전송해야 하는 시나리오에 직면할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-158">If the client application does not include specific logic to retry in the event of network or communication failures and knowledge of alternate locations, the user may encounter scenarios where a message must be submitted multiple times before it is successfully processed by the destination service.</span></span> <span data-ttu-id="61d5f-159">이 경우 애플리케이션이 불안정한 것으로 인식되어 고객 불만족으로 이어질 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-159">This can lead to customer dissatisfaction with the application, as it may be perceived as unreliable.</span></span>  
  
 <span data-ttu-id="61d5f-160">라우팅 서비스는 네트워크 또는 통신 관련 오류에 직면한 메시지를 위한 견고한 오류 처리 기능을 제공하여 이 시나리오의 해결을 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-160">The Routing Service attempts to remedy this scenario by providing robust error handling capabilities for messages that encounter network or communication-related failures.</span></span> <span data-ttu-id="61d5f-161">가능한 대상 엔드포인트 목록을 만들고 이 목록을 각 메시지 필터와 연결하면 가능한 대상이 하나밖에 없는 경우 발생하는 단일 장애 지점을 제거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-161">By creating a list of possible destination endpoints and associating this list with each message filter, you remove the single point of failure incurred by having only one possible destination.</span></span> <span data-ttu-id="61d5f-162">오류가 발생하는 경우 라우팅 서비스는 메시지가 배달되거나 통신 이외의 오류가 발생하거나 모든 엔드포인트가 소진될 때까지 목록의 다음 엔드포인트로 메시지 배달을 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="61d5f-162">In the event of a failure, the Routing Service will attempt to deliver the message to the next endpoint in the list until the message has been delivered, a non-communication failure occurs, or all endpoints have been exhausted.</span></span>  
  
 <span data-ttu-id="61d5f-163">오류 처리를 구성 하는 데 사용 되는 단계는 [방법: 오류 처리](how-to-error-handling.md)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="61d5f-163">For the steps used to configure error handling, see [How To: Error Handling](how-to-error-handling.md).</span></span>
  
### <a name="in-this-section"></a><span data-ttu-id="61d5f-164">섹션 내용</span><span class="sxs-lookup"><span data-stu-id="61d5f-164">In This Section</span></span>  

 [<span data-ttu-id="61d5f-165">방법: 서비스 버전 관리</span><span class="sxs-lookup"><span data-stu-id="61d5f-165">How To: Service Versioning</span></span>](how-to-service-versioning.md)  
  
 [<span data-ttu-id="61d5f-166">방법: 서비스 데이터 분할</span><span class="sxs-lookup"><span data-stu-id="61d5f-166">How To: Service Data Partitioning</span></span>](how-to-service-data-partitioning.md)  
  
 [<span data-ttu-id="61d5f-167">방법: 동적 업데이트</span><span class="sxs-lookup"><span data-stu-id="61d5f-167">How To: Dynamic Update</span></span>](how-to-dynamic-update.md)  
  
 [<span data-ttu-id="61d5f-168">방법: 오류 처리</span><span class="sxs-lookup"><span data-stu-id="61d5f-168">How To: Error Handling</span></span>](how-to-error-handling.md)  
  
## <a name="see-also"></a><span data-ttu-id="61d5f-169">참고 항목</span><span class="sxs-lookup"><span data-stu-id="61d5f-169">See also</span></span>

- [<span data-ttu-id="61d5f-170">라우팅 소개</span><span class="sxs-lookup"><span data-stu-id="61d5f-170">Routing Introduction</span></span>](routing-introduction.md)
