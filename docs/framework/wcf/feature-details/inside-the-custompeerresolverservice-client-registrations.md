---
title: 'CustomPeerResolverService 내: 클라이언트 등록'
ms.date: 03/30/2017
ms.assetid: 40236953-a916-4236-84a6-928859e1331a
ms.openlocfilehash: a905e5d1e467f32575eb38451d66392be25a0759
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/26/2020
ms.locfileid: "96265884"
---
# <a name="inside-the-custompeerresolverservice-client-registrations"></a><span data-ttu-id="6cde1-102">CustomPeerResolverService 내: 클라이언트 등록</span><span class="sxs-lookup"><span data-stu-id="6cde1-102">Inside the CustomPeerResolverService: Client Registrations</span></span>

<span data-ttu-id="6cde1-103">메시의 각 노드는 `Register` 함수를 통해 해당 엔드포인트 정보를 확인자 서비스에 게시합니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-103">Each node in the mesh publishes its endpoint information to the resolver service through the `Register` function.</span></span> <span data-ttu-id="6cde1-104">확인자 서비스는 이 정보를 등록 레코드로 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-104">The resolver service stores this information as a registration record.</span></span> <span data-ttu-id="6cde1-105">이 레코드에는 노드의 고유 식별자(RegistrationID) 및 엔드포인트 정보(PeerNodeAddress)가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-105">This record contains a unique identifier (RegistrationID) and endpoint information (PeerNodeAddress) for the node.</span></span>  
  
## <a name="stale-records-and-expiration-time"></a><span data-ttu-id="6cde1-106">잘못된 레코드 및 만료 시간</span><span class="sxs-lookup"><span data-stu-id="6cde1-106">Stale Records and Expiration Time</span></span>  

 <span data-ttu-id="6cde1-107">노드가 메시를 벗어날 때 `Unregister` 함수를 호출하여 등록 엔트리가 확인자 서비스에 의해 제거되는 것이 이상적이지만</span><span class="sxs-lookup"><span data-stu-id="6cde1-107">Ideally, when a node leaves the mesh, it will call the `Unregister` function, which causes the resolver service to remove the registration entry.</span></span> <span data-ttu-id="6cde1-108">`Unregister`를 호출하기 전에 노드가 종료되거나 액세스 불가능한 상태가 되어 잘못된 등록 레코드가 발생하는 경우도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-108">Sometimes, nodes shut down or become inaccessible before calling `Unregister`, leaving behind a stale registration record.</span></span>  
  
 <span data-ttu-id="6cde1-109">확인자 서비스의 잘못된 레코드로 인해 연결에 실패할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-109">Stale records in your resolver service can cause failed connections.</span></span> <span data-ttu-id="6cde1-110">메시에 연결하려는 노드가 확인자 서비스로부터 잘못된 연결 정보를 받으면 메시에 참가하는 데 시간이 더 오래 걸릴 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-110">If a node trying to connect to a mesh receives stale connection information from the resolver service, it can take longer to successfully join the mesh.</span></span> <span data-ttu-id="6cde1-111">잘못된 레코드는 메모리도 많이 차지합니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-111">Stale records also take up memory.</span></span> <span data-ttu-id="6cde1-112">효율적인 정리 프로세스를 수행하지 않으면 등록 항목을 저장하는 데 사용되는 캐시가 언젠가는 오버플로되어 확인자 서비스에서 충돌을 발생시킬 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-112">Without an efficient clean up process, the cache used to store registrations could eventually overflow and crash the resolver service.</span></span>  
  
 <span data-ttu-id="6cde1-113"><xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService>는 각 레코드를 만료 시간(DateTime)으로 표시하고 이 정보를 레코드의 일부로 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-113">The <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> marks each record with an expiration time (DateTime), and stores that information as part of the record.</span></span> <span data-ttu-id="6cde1-114">이 서비스는 만료 시간을 사용하여 잘못된 레코드를 식별합니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-114">The service uses the expiration time to identify stale records.</span></span> <span data-ttu-id="6cde1-115">사용자 지정 구현도 이와 유사하게 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-115">Custom implementations should do something similar.</span></span>  
  
## <a name="refreshinterval-and-cleanupinterval"></a><span data-ttu-id="6cde1-116">RefreshInterval 및 CleanupInterval</span><span class="sxs-lookup"><span data-stu-id="6cde1-116">RefreshInterval and CleanupInterval</span></span>  

 <span data-ttu-id="6cde1-117">`RefreshInterval`의 <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> 속성은 서비스의 등록 조회 테이블에 등록 레코드가 유효한 상태로 남아 있는 시간을 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-117">The `RefreshInterval` property of the <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> defines how long registration records remain valid in the service's registration lookup table.</span></span> <span data-ttu-id="6cde1-118">지정된 레코드에 대해 이 속성에 제공된 시간이 지나면 해당 레코드가 잘못된 상태가 되며 삭제되도록 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-118">When the amount of time supplied to this property has passed for a given record, that record becomes stale and is marked for deletion.</span></span>  
  
 <span data-ttu-id="6cde1-119">`CleanupInterval`의 <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> 속성은 잘못된 등록 레코드를 검색하여 삭제하는 빈도를 서비스에 알려 줍니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-119">The `CleanupInterval` property of the <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> tells the service how often to search for and delete stale registration records.</span></span> <span data-ttu-id="6cde1-120">`CleanupInterval`은 서비스에 설정된 `RefreshInterval`보다 크거나 같은 시간으로 설정되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-120">The `CleanupInterval` should be set to a time greater than or equal to the `RefreshInterval` set on the service.</span></span>  
  
 <span data-ttu-id="6cde1-121">사용자의 확인자 서비스를 구현하려면 유지 관리 함수를 작성하여 잘못된 등록 레코드를 제거해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-121">To implement your own resolver service, you need to write a maintenance function to remove stale registration records.</span></span> <span data-ttu-id="6cde1-122">다음과 같은 여러 가지 방법으로 이 작업을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-122">There are several ways to do this:</span></span>  
  
- <span data-ttu-id="6cde1-123">**정기적 유지 관리**: 타이머를 주기적으로 해제 하 고 데이터 저장소를 통해 오래 된 레코드를 삭제 하도록 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-123">**Periodic maintenance**: Set a timer to go off periodically, and go through your data store to delete old records.</span></span> <span data-ttu-id="6cde1-124"><xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService>는 이 접근 방식을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-124">The <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> uses this approach.</span></span>  
  
- <span data-ttu-id="6cde1-125">**수동 삭제**: 정기적으로 오래 된 레코드를 적극적으로 검색 하는 대신 서비스가 이미 다른 기능을 수행 하 고 있을 때 오래 된 레코드를 식별 하 고 삭제할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-125">**Passive deletion**: Instead of actively searching for stale records at regular intervals, you can identify and delete stale records when your service is already performing another function.</span></span> <span data-ttu-id="6cde1-126">이렇게 하면 확인자 클라이언트가 보낸 요청에 대한 응답 시간이 지연될 수 있지만 타이머를 사용하지 않아도 되므로 `Unregister`를 호출하지 않고 벗어날 것으로 예상되는 노드가 적을 경우 보다 효율적일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-126">This may potentially slow down response time to requests from the resolver clients, but it eliminates the need for a timer, and may be more efficient if few nodes are expected to leave without calling `Unregister`.</span></span>  
  
## <a name="registrationlifetime-and-refresh"></a><span data-ttu-id="6cde1-127">RegistrationLifetime 및 Refresh</span><span class="sxs-lookup"><span data-stu-id="6cde1-127">RegistrationLifetime and Refresh</span></span>  

 <span data-ttu-id="6cde1-128">확인자 서비스에 노드가 등록되면 서비스로부터 <xref:System.ServiceModel.PeerResolvers.RegisterResponseInfo> 개체를 받게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-128">When a node registers with a resolver service, it receives a <xref:System.ServiceModel.PeerResolvers.RegisterResponseInfo> object from the service.</span></span> <span data-ttu-id="6cde1-129">이 개체에는 등록이 만료되어 확인자 서비스에 의해 제거되기 전까지 남은 시간을 노드에 알려 주는 `RegistrationLifetime` 속성이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-129">This object has a `RegistrationLifetime` property which indicates to the node how much time it has before the registration expires and is removed by the resolver service.</span></span> <span data-ttu-id="6cde1-130">예를 들어, `RegistrationLifetime`이 2분인 경우 노드에서 2분 안에 `Refresh`를 호출해야 레코드가 최신 상태로 유지되어 삭제되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-130">If, for example, the `RegistrationLifetime` is 2 minutes, the node needs to call `Refresh` in under 2 minutes to ensure the record stays fresh and is not deleted.</span></span> <span data-ttu-id="6cde1-131">`Refresh` 요청을 받을 경우 확인자 서비스는 레코드를 조회하여 만료 시간을 다시 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-131">When the resolver service receives a `Refresh` request, it looks up the record and resets the expiration time.</span></span> <span data-ttu-id="6cde1-132">Refresh는 <xref:System.ServiceModel.PeerResolvers.RefreshResponseInfo> 속성이 지정된 `RegistrationLifetime` 개체를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="6cde1-132">Refresh returns a <xref:System.ServiceModel.PeerResolvers.RefreshResponseInfo> object with a `RegistrationLifetime` property.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6cde1-133">참고 항목</span><span class="sxs-lookup"><span data-stu-id="6cde1-133">See also</span></span>

- [<span data-ttu-id="6cde1-134">피어 확인자</span><span class="sxs-lookup"><span data-stu-id="6cde1-134">Peer Resolvers</span></span>](peer-resolvers.md)
