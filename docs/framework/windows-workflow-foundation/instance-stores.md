---
title: 인스턴스 저장소
ms.date: 03/30/2017
ms.assetid: f2629668-0923-4987-b943-67477131c1e0
ms.openlocfilehash: 0e3cc0c6c635d9c42b4242581ce039b186116113
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/26/2020
ms.locfileid: "96279872"
---
# <a name="instance-stores"></a><span data-ttu-id="437c9-102">인스턴스 저장소</span><span class="sxs-lookup"><span data-stu-id="437c9-102">Instance Stores</span></span>

<span data-ttu-id="437c9-103">인스턴스 저장소는 인스턴스의 논리적 컨테이너입니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-103">An instance store is a logical container of instances.</span></span> <span data-ttu-id="437c9-104">이 저장소는 인스턴스 데이터와 메타데이터가 저장되는 장소입니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-104">It is the place where the instance data and metadata is stored.</span></span> <span data-ttu-id="437c9-105">인스턴스 스토리지가 전용 물리적 스토리지를 의미하지는 않습니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-105">An instance store does not imply dedicated physical storage.</span></span> <span data-ttu-id="437c9-106">인스턴스 저장소는 지속적인 정보를 SQL Server 데이터베이스에 포함시키거나 지속적이 아닌 정보를 메모리에 포함시킬 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-106">An instance store could contain durable information in a SQL Server database or non-durable state information in a memory.</span></span> <span data-ttu-id="437c9-107">[!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)]는 워크플로에서 인스턴스 데이터 및 메타데이터를 SQL Server 2005 또는 SQL Server 2008 데이터베이스에 유지할 수 있는 인스턴스 저장소의 구체적인 구현인 SQL 워크플로 인스턴스 저장소와 함께 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-107">The [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] ships with the SQL Workflow Instance Store, which is a concrete implementation of an instance store that allows workflows to persist instance data and metadata into a SQL Server 2005 or SQL Server 2008 database.</span></span> <span data-ttu-id="437c9-108">또한 Windows Server AppFabric은 인스턴스 저장소의 구체적인 구현을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-108">In addition Windows Server App Fabric also provides a concrete implementation of an instance store.</span></span> <span data-ttu-id="437c9-109">자세한 내용은 [Windows Server App Fabric 인스턴스 저장소, 쿼리 및 제어 공급자](/previous-versions/appfabric/ff383417(v=azure.10))를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="437c9-109">For more information, see [Windows Server App Fabric Instance Store, Query, and Control Providers](/previous-versions/appfabric/ff383417(v=azure.10)).</span></span>  
  
 <span data-ttu-id="437c9-110">지속성 API는 호스트에서 인스턴스 저장소로 명령 요청(예: <xref:System.Activities.DurableInstancing.LoadWorkflowCommand> 및 <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>)을 보낼 수 있는 호스트와 인스턴스 저장소 간의 인터페이스입니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-110">The persistence API is the interface between a host and an instance store that allows the host to send command requests (for example, <xref:System.Activities.DurableInstancing.LoadWorkflowCommand> and <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>) to the instance store.</span></span> <span data-ttu-id="437c9-111">이 API의 구체적인 구현을 지속성 공급자라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-111">The concrete implementation of this API is called a persistence provider.</span></span> <span data-ttu-id="437c9-112">지속성 공급자는 호스트에서 요청을 받고 인스턴스 저장소를 수정합니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-112">The persistence provider receives requests from a host and modifies the instance store.</span></span>  
  
 <span data-ttu-id="437c9-113">많은 인스턴스 저장소와 함께 호스트를 사용할 수 있고 많은 호스트와 함께 인스턴스 저장소를 사용할 수 있도록 호스트와 인스턴스 저장소는 플러그형입니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-113">Hosts and instance stores are pluggable so that a host can be used with many instance stores, and an instance store can be used with many hosts.</span></span> <span data-ttu-id="437c9-114">인스턴스 저장소와 호스트는 독립적인 수명 주기에서 진화할 수 있지만, 일반적으로 인스턴스 저장소는 특정 호스트의 사용 패턴에 맞게 최적화됩니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-114">An instance store is typically optimized for the usage patterns of a particular host, although the instance store and host may evolve on independent life cycles.</span></span> <span data-ttu-id="437c9-115">예를 들어 **WorkflowServiceHost** 및 **SqlWorkflowInstanceStore** 는 함께 잘 작동 하도록 설계 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-115">For example, the **WorkflowServiceHost** and the **SqlWorkflowInstanceStore** are designed to work well together.</span></span> <span data-ttu-id="437c9-116">사용자 고유의 인스턴스 저장소를 만들어 워크플로 서비스 인스턴스의 데이터 및 메타 데이터를 유지 하 고 해당 인스턴스 저장소를 **WorkflowServiceHost** 와 함께 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-116">You can create your own instance store to persist data and metadata of workflow service instances and use that instance store with the **WorkflowServiceHost**.</span></span> <span data-ttu-id="437c9-117">예를 들어 워크플로에서 SQL Server 데이터베이스에 정보를 저장하는 대신 Oracle 데이터베이스에 유지할 수 있는 OracleWorkflowInstanceStore를 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-117">For example, you can create an OracleWorkflowInstanceStore that lets workflows persist information into an Oracle database instead of saving them into a SQL Server database.</span></span>  
  
 <span data-ttu-id="437c9-118">일반적으로 유지되는 개체를 수정하는 추가 기능을 통해 호스트가 확장됩니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-118">It is common for hosts to be extended with additional functionality that modifies the persisted objects.</span></span> <span data-ttu-id="437c9-119">예를 들어 인스턴스 지 속성 시스템에는 워크플로 호스트, "일시 중단" 작업을 지 원하는 확장 및 SQL 인스턴스 저장소가 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-119">For example, an instance persistence system may have a workflow host, an extension that supports the "Suspend" operation, and an SQL instance store.</span></span>  <span data-ttu-id="437c9-120">워크플로 호스트는 저장 또는 로드와 같은 표준 명령을 보내 인스턴스 저장소에서 워크플로를 저장 또는 로드하거나 워크플로를 인스턴스 저장소에 저장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-120">The workflow host might send a standard command such as Save or Load to save or load a workflow from an instance store or to save a workflow into an instance store.</span></span> <span data-ttu-id="437c9-121">일시 중단 확장은 일시 중단된 워크플로 인스턴스를 로드할 수 없도록 워크플로 인스턴스를 저장하고 로드하는 명령에 추가 의미 체계를 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-121">The suspend extension might add additional semantics to the commands for saving and loading workflow instances so that a suspended workflow instance cannot be loaded.</span></span> <span data-ttu-id="437c9-122">SQL 인스턴스 저장소의 지속성 공급자는 워크플로 인스턴스를 저장하고 로드하기 위한 명령을 이해하고, SQL Server 데이터베이스에서 영구 개체 테이블을 변경하는 해당 저장 프로시저를 호출하여 명령을 구현합니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-122">The persistence provider for the SQL instance store understands the commands for saving and loading workflow instances, and implements the commands by calling appropriate stored procedures that change the tables of persistent objects in an SQL Server database.</span></span>  
  
 <span data-ttu-id="437c9-123">호스트는 인스턴스 저장소 내에서 저장소 소유자 역할을 합니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-123">A host acts as an instance owner within an instance store.</span></span> <span data-ttu-id="437c9-124">호스트는 동시에 두 개 이상의 인스턴스 저장소가 있는 둘 이상의 인스턴스 소유자 역할을 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-124">A host may act as more than one instance owner with more than one instance store at the same time.</span></span> <span data-ttu-id="437c9-125">호스트는 인스턴스와 연결된 인스턴스 키에 GUID를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-125">The host provides GUIDs for instance keys associated with the instances.</span></span> <span data-ttu-id="437c9-126">인스턴스 키는 인스턴스를 식별하는 고유한 별칭입니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-126">An instance key is a unique alias that identifies an instance.</span></span> <span data-ttu-id="437c9-127">지속성 시스템은 호스트에서 요청한 명령을 실행할 때 인스턴스 소유자 정보를 작성, 업데이트 및 삭제합니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-127">The persistence system creates, updates, and deletes instance owner information as it executes commands requested by hosts.</span></span>  
  
 <span data-ttu-id="437c9-128">다음 목록에는 호스트와 인스턴스 저장소의 상호 작용에 관련된 중요 단계가 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-128">The following list contains the important steps involved in the host’s interaction with the instance store:</span></span>  
  
1. <span data-ttu-id="437c9-129">지 속성 공급자에서 **InstanceStore** 를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-129">Obtain an **InstanceStore** from a persistence provider.</span></span>  

2. <span data-ttu-id="437c9-130"><xref:System.Runtime.DurableInstancing.InstanceStore.CreateInstanceHandle%2A> **InstanceStore** 에서 메서드를 호출 하 여 인스턴스에 대 한 핸들을 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-130">Obtain the handle to an instance by calling the <xref:System.Runtime.DurableInstancing.InstanceStore.CreateInstanceHandle%2A> method on the **InstanceStore**.</span></span>  
  
3. <span data-ttu-id="437c9-131"><xref:System.Runtime.DurableInstancing.InstanceStore.Execute%2A> **InstanceStore** 에서 메서드를 호출 하 여 인스턴스 핸들에 대해 명령을 호출 합니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-131">Invoke commands against the instance handle by calling the <xref:System.Runtime.DurableInstancing.InstanceStore.Execute%2A> method on the **InstanceStore**.</span></span>  
  
4. <span data-ttu-id="437c9-132"><xref:System.Runtime.DurableInstancing.InstanceView> **InstanceStore.Exe귀여운** 에서 반환 된를 검사 하 여 명령의 결과를 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="437c9-132">Examine the <xref:System.Runtime.DurableInstancing.InstanceView> returned by **InstanceStore.Execute** to determine the results of the commands.</span></span>
