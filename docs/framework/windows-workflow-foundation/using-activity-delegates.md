---
title: 활동 대리자 사용
ms.date: 03/30/2017
ms.assetid: e33cf876-8979-440b-9b23-4a12d1139960
ms.openlocfilehash: 66a03187336475ed377fda032506cfa66d3daf58
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/26/2020
ms.locfileid: "96293301"
---
# <a name="using-activity-delegates"></a><span data-ttu-id="4b002-102">활동 대리자 사용</span><span class="sxs-lookup"><span data-stu-id="4b002-102">Using Activity Delegates</span></span>

<span data-ttu-id="4b002-103">작업 대리자를 사용하면 활동 작성자는 활동 사용자가 활동 기반 처리기를 제공할 수 있는 특정 시그니처가 있는 콜백을 노출할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-103">Activity delegates enable activity authors to expose callbacks with specific signatures, for which users of the activity can provide activity-based handlers.</span></span> <span data-ttu-id="4b002-104">두 가지 형식의 작업 대리자를 사용할 수 있습니다. <xref:System.Activities.ActivityAction%601>은 반환 값이 없는 작업 대리자를 정의하는 데 사용되고 <xref:System.Activities.ActivityFunc%601>은 반환 값이 있는 작업 대리자를 정의하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-104">Two types of activity delegates are available: <xref:System.Activities.ActivityAction%601> is used to define activity delegates that do not have a return value, and <xref:System.Activities.ActivityFunc%601> is used to define activity delegates that do have a return value.</span></span>

<span data-ttu-id="4b002-105">작업 대리자는 자식 작업이 특정 시그니처를 가지도록 제약되어야 하는 시나리오에서 유용합니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-105">Activity delegates are useful in scenarios where a child activity must be constrained to having a certain signature.</span></span> <span data-ttu-id="4b002-106">예를 들어 <xref:System.Activities.Statements.While> 활동은 제약 조건 없이 모든 형식의 자식 활동을 포함할 수 있지만 <xref:System.Activities.Statements.ForEach%601> 활동의 본문은 <xref:System.Activities.ActivityAction%601>이며 최종적으로 <xref:System.Activities.Statements.ForEach%601>에서 실행되는 자식 활동에는 <xref:System.Activities.InArgument%601>이 열거하는 컬렉션 멤버와 동일한 형식의 <xref:System.Activities.Statements.ForEach%601>이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-106">For example, a <xref:System.Activities.Statements.While> activity can contain any type of child activity with no constraints, but the body of a <xref:System.Activities.Statements.ForEach%601> activity is an <xref:System.Activities.ActivityAction%601>, and the child activity that is ultimately executed by <xref:System.Activities.Statements.ForEach%601> must have an <xref:System.Activities.InArgument%601> that is the same type of the members of the collection that the <xref:System.Activities.Statements.ForEach%601> enumerates.</span></span>

## <a name="using-activityaction"></a><span data-ttu-id="4b002-107">ActivityAction 사용</span><span class="sxs-lookup"><span data-stu-id="4b002-107">Using ActivityAction</span></span>

<span data-ttu-id="4b002-108">[!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] 활동이나 <xref:System.Activities.Statements.Catch> 활동 같은 여러 가지 <xref:System.Activities.Statements.ForEach%601> 활동에 활동 동작이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-108">Several [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] activities use activity actions, such as the <xref:System.Activities.Statements.Catch> activity and the <xref:System.Activities.Statements.ForEach%601> activity.</span></span> <span data-ttu-id="4b002-109">각 경우에 활동 동작은 해당 활동 중 하나를 사용하여 워크플로를 작성할 때 필요한 동작을 제공하기 위해 워크플로 작성자가 활동을 지정하는 위치를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-109">In each case, the activity action represents a location where the workflow author specifies an activity to provide the desired behavior when composing a workflow using one of these activities.</span></span> <span data-ttu-id="4b002-110">다음 예제에서는 <xref:System.Activities.Statements.ForEach%601> 활동을 사용하여 콘솔 창에 텍스트를 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-110">In the following example, a <xref:System.Activities.Statements.ForEach%601> activity is used to display text to the console window.</span></span> <span data-ttu-id="4b002-111"><xref:System.Activities.Statements.ForEach%601>의 본문은 문자열인 <xref:System.Activities.ActivityAction%601>의 형식에 일치하는 <xref:System.Activities.Statements.ForEach%601>을 사용하여 지정됩니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-111">The body of the <xref:System.Activities.Statements.ForEach%601> is specified by using an <xref:System.Activities.ActivityAction%601> that matches the type of the <xref:System.Activities.Statements.ForEach%601> which is string.</span></span> <span data-ttu-id="4b002-112"><xref:System.Activities.Statements.WriteLine>에 지정된 <xref:System.Activities.ActivityDelegate.Handler%2A> 활동의 <xref:System.Activities.Statements.WriteLine.Text%2A> 인수는 <xref:System.Activities.Statements.ForEach%601> 활동의 반복 대상인 컬렉션의 문자열 값에 바인딩됩니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-112">The <xref:System.Activities.Statements.WriteLine> activity specified in the <xref:System.Activities.ActivityDelegate.Handler%2A> has its <xref:System.Activities.Statements.WriteLine.Text%2A> argument bound to the string values in the collection that the <xref:System.Activities.Statements.ForEach%601> activity iterates.</span></span>

[!code-csharp[CFX_ActivityExample#6](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#6)]

<span data-ttu-id="4b002-113">actionArgument는 컬렉션의 개별 항목을 WriteLine으로 이동하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-113">The actionArgument is used to flow the individual items in the collection to the WriteLine.</span></span> <span data-ttu-id="4b002-114">워크플로가 호출되면 다음 출력이 콘솔에 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-114">When the workflow is invoked, the following output is displayed to the console.</span></span>

```console
HelloWorld.
```

<span data-ttu-id="4b002-115">이 항목의 예에서는 개체 초기화 구문을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-115">The examples in this topic use object initialization syntax.</span></span> <span data-ttu-id="4b002-116">개체 초기화 구문은 워크플로에 있는 활동의 계층적 뷰를 제공하고 활동 간의 관계를 표시하기 때문에 코드에서 워크플로 정의를 만드는 유용한 방법일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-116">Object initialization syntax can be a useful way to create workflow definitions in code because it provides a hierarchical view of the activities in the workflow and shows the relationship between the activities.</span></span> <span data-ttu-id="4b002-117">프로그래밍 방식으로 워크플로를 만들 때 개체 초기화 구문을 사용하기 위한 요구 사항은 없습니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-117">There is no requirement to use object initialization syntax when you programmatically create workflows.</span></span> <span data-ttu-id="4b002-118">다음 예는 이전 예와 기능적으로 동일합니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-118">The following example is functionally equivalent to the previous example.</span></span>

[!code-csharp[CFX_ActivityExample#7](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#7)]

<span data-ttu-id="4b002-119">개체 이니셜라이저에 대 한 자세한 내용은 [방법: 생성자를 호출 하지 않고 개체 초기화 (c # 프로그래밍 가이드)](../../csharp/programming-guide/classes-and-structs/how-to-initialize-objects-by-using-an-object-initializer.md) 및 [방법: 개체 이니셜라이저를 사용 하 여 개체 선언 (Visual Basic)](../../visual-basic/programming-guide/language-features/objects-and-classes/how-to-declare-an-object-by-using-an-object-initializer.md)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="4b002-119">For more information about object initializers, see [How to: Initialize Objects without Calling a Constructor (C# Programming Guide)](../../csharp/programming-guide/classes-and-structs/how-to-initialize-objects-by-using-an-object-initializer.md) and [How to: Declare an Object by Using an Object Initializer (Visual Basic)](../../visual-basic/programming-guide/language-features/objects-and-classes/how-to-declare-an-object-by-using-an-object-initializer.md).</span></span>

<span data-ttu-id="4b002-120">다음 예제에서는 <xref:System.Activities.Statements.TryCatch> 활동이 워크플로에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-120">In the following example, a <xref:System.Activities.Statements.TryCatch> activity is used in a workflow.</span></span> <span data-ttu-id="4b002-121"><xref:System.ApplicationException>이 워크플로를 통해 throw되고 <xref:System.Activities.Statements.Catch%601> 활동을 통해 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-121">An <xref:System.ApplicationException> is thrown by the workflow, and is handled by a <xref:System.Activities.Statements.Catch%601> activity.</span></span> <span data-ttu-id="4b002-122">활동의 작업 동작에 대 한 처리기는 <xref:System.Activities.Statements.Catch%601> <xref:System.Activities.Statements.WriteLine> 활동 이며 예외 세부 정보는를 사용 하 여 전달 됩니다 `ex` <xref:System.Activities.DelegateInArgument%601> .</span><span class="sxs-lookup"><span data-stu-id="4b002-122">The handler for the <xref:System.Activities.Statements.Catch%601> activity's activity action is a <xref:System.Activities.Statements.WriteLine> activity, and the exception detail is flowed through to it using the `ex` <xref:System.Activities.DelegateInArgument%601>.</span></span>

[!code-csharp[CFX_WorkflowApplicationExample#33](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#33)]

<span data-ttu-id="4b002-123"><xref:System.Activities.ActivityAction%601>을 정의하는 사용자 지정 활동을 만들 때는 <xref:System.Activities.Statements.InvokeAction%601>을 사용하여 해당 <xref:System.Activities.ActivityAction%601>의 호출을 모델링합니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-123">When creating a custom activity that defines an <xref:System.Activities.ActivityAction%601>, use an <xref:System.Activities.Statements.InvokeAction%601> to model the invocation of that <xref:System.Activities.ActivityAction%601>.</span></span> <span data-ttu-id="4b002-124">이 예제에서는 사용자 지정 `WriteLineWithNotification` 활동을 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-124">In this example, a custom `WriteLineWithNotification` activity is defined.</span></span> <span data-ttu-id="4b002-125">이 활동은 <xref:System.Activities.Statements.Sequence> 활동과, 문자열 인수 하나를 사용하는 <xref:System.Activities.Statements.WriteLine>을 호출하는 <xref:System.Activities.Statements.InvokeAction%601>을 차례로 포함하는 <xref:System.Activities.ActivityAction%601>로 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-125">This activity is composed of a <xref:System.Activities.Statements.Sequence> that contains a <xref:System.Activities.Statements.WriteLine> activity followed by an <xref:System.Activities.Statements.InvokeAction%601> that invokes an <xref:System.Activities.ActivityAction%601> that takes one string argument.</span></span>

[!code-csharp[CFX_ActivityExample#1](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#1)]

<span data-ttu-id="4b002-126">`WriteLineWithNotification` 활동을 사용하여 워크플로를 만드는 경우 워크플로 작성자는 필요한 사용자 지정 논리를 활동 동작의 <xref:System.Activities.ActivityDelegate.Handler%2A>에 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-126">When a workflow is created by using the `WriteLineWithNotification` activity, the workflow author specifies the desired custom logic in the activity action’s <xref:System.Activities.ActivityDelegate.Handler%2A>.</span></span> <span data-ttu-id="4b002-127">이 예제에서는 `WriteLineWithNotification` 활동을 사용하는 워크플로를 만들고 <xref:System.Activities.Statements.WriteLine> 활동을 <xref:System.Activities.ActivityDelegate.Handler%2A>로 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-127">In this example, a workflow is created that use the `WriteLineWithNotification` activity, and a <xref:System.Activities.Statements.WriteLine> activity is used as the <xref:System.Activities.ActivityDelegate.Handler%2A>.</span></span>

[!code-csharp[CFX_ActivityExample#2](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#2)]

<span data-ttu-id="4b002-128">하나 이상의 인수를 전달하기 위해 제공된 일반 버전의 여러 <xref:System.Activities.Statements.InvokeAction%601> 및 <xref:System.Activities.ActivityAction%601>이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-128">There are multiple generic versions of <xref:System.Activities.Statements.InvokeAction%601> and <xref:System.Activities.ActivityAction%601> provided for passing one or more arguments.</span></span>

## <a name="using-activityfunc"></a><span data-ttu-id="4b002-129">ActivityFunc 사용</span><span class="sxs-lookup"><span data-stu-id="4b002-129">Using ActivityFunc</span></span>

<span data-ttu-id="4b002-130"><xref:System.Activities.ActivityAction%601>은 활동의 결과 값이 없는 경우에 유용하고, 결과 값이 반환되는 경우에는 <xref:System.Activities.ActivityFunc%601>이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-130"><xref:System.Activities.ActivityAction%601> is useful when there is no result value from the activity, and <xref:System.Activities.ActivityFunc%601> is used when a result value is returned.</span></span> <span data-ttu-id="4b002-131"><xref:System.Activities.ActivityFunc%601>을 정의하는 사용자 지정 활동을 만들 때는 <xref:System.Activities.Expressions.InvokeFunc%601>을 사용하여 해당 <xref:System.Activities.ActivityFunc%601>의 호출을 모델링합니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-131">When creating a custom activity that defines an <xref:System.Activities.ActivityFunc%601>, use an <xref:System.Activities.Expressions.InvokeFunc%601> to model the invocation of that <xref:System.Activities.ActivityFunc%601>.</span></span> <span data-ttu-id="4b002-132">다음 예제에서는 `WriteFillerText` 활동을 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-132">In the following example, a `WriteFillerText` activity is defined.</span></span> <span data-ttu-id="4b002-133">필터 텍스트를 제공하기 위해 정수 인수를 사용하고 문자열 결과를 반환하는 <xref:System.Activities.Expressions.InvokeFunc%601>을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-133">To supply the filler text, an <xref:System.Activities.Expressions.InvokeFunc%601> is specified that takes an integer argument and has a string result.</span></span> <span data-ttu-id="4b002-134">필터 텍스트가 검색되면 <xref:System.Activities.Statements.WriteLine> 활동을 사용하여 해당 텍스트가 콘솔에 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-134">Once the filler text is retrieved, it is displayed to the console using a <xref:System.Activities.Statements.WriteLine> activity.</span></span>

[!code-csharp[CFX_ActivityExample#3](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#3)]

<span data-ttu-id="4b002-135">텍스트를 제공하기 위해 `int` 인수 하나를 사용하고 문자열 결과가 있는 활동을 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-135">To supply the text, an activity must be used that takes one `int` argument and has a string result.</span></span> <span data-ttu-id="4b002-136">이 예제에서는 이 요구 사항과 일치하는 `TextGenerator` 활동을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-136">This example shows a `TextGenerator` activity that meets these requirements.</span></span>

[!code-csharp[CFX_ActivityExample#4](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#4)]

<span data-ttu-id="4b002-137">`TextGenerator` 활동을 `WriteFillerText` 활동과 함께 사용하려면 이 활동을 <xref:System.Activities.ActivityDelegate.Handler%2A>로 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="4b002-137">To use the `TextGenerator` activity with the `WriteFillerText` activity, specify it as the <xref:System.Activities.ActivityDelegate.Handler%2A>.</span></span>

[!code-csharp[CFX_ActivityExample#5](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#5)]
