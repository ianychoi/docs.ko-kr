---
description: '자세한 정보: 이진 데이터 작업 (WCF Data Services)'
title: 이진 데이터 작업(WCF Data Services)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, binary data
- WCF Data Services, streams
ms.assetid: aeccc45c-d5c5-4671-ad63-a492ac8043ac
ms.openlocfilehash: dfcc5f03376d2f84267d8648acf55fb1aa96e318
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99748104"
---
# <a name="working-with-binary-data-wcf-data-services"></a><span data-ttu-id="449f2-103">이진 데이터 작업(WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="449f2-103">Working with Binary Data (WCF Data Services)</span></span>

[!INCLUDE [wcf-deprecated](~/includes/wcf-deprecated.md)]

<span data-ttu-id="449f2-104">WCF Data Services 클라이언트 라이브러리를 사용 하면 다음 방법 중 하나를 사용 하 여 OData (Open Data Protocol) 피드에서 이진 데이터를 검색 하 고 업데이트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-104">The WCF Data Services client library enables you to retrieve and update binary data from an Open Data Protocol (OData) feed in one of the following ways:</span></span>

- <span data-ttu-id="449f2-105">엔터티의 기본 형식 속성으로.</span><span class="sxs-lookup"><span data-stu-id="449f2-105">As a primitive type property of an entity.</span></span> <span data-ttu-id="449f2-106">이 방법은 메모리에 쉽게 로드할 수 있는 작은 이진 데이터 개체로 작업하는 경우 권장됩니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-106">This is the recommended method for working with small binary data objects that can be easily loaded into memory.</span></span> <span data-ttu-id="449f2-107">이 경우 이진 속성은 데이터 모델에서 노출하는 엔터티 속성이며, 데이터 서비스는 이진 데이터를 응답 메시지에서 base-64 이진 인코딩 XML로 serialize합니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-107">In this case, the binary property is an entity property exposed by the data model, and the data service serializes the binary data as base-64 binary encoded XML in the response message.</span></span>

- <span data-ttu-id="449f2-108">별도의 이진 리소스 스트림으로.</span><span class="sxs-lookup"><span data-stu-id="449f2-108">As a separate binary resource stream.</span></span> <span data-ttu-id="449f2-109">이 방법은 사진, 비디오 또는 다른 형식의 이진 인코딩 데이터를 나타낼 수 있는 BLOB(Binary Large Object) 데이터에 액세스하고 변경하는 경우 권장됩니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-109">This is the recommended method for accessing and changing binary large object (BLOB) data that may represent a photo, video, or any other type of binary encoded data.</span></span>

<span data-ttu-id="449f2-110">WCF Data Services는 OData에 정의 된 대로 HTTP를 사용 하 여 이진 데이터의 스트리밍을 구현 합니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-110">WCF Data Services implements the streaming of binary data by using HTTP as defined in the OData.</span></span> <span data-ttu-id="449f2-111">이 메커니즘에서 이진 데이터는 미디어 링크 항목이라고 하는 엔터티와 관련되어 있지만 별도로 존재하는 미디어 리소스로 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-111">In this mechanism, binary data is treated as a media resource that is separate from but related to an entity, which is called a media link entry.</span></span> <span data-ttu-id="449f2-112">자세한 내용은 [스트리밍 공급자](streaming-provider-wcf-data-services.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-112">For more information, see [Streaming Provider](streaming-provider-wcf-data-services.md).</span></span>

> [!TIP]
> <span data-ttu-id="449f2-113">사진을 저장 하는 OData 서비스에서 이진 이미지 파일을 다운로드 하는 Windows Presentation Foundation (WPF) 클라이언트 응용 프로그램을 만드는 방법에 대 한 단계별 예제는 [스트리밍 공급자 Series-Part 2: 클라이언트에서 미디어 리소스 스트림에 액세스 게시물 Data Services](/archive/blogs/astoriateam/data-services-streaming-provider-series-part-2-accessing-a-media-resource-stream-from-the-client)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="449f2-113">For a step-by-step example of how to create a Windows Presentation Foundation (WPF) client application that downloads binary image files from an OData service that stores photos, see the post [Data Services Streaming Provider Series-Part 2: Accessing a Media Resource Stream from the Client](/archive/blogs/astoriateam/data-services-streaming-provider-series-part-2-accessing-a-media-resource-stream-from-the-client).</span></span> <span data-ttu-id="449f2-114">블로그 게시물에 제공 되는 stream photo data service에 대 한 샘플 코드를 다운로드 하려면 GitHub의 [스트리밍 사진 데이터 서비스 샘플](https://github.com/microsoftarchive/msdn-code-gallery-community-s-z/tree/master/Streaming%20Photo%20OData%20Service%20Sample) 을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="449f2-114">To download the sample code for the stream photo data service featured in the blog post, see the [Streaming Photo Data Service Sample](https://github.com/microsoftarchive/msdn-code-gallery-community-s-z/tree/master/Streaming%20Photo%20OData%20Service%20Sample) in GitHub.</span></span>

## <a name="entity-metadata"></a><span data-ttu-id="449f2-115">엔터티 메타데이터</span><span class="sxs-lookup"><span data-stu-id="449f2-115">Entity Metadata</span></span>

<span data-ttu-id="449f2-116">관련 미디어 리소스 스트림이 있는 엔터티는 미디어 링크 항목인 엔터티 형식에 적용된 `HasStream` 특성을 통해 데이터 서비스 메타데이터에 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-116">An entity that has a related media resource stream is indicated in the data service metadata by the `HasStream` attribute applied to an entity type that is the media link entry.</span></span> <span data-ttu-id="449f2-117">다음 예제에서 `PhotoInfo` 엔터티는 특성으로 표시 되는 관련 미디어 리소스가 있는 미디어 링크 항목입니다 `HasStream` .</span><span class="sxs-lookup"><span data-stu-id="449f2-117">In the following example, the `PhotoInfo` entity is a media link entry that has a related media resource, indicated by the `HasStream` attribute.</span></span>

[!code-xml[Astoria Photo Streaming Service#HasStream](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria_photo_streaming_service/xml/photodata.edmx#hasstream)]

<span data-ttu-id="449f2-118">이 항목의 나머지 예제에서는 미디어 리소스 스트림에 액세스하고 변경하는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-118">The remaining examples in this topic show how to access and change the media resource stream.</span></span> <span data-ttu-id="449f2-119">WCF Data Services 클라이언트 라이브러리를 사용 하 여 .NET Framework 클라이언트 응용 프로그램에서 미디어 리소스 스트림을 사용 하는 방법에 대 한 전체 예제는 [클라이언트에서 미디어 리소스 스트림에 액세스](/archive/blogs/astoriateam/data-services-streaming-provider-series-part-2-accessing-a-media-resource-stream-from-the-client)게시물을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="449f2-119">For a complete example of how to consume a media resource stream in a .NET Framework client application by using the WCF Data Services client library, see the post [Accessing a Media Resource Stream from the Client](/archive/blogs/astoriateam/data-services-streaming-provider-series-part-2-accessing-a-media-resource-stream-from-the-client).</span></span>

## <a name="accessing-the-binary-resource-stream"></a><span data-ttu-id="449f2-120">이진 리소스 스트림 액세스</span><span class="sxs-lookup"><span data-stu-id="449f2-120">Accessing the Binary Resource Stream</span></span>

<span data-ttu-id="449f2-121">WCF Data Services 클라이언트 라이브러리는 OData 기반 데이터 서비스에서 이진 리소스 스트림에 액세스 하는 메서드를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-121">The WCF Data Services client library provides methods for accessing binary resource streams from an OData-based data service.</span></span> <span data-ttu-id="449f2-122">미디어 리소스를 다운로드할 때 미디어 리소스의 URI를 사용하거나 미디어 리소스 데이터 자체가 포함된 이진 스트림을 가져올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-122">When downloading a media resource, you can either use the URI of the media resource or you can get a binary stream that contains the media resource data itself.</span></span> <span data-ttu-id="449f2-123">또한 미디어 리소스 데이터를 이진 스트림으로 업로드할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-123">You can also upload media resource data as a binary stream.</span></span>

> [!TIP]
> <span data-ttu-id="449f2-124">사진을 저장 하는 OData 서비스에서 이진 이미지 파일을 다운로드 하는 Windows Presentation Foundation (WPF) 클라이언트 응용 프로그램을 만드는 방법에 대 한 단계별 예제는 [스트리밍 공급자 Series-Part 2: 클라이언트에서 미디어 리소스 스트림에 액세스 게시물 Data Services](/archive/blogs/astoriateam/data-services-streaming-provider-series-part-2-accessing-a-media-resource-stream-from-the-client)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="449f2-124">For a step-by-step example of how to create a Windows Presentation Foundation (WPF) client application that downloads binary image files from an OData service that stores photos, see the post [Data Services Streaming Provider Series-Part 2: Accessing a Media Resource Stream from the Client](/archive/blogs/astoriateam/data-services-streaming-provider-series-part-2-accessing-a-media-resource-stream-from-the-client).</span></span> <span data-ttu-id="449f2-125">블로그 게시물에 제공 되는 stream photo data service에 대 한 샘플 코드를 다운로드 하려면 GitHub의 [스트리밍 사진 데이터 서비스 샘플](https://github.com/microsoftarchive/msdn-code-gallery-community-s-z/tree/master/Streaming%20Photo%20OData%20Service%20Sample) 을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="449f2-125">To download the sample code for the stream photo data service featured in the blog post, see the [Streaming Photo Data Service Sample](https://github.com/microsoftarchive/msdn-code-gallery-community-s-z/tree/master/Streaming%20Photo%20OData%20Service%20Sample) in GitHub.</span></span>

### <a name="getting-the-uri-of-the-binary-stream"></a><span data-ttu-id="449f2-126">이진 스트림의 URI 가져오기</span><span class="sxs-lookup"><span data-stu-id="449f2-126">Getting the URI of the Binary Stream</span></span>

<span data-ttu-id="449f2-127">이미지 및 기타 미디어 파일과 같은 특정 유형의 미디어 리소스를 검색할 때 이진 데이터 스트림 자체를 처리하는 것보다 애플리케이션에 있는 미디어 리소스의 URI를 사용하는 것이 쉬운 경우가 많습니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-127">When retrieving certain types of media resources, such as images and other media files, it is often easier to use the URI of the media resource in your application than handling the binary data stream itself.</span></span> <span data-ttu-id="449f2-128">특정 미디어 링크 항목과 연결된 리소스 스트림의 URI를 가져오려면 엔터티를 추적하는 <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> 인스턴스에서 <xref:System.Data.Services.Client.DataServiceContext> 메서드를 호출해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-128">To get the URI of a resource stream associated with a give media link entry, you must call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance that is tracking the entity.</span></span> <span data-ttu-id="449f2-129">다음 예제에서는 <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> 메서드를 호출하여 클라이언트에서 새 이미지를 만드는 데 사용되는 미디어 리소스 스트림의 URI를 가져오는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-129">The following example shows how to call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> method to get the URI of a media resource stream that is used to create a new image on the client:</span></span>

[!code-csharp[Astoria Photo Streaming Client#GetReadStreamUri](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_photo_streaming_client/cs/photowindow.xaml.cs#getreadstreamuri)]
[!code-vb[Astoria Photo Streaming Client#GetReadStreamUri](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_photo_streaming_client/vb/photowindow.xaml.vb#getreadstreamuri)]

### <a name="downloading-the-binary-resource-stream"></a><span data-ttu-id="449f2-130">이진 리소스 스트림 다운로드</span><span class="sxs-lookup"><span data-stu-id="449f2-130">Downloading the Binary Resource Stream</span></span>

<span data-ttu-id="449f2-131">이진 리소스 스트림을 검색할 때 미디어 링크 항목을 추적하는 <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> 인스턴스에서 <xref:System.Data.Services.Client.DataServiceContext> 메서드를 호출해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-131">When retrieving a binary resource stream, you must call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance that is tracking the media link entry.</span></span> <span data-ttu-id="449f2-132">이 메서드는 리소스가 포함된 스트림에 대한 참조가 있는 <xref:System.Data.Services.Client.DataServiceStreamResponse> 개체를 반환하는 데이터 서비스에 요청을 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-132">This method sends a request to the data service that returns a <xref:System.Data.Services.Client.DataServiceStreamResponse> object, which has a reference to the stream that contains the resource.</span></span> <span data-ttu-id="449f2-133">애플리케이션에 <xref:System.IO.Stream>으로 이진 리소스가 필요한 경우 이 메서드를 사용하세요.</span><span class="sxs-lookup"><span data-stu-id="449f2-133">Use this method when your application requires the binary resource as a <xref:System.IO.Stream>.</span></span> <span data-ttu-id="449f2-134">다음 예제에서는 <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> 메서드를 호출하여 클라이언트에서 새 이미지를 만드는 데 사용되는 스트림을 검색하는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-134">The following example shows how to call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> method to retrieve a stream that is used to create a new image on the client:</span></span>

[!code-csharp[Astoria Streaming Client#GetReadStreamClient](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_streaming_client/cs/customerphotowindow.xaml.cs#getreadstreamclient)]
[!code-vb[Astoria Streaming Client#GetReadStreamClient](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_streaming_client/vb/customerphotowindow.xaml.vb#getreadstreamclient)]

> [!NOTE]
> <span data-ttu-id="449f2-135">이진 스트림이 포함된 응답 메시지의 Content-Length 헤더는 데이터 서비스에서 설정되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-135">The Content-Length header in the response message that contains the binary steam is not set by the data service.</span></span> <span data-ttu-id="449f2-136">이 값은 이진 데이터 스트림의 실제 길이를 나타내지 않을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-136">This value may not reflect the actual length of the binary data stream.</span></span>

### <a name="uploading-a-media-resource-as-a-stream"></a><span data-ttu-id="449f2-137">미디어 리소스를 스트림으로 업로드</span><span class="sxs-lookup"><span data-stu-id="449f2-137">Uploading a Media Resource as a Stream</span></span>

<span data-ttu-id="449f2-138">미디어 리소스를 삽입하거나 업데이트하려면 엔터티를 추적하는 <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> 인스턴스에서 <xref:System.Data.Services.Client.DataServiceContext> 메서드를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-138">To insert or update a media resource, call the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance that is tracking the entity.</span></span> <span data-ttu-id="449f2-139">이 메서드는 제공된 스트림에서 읽은 미디어 리소스가 포함된 요청을 데이터 서비스에 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-139">This method sends a request to the data service that contains the media resource read from the supplied stream.</span></span> <span data-ttu-id="449f2-140">다음 예제에서는 <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> 메서드를 호출하여 이미지를 데이터 서비스에 보내는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-140">The following example shows how to call the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method to send an image to the data service:</span></span>

[!code-csharp[Astoria Photo Streaming Client#SetSaveStream](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_photo_streaming_client/cs/photodetailswindow.xaml.cs#setsavestream)]
[!code-vb[Astoria Photo Streaming Client#SetSaveStream](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_photo_streaming_client/vb/photodetailswindow.xaml.vb#setsavestream)]

<span data-ttu-id="449f2-141">이 예제에서 <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> 메서드는 `true` 매개 변수에 `closeStream` 값을 제공하여 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-141">In this example, the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method is called by supplying a value of `true` for the `closeStream` parameter.</span></span> <span data-ttu-id="449f2-142">이렇게 하면 이진 데이터가 데이터 서비스로 업로드된 후 <xref:System.Data.Services.Client.DataServiceContext>가 스트림을 닫습니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-142">This guarantees that the <xref:System.Data.Services.Client.DataServiceContext> closes the stream after the binary data is uploaded to the data service.</span></span>

> [!NOTE]
> <span data-ttu-id="449f2-143"><xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A>을 호출하면 <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>를 호출할 때까지 데이터 서비스로 스트림이 전송되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="449f2-143">When you call <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A>, the stream is not sent to the data service until <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> is called.</span></span>

## <a name="see-also"></a><span data-ttu-id="449f2-144">참고 항목</span><span class="sxs-lookup"><span data-stu-id="449f2-144">See also</span></span>

- [<span data-ttu-id="449f2-145">WCF Data Services 클라이언트 라이브러리</span><span class="sxs-lookup"><span data-stu-id="449f2-145">WCF Data Services Client Library</span></span>](wcf-data-services-client-library.md)
- [<span data-ttu-id="449f2-146">컨트롤에 데이터 바인딩</span><span class="sxs-lookup"><span data-stu-id="449f2-146">Binding Data to Controls</span></span>](binding-data-to-controls-wcf-data-services.md)
