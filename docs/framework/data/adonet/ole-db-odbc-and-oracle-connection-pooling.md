---
description: OLE DB, ODBC 및 Oracle 연결 풀링에 대해 자세히 알아보세요.
title: OLE DB, ODBC 및 Oracle 연결 풀링
ms.date: 03/30/2017
ms.assetid: 2bd83b1e-3ea9-43c4-bade-d9cdb9bbbb04
ms.openlocfilehash: da30d70f88c8d109d50716347e7deaacdc65991a
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99672649"
---
# <a name="ole-db-odbc-and-oracle-connection-pooling"></a><span data-ttu-id="0dce6-103">OLE DB, ODBC 및 Oracle 연결 풀링</span><span class="sxs-lookup"><span data-stu-id="0dce6-103">OLE DB, ODBC, and Oracle connection pooling</span></span>

<span data-ttu-id="0dce6-104">연결 풀링을 사용하면 애플리케이션의 성능 및 확장성을 대폭 향상시킬 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-104">Pooling connections can significantly enhance the performance and scalability of your application.</span></span> <span data-ttu-id="0dce6-105">이 섹션에서는 OLE DB, ODBC 및 Oracle의 .NET Framework 데이터 공급자에 대 한 연결 풀링을 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-105">This section discusses connection pooling for the .NET Framework data providers for OLE DB, ODBC, and Oracle.</span></span>

## <a name="oledb"></a><span data-ttu-id="0dce6-106">OleDb</span><span class="sxs-lookup"><span data-stu-id="0dce6-106">OleDb</span></span>

<span data-ttu-id="0dce6-107">.NET Framework Data Provider for OLE DB에서는 OLE DB 세션 풀링을 사용하여 자동으로 연결을 풀링합니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-107">The .NET Framework Data Provider for OLE DB automatically pools connections using OLE DB session pooling.</span></span> <span data-ttu-id="0dce6-108">연결 문자열 인수를 사용하면 풀링이 포함된 OLE DB 서비스를 활성화하거나 비활성화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-108">Connection string arguments can be used to enable or disable OLE DB services including pooling.</span></span> <span data-ttu-id="0dce6-109">예를 들어, 다음 연결 문자열은 OLE DB 세션 풀링과 자동 트랜잭션 인리스트먼트를 비활성화합니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-109">For example, the following connection string disables OLE DB session pooling and automatic transaction enlistment.</span></span>

```csharp
Provider=SQLOLEDB;OLE DB Services=-4;Data Source=localhost;Integrated Security=SSPI;
```

 <span data-ttu-id="0dce6-110">연결의 사용을 끝내면 연결이 풀로 반환되도록 항상 연결을 닫거나 삭제하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-110">We recommend that you always close or dispose of a connection when you are finished using it in order to return the connection to the pool.</span></span> <span data-ttu-id="0dce6-111">명시적으로 닫히지 않는 연결은 풀에 반환되지 않을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-111">Connections that are not explicitly closed may not get returned to the pool.</span></span> <span data-ttu-id="0dce6-112">예를 들어, 범위를 벗어났지만 명시적으로 닫히지 않은 연결은 최대 풀 크기에 도달했으며 여전히 유효한 경우에만 연결 풀로 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-112">For example, a connection that has gone out of scope but that has not been explicitly closed will only be returned to the connection pool if the maximum pool size has been reached and the connection is still valid.</span></span>

 <span data-ttu-id="0dce6-113">OLE DB 공급자 서비스 기본값을 재정의 하 여 풀링을 사용 하지 않도록 설정 하는 방법 뿐만 아니라 OLE DB 세션 또는 리소스 풀링에 대 한 자세한 내용은 [OLE DB 프로그래머 가이드](/previous-versions/windows/desktop/ms713643(v=vs.85))를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="0dce6-113">For more information about OLE DB session or resource pooling, as well as how to disable pooling by overriding OLE DB provider service defaults, see the [OLE DB Programmer's Guide](/previous-versions/windows/desktop/ms713643(v=vs.85)).</span></span>

## <a name="odbc"></a><span data-ttu-id="0dce6-114">ODBC</span><span class="sxs-lookup"><span data-stu-id="0dce6-114">ODBC</span></span>

 <span data-ttu-id="0dce6-115">.NET Framework Data Provider for ODBC의 연결 풀링은 연결에 사용되는 ODBC 드라이버 관리자에서 관리하며 .NET Framework Data Provider for ODBC에 의해 영향을 받지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-115">Connection pooling for the .NET Framework Data Provider for ODBC is managed by the ODBC Driver Manager that is used for the connection, and is not affected by the .NET Framework Data Provider for ODBC.</span></span>

 <span data-ttu-id="0dce6-116">연결 풀링을 사용 하거나 사용 하지 않도록 설정 하려면 제어판의 관리 도구 폴더에서 **ODBC 데이터 원본 관리자** 를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-116">To enable or disable connection pooling, open **ODBC Data Source Administrator** in the Administrative Tools folder of Control Panel.</span></span> <span data-ttu-id="0dce6-117">**연결 풀링** 탭에서는 설치 된 각 ODBC 드라이버에 대 한 연결 풀링 매개 변수를 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-117">The **Connection Pooling** tab allows you to specify connection pooling parameters for each ODBC driver installed.</span></span> <span data-ttu-id="0dce6-118">특정 ODBC 드라이버에 대 한 연결 풀링 변경 내용은 해당 ODBC 드라이버를 사용 하는 모든 응용 프로그램에 영향을 줍니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-118">Connection pooling changes for a specific ODBC driver affect all applications that use that ODBC driver.</span></span>

## <a name="oracleclient"></a><span data-ttu-id="0dce6-119">OracleClient</span><span class="sxs-lookup"><span data-stu-id="0dce6-119">OracleClient</span></span>

 <span data-ttu-id="0dce6-120">.NET Framework Data Provider for Oracle에서는 ADO.NET 클라이언트 애플리케이션에 대한 연결 풀링을 자동으로 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-120">The .NET Framework Data Provider for Oracle provides connection pooling automatically for your ADO.NET client application.</span></span> <span data-ttu-id="0dce6-121">또한 여러 개의 연결 풀링 한정자를 지정하여 연결 풀링 동작을 제어할 수 있습니다(이 항목 뒷부분의 "연결 문자열 키워드를 사용하여 연결 풀링 제어" 참조).</span><span class="sxs-lookup"><span data-stu-id="0dce6-121">You can also supply several connection string modifiers to control connection pooling behavior (see "Controlling Connection Pooling with Connection String Keywords," later in this topic).</span></span>

### <a name="create-and-assign-pools"></a><span data-ttu-id="0dce6-122">풀 만들기 및 할당</span><span class="sxs-lookup"><span data-stu-id="0dce6-122">Create and assign pools</span></span>

 <span data-ttu-id="0dce6-123">연결이 열리면 연결에서 풀과 연결 문자열을 연결하는 정확한 일치 알고리즘에 따라 연결 풀이 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-123">When a connection is opened, a connection pool is created based on an exact matching algorithm that associates the pool with the connection string in the connection.</span></span> <span data-ttu-id="0dce6-124">각 연결 풀은 고유한 연결 문자열과 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-124">Each connection pool is associated with a distinct connection string.</span></span> <span data-ttu-id="0dce6-125">새 연결이 열릴 때 연결 문자열이 기존 풀과 정확히 일치하지 않으면 새 풀이 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-125">When a new connection is opened, if the connection string is not an exact match to an existing pool, a new pool is created.</span></span>

 <span data-ttu-id="0dce6-126">만들어진 연결 풀은 활성 프로세스가 종료될 때까지 제거되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-126">Once created, connection pools are not destroyed until the active process ends.</span></span> <span data-ttu-id="0dce6-127">비활성 또는 빈 풀을 유지 관리하는 데에는 매우 적은 시스템 리소스만 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-127">Maintaining inactive or empty pools uses very few system resources.</span></span>

### <a name="connection-addition"></a><span data-ttu-id="0dce6-128">연결 추가</span><span class="sxs-lookup"><span data-stu-id="0dce6-128">Connection Addition</span></span>

 <span data-ttu-id="0dce6-129">각각의 고유 연결 문자열에 대해 연결 풀이 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-129">A connection pool is created for each unique connection string.</span></span> <span data-ttu-id="0dce6-130">풀이 만들어지면 최소 풀 크기 요구 사항이 충족되도록 여러 개의 연결 개체가 만들어져 풀에 추가됩니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-130">When a pool is created, multiple connection objects are created and added to the pool so that the minimum pool size requirement is satisfied.</span></span> <span data-ttu-id="0dce6-131">연결은 최대 풀 크기 이하로 필요한 만큼 풀에 추가됩니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-131">Connections are added to the pool as needed, up to the maximum pool size.</span></span>

 <span data-ttu-id="0dce6-132"><xref:System.Data.OracleClient.OracleConnection> 개체가 요청될 때 사용 가능한 연결이 있으면 풀에서 해당 개체를 가져올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-132">When an <xref:System.Data.OracleClient.OracleConnection> object is requested, it is obtained from the pool if a usable connection is available.</span></span> <span data-ttu-id="0dce6-133">연결을 사용하려면 연결이 현재 사용되고 있지 않고, 일치하는 트랜잭션 컨텍스트가 있거나 트랜잭션 컨텍스트와 연결되어 있지 않아야 하며, 서버에 대한 올바른 링크가 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-133">To be usable, the connection must currently be unused, have a matching transaction context or not be associated with any transaction context, and have a valid link to the server.</span></span>

 <span data-ttu-id="0dce6-134">최대 풀 크기에 도달했는데 사용 가능한 연결이 없으면 요청이 대기됩니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-134">If the maximum pool size has been reached and no usable connection is available, the request is queued.</span></span> <span data-ttu-id="0dce6-135">연결 풀러는 연결이 다시 풀로 회수될 때 연결을 다시 할당하여 이러한 요청을 충족합니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-135">The connection pooler satisfies these requests by reallocating connections as they are released back into the pool.</span></span> <span data-ttu-id="0dce6-136">연결이 닫히거나 삭제되면 다시 풀로 회수됩니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-136">Connections are released back into the pool when they are closed or disposed.</span></span>

### <a name="connection-removal"></a><span data-ttu-id="0dce6-137">연결 제거</span><span class="sxs-lookup"><span data-stu-id="0dce6-137">Connection Removal</span></span>

 <span data-ttu-id="0dce6-138">연결 풀러는 오랜 시간 동안 유휴 상태 였던 풀에서 연결을 제거 하거나, 서버와의 연결이 끊어졌습니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-138">The connection pooler removes a connection from the pool after it has been idle for an extended period of time or if the pooler detects that the connection with the server has been severed.</span></span> <span data-ttu-id="0dce6-139">이는 서버와의 통신을 시도한 후에만 검색할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-139">This can be detected only after attempting to communicate with the server.</span></span> <span data-ttu-id="0dce6-140">서버에 더 이상 연결되지 않는 연결이 있으면 그 연결은 잘못된 연결로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-140">If a connection is found that is no longer connected to the server, it is marked as invalid.</span></span> <span data-ttu-id="0dce6-141">연결 풀러는 정기적으로 연결 풀을 검색하여 풀로 회수되었거나 잘못된 것으로 표시된 개체를 찾습니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-141">The connection pooler periodically scans connection pools looking for objects that have been released to the pool and are marked as invalid.</span></span> <span data-ttu-id="0dce6-142">그러면 이러한 연결은 영구적으로 제거됩니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-142">These connections are then permanently removed.</span></span>

 <span data-ttu-id="0dce6-143">네트워크에 존재하지 않는 서버에 대한 연결이 있는 경우 연결 풀러에서 이 연결을 검색하지 못하고 잘못된 연결로 표시하지 못해도 풀에서 선택할 수는 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-143">If a connection exists to a server that has disappeared, this connection can be drawn from the pool if the connection pooler has not detected the severed connection and marked it as invalid.</span></span> <span data-ttu-id="0dce6-144">이 경우 예외가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-144">When this occurs, an exception is generated.</span></span> <span data-ttu-id="0dce6-145">그러나 연결을 풀로 회수하려면 계속해서 연결을 닫아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-145">However, you must still close the connection in order to release it back into the pool.</span></span>

 <span data-ttu-id="0dce6-146">클래스의 `Close` 메서드에 있는 `Dispose`, `Connection` 또는 다른 관리 개체에 `DataReader` 또는 `Finalize`를 호출해서는 안 됩니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-146">Do not call `Close` or `Dispose` on a `Connection`, a `DataReader`, or any other managed object in the `Finalize` method of your class.</span></span> <span data-ttu-id="0dce6-147">종료자에서는 클래스에 직접 속한 관리되지 않는 리소스만 해제합니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-147">In a finalizer, only release unmanaged resources that your class owns directly.</span></span> <span data-ttu-id="0dce6-148">클래스에 관리되지 않는 리소스가 없는 경우 클래스 정의에 `Finalize` 메서드를 포함하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="0dce6-148">If your class does not own any unmanaged resources, do not include a `Finalize` method in your class definition.</span></span> <span data-ttu-id="0dce6-149">자세한 내용은 [가비지 수집](../../../standard/garbage-collection/index.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="0dce6-149">For more information, see [Garbage Collection](../../../standard/garbage-collection/index.md).</span></span>

### <a name="transaction-support"></a><span data-ttu-id="0dce6-150">트랜잭션 지원</span><span class="sxs-lookup"><span data-stu-id="0dce6-150">Transaction Support</span></span>

 <span data-ttu-id="0dce6-151">연결은 트랜잭션 컨텍스트에 따라 풀에서 선택되어 할당됩니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-151">Connections are drawn from the pool and assigned based on transaction context.</span></span> <span data-ttu-id="0dce6-152">요청하는 스레드의 컨텍스트와 할당된 연결의 컨텍스트는 반드시 일치해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-152">The context of the requesting thread and the assigned connection must match.</span></span> <span data-ttu-id="0dce6-153">따라서 각 연결 풀은 연결 된 트랜잭션 컨텍스트가 없는 연결로 나뉜 다음, 각각 특정 트랜잭션 컨텍스트의 연결을 포함 하는 *N* 개의 하위 분류로 나뉩니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-153">Therefore, each connection pool is subdivided into connections with no associated transaction context and into *N* subdivisions that each contain connections with a particular transaction context.</span></span>

 <span data-ttu-id="0dce6-154">연결이 닫힐 때는 풀로 다시 회수되고 트랜잭션 컨텍스트에 따라 적절한 분할로 회수됩니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-154">When a connection is closed, it is released back into the pool and into the appropriate subdivision based on its transaction context.</span></span> <span data-ttu-id="0dce6-155">따라서 분산 트랜잭션이 여전히 보류 중이더라도 오류를 생성하지 않고 연결을 닫을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-155">Therefore, you can close the connection without generating an error, even though a distributed transaction is still pending.</span></span> <span data-ttu-id="0dce6-156">이렇게 하여 분산 트랜잭션을 나중에 커밋하거나 취소할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-156">This allows you to commit or abort the distributed transaction at a later time.</span></span>

### <a name="control-connection-pooling-with-connection-string-keywords"></a><span data-ttu-id="0dce6-157">연결 문자열 키워드를 사용 하 여 연결 풀링 제어</span><span class="sxs-lookup"><span data-stu-id="0dce6-157">Control Connection Pooling with Connection String Keywords</span></span>

 <span data-ttu-id="0dce6-158"><xref:System.Data.OracleClient.OracleConnection.ConnectionString%2A> 개체의 <xref:System.Data.OracleClient.OracleConnection> 속성에서는 연결 문자열 키/값 쌍을 사용하여 연결 풀링 논리의 동작을 조정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-158">The <xref:System.Data.OracleClient.OracleConnection.ConnectionString%2A> property of the <xref:System.Data.OracleClient.OracleConnection> object supports connection string key/value pairs that can be used to adjust the behavior of the connection pooling logic.</span></span>

 <span data-ttu-id="0dce6-159">다음 표에서는 연결 풀링 동작을 조정하는 데 사용할 수 있는 <xref:System.Data.OracleClient.OracleConnection.ConnectionString%2A> 값을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-159">The following table describes the <xref:System.Data.OracleClient.OracleConnection.ConnectionString%2A> values you can use to adjust connection pooling behavior.</span></span>

|<span data-ttu-id="0dce6-160">속성</span><span class="sxs-lookup"><span data-stu-id="0dce6-160">Name</span></span>|<span data-ttu-id="0dce6-161">기본값</span><span class="sxs-lookup"><span data-stu-id="0dce6-161">Default</span></span>|<span data-ttu-id="0dce6-162">설명</span><span class="sxs-lookup"><span data-stu-id="0dce6-162">Description</span></span>|
|----------|-------------|-----------------|
|`Connection Lifetime`|<span data-ttu-id="0dce6-163">0</span><span class="sxs-lookup"><span data-stu-id="0dce6-163">0</span></span>|<span data-ttu-id="0dce6-164">연결이 풀로 반환되면 연결을 만든 시간을 현재 시간과 비교하여 이 시간 간격(초)이 `Connection Lifetime`에서 지정한 값을 초과하는 경우 연결이 제거됩니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-164">When a connection is returned to the pool, its creation time is compared with the current time, and the connection is destroyed if that time span (in seconds) exceeds the value specified by `Connection Lifetime`.</span></span> <span data-ttu-id="0dce6-165">이는 클러스터링된 구성에서 실행 중인 서버와 방금 온라인 상태가 된 서버 사이에 로드 균형 조정을 강제로 조정하는 데 유용합니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-165">This is useful in clustered configurations to force load balancing between a running server and a server just brought online.</span></span><br /><br /> <span data-ttu-id="0dce6-166">값 0은 풀링된 연결이 최대 시간 제한을 갖도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-166">A value of zero (0) will cause pooled connections to have the maximum time-out.</span></span>|
|`Enlist`|<span data-ttu-id="0dce6-167">'true'</span><span class="sxs-lookup"><span data-stu-id="0dce6-167">'true'</span></span>|<span data-ttu-id="0dce6-168">`true`이면 풀러는 트랜잭션 컨텍스트가 존재하는 경우 해당 연결을 만들기 스레드의 현재 트랜잭션 컨텍스트에 자동으로 인리스트먼트합니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-168">When `true`, the pooler automatically enlists the connection in the current transaction context of the creation thread if a transaction context exists.</span></span>|
|`Max Pool Size`|<span data-ttu-id="0dce6-169">100</span><span class="sxs-lookup"><span data-stu-id="0dce6-169">100</span></span>|<span data-ttu-id="0dce6-170">풀에서 허용 되는 최대 연결 수입니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-170">The maximum number of connections allowed in the pool.</span></span>|
|`Min Pool Size`|<span data-ttu-id="0dce6-171">0</span><span class="sxs-lookup"><span data-stu-id="0dce6-171">0</span></span>|<span data-ttu-id="0dce6-172">풀에서 유지되는 최소 연결 수입니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-172">The minimum number of connections maintained in the pool.</span></span>|
|`Pooling`|<span data-ttu-id="0dce6-173">'true'</span><span class="sxs-lookup"><span data-stu-id="0dce6-173">'true'</span></span>|<span data-ttu-id="0dce6-174">`true`이면 연결이 적절한 풀에서 선택되거나 필요한 경우 연결이 만들어져 적절한 풀에 추가됩니다.</span><span class="sxs-lookup"><span data-stu-id="0dce6-174">When `true`, the connection is drawn from the appropriate pool, or if necessary, created and added to the appropriate pool.</span></span>|

## <a name="see-also"></a><span data-ttu-id="0dce6-175">참고 항목</span><span class="sxs-lookup"><span data-stu-id="0dce6-175">See also</span></span>

- [<span data-ttu-id="0dce6-176">연결 풀링</span><span class="sxs-lookup"><span data-stu-id="0dce6-176">Connection Pooling</span></span>](connection-pooling.md)
- [<span data-ttu-id="0dce6-177">성능 카운터</span><span class="sxs-lookup"><span data-stu-id="0dce6-177">Performance Counters</span></span>](performance-counters.md)
- [<span data-ttu-id="0dce6-178">ADO.NET 개요</span><span class="sxs-lookup"><span data-stu-id="0dce6-178">ADO.NET Overview</span></span>](ado-net-overview.md)
