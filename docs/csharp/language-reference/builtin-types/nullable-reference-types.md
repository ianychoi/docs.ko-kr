---
title: nullable 참조 형식 - C# 참조
description: C# nullable 참조 형식 및 사용 방법 알아보기
ms.date: 04/06/2020
ms.openlocfilehash: d961af9ba3b4776e6b4ec3eeea5392fb0d0394ce
ms.sourcegitcommit: 965a5af7918acb0a3fd3baf342e15d511ef75188
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/18/2020
ms.locfileid: "94822427"
---
# <a name="nullable-reference-types-c-reference"></a><span data-ttu-id="32b6e-103">nullable 참조 형식(C# 참조)</span><span class="sxs-lookup"><span data-stu-id="32b6e-103">Nullable reference types (C# reference)</span></span>

> [!NOTE]
> <span data-ttu-id="32b6e-104">이 문서에서는 nullable 참조 형식을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-104">This article covers nullable reference types.</span></span> <span data-ttu-id="32b6e-105">[nullable 값 형식](nullable-value-types.md)을 선언할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-105">You can also declare [nullable value types](nullable-value-types.md).</span></span>

<span data-ttu-id="32b6e-106">nullable 참조 형식은 ‘nullable 인식 컨텍스트’에 옵트인된 코드에서 C# 8.0부터 사용할 수 있습니다. </span><span class="sxs-lookup"><span data-stu-id="32b6e-106">Nullable reference types are available beginning with C# 8.0, in code that has opted in to a *nullable aware context*.</span></span> <span data-ttu-id="32b6e-107">nullable 참조 형식, null 정적 분석 경고 및 [null 허용 연산자](../operators/null-forgiving.md)는 선택적 언어 기능입니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-107">Nullable reference types, the null static analysis warnings, and the [null-forgiving operator](../operators/null-forgiving.md) are optional language features.</span></span> <span data-ttu-id="32b6e-108">모두 기본적으로 꺼져 있습니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-108">All are turned off by default.</span></span> <span data-ttu-id="32b6e-109">‘nullable 컨텍스트’는 빌드 설정을 사용하여 프로젝트 수준에서 제어되거나 pragma를 사용하여 빌드 설정에서 제어됩니다. </span><span class="sxs-lookup"><span data-stu-id="32b6e-109">A *nullable context* is controlled at the project level using build settings, or in code using pragmas.</span></span>

 <span data-ttu-id="32b6e-110">nullable 인식 컨텍스트에서:</span><span class="sxs-lookup"><span data-stu-id="32b6e-110">In a nullable aware context:</span></span>

- <span data-ttu-id="32b6e-111">참조 형식 `T`의 변수는 null이 아닌 값으로 초기화되어야 하며, `null`일 수 있는 값이 할당되지 않을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-111">A variable of a reference type `T` must be initialized with non-null, and may never be assigned a value that may be `null`.</span></span>
- <span data-ttu-id="32b6e-112">참조 형식 `T?`의 변수는 `null`로 초기화되거나 `null`이 할당될 수 있지만, 역참조하기 전에 `null`에 대해 확인되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-112">A variable of a reference type `T?` may be initialized with `null` or assigned `null`, but is required to be checked against `null` before de-referencing.</span></span>
- <span data-ttu-id="32b6e-113">`m!`의 경우와 같이 null 허용 연산자를 적용하면 `T?` 형식의 `m` 변수는 null이 아닌 것으로 간주합니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-113">A variable `m` of type `T?` is considered to be non-null when you apply the null-forgiving operator, as in `m!`.</span></span>

<span data-ttu-id="32b6e-114">null을 허용하지 않는 참조 형식과 `T` nullable 참조 형식 `T?` 간 차이점은 컴파일러의 이전 규칙 해석에 따라 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-114">The distinctions between a non-nullable reference type `T` and a nullable reference type `T?` are enforced by the compiler's interpretation of the preceding rules.</span></span> <span data-ttu-id="32b6e-115">`T` 형식의 변수 및 `T?` 형식의 변수는 동일한 .NET 형식으로 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-115">A variable of type `T` and a variable of type `T?` are represented by the same .NET type.</span></span> <span data-ttu-id="32b6e-116">다음 예제에서는 null을 허용하지 않는 문자열 및 nullable 문자열을 선언하고 null 허용 연산자를 사용하여 null을 허용하지 않는 문자열에 값을 할당합니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-116">The following example declares a non-nullable string and a nullable string, and then uses the null-forgiving operator to assign a value to a non-nullable string:</span></span>

:::code language="csharp" source="snippets/shared/NullableReferenceTypes.cs" id="SnippetCoreSyntax":::

<span data-ttu-id="32b6e-117">`notNull` 및 `nullable` 변수는 둘 다 <xref:System.String> 형식으로 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-117">The variables `notNull` and `nullable` are both represented by the <xref:System.String> type.</span></span> <span data-ttu-id="32b6e-118">null을 허용하지 않는 형식 및 nullable 형식은 둘 다 같은 형식으로 저장되므로 nullable 참조 형식을 사용할 수 있는 여러 위치가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-118">Because the non-nullable and nullable types are both stored as the same type, there are several locations where using a nullable reference type isn't allowed.</span></span> <span data-ttu-id="32b6e-119">일반적으로 nullable 참조 형식은 기본 클래스 또는 구현된 인터페이스로 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-119">In general, a nullable reference type can't be used as a base class or implemented interface.</span></span> <span data-ttu-id="32b6e-120">nullable 참조 형식은 개체 생성 또는 형식 테스트 식에 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-120">A nullable reference type can't be used in any object creation or type testing expression.</span></span> <span data-ttu-id="32b6e-121">nullable 참조 형식은 멤버 액세스 식의 형식일 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-121">A nullable reference type can't be the type of a member access expression.</span></span> <span data-ttu-id="32b6e-122">다음 예제에서는 다음 구문을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-122">The following examples show these constructs:</span></span>

```csharp
public MyClass : System.Object? // not allowed
{
}

var nullEmpty = System.String?.Empty; // Not allowed
var maybeObject = new object?(); // Not allowed
try
{
    if (thing is string? nullableString) // not allowed
        Console.WriteLine(nullableString);
} catch (Exception? e) // Not Allowed
{
    Console.WriteLine("error");
}
```

## <a name="nullable-references-and-static-analysis"></a><span data-ttu-id="32b6e-123">nullable 참조 및 정적 분석</span><span class="sxs-lookup"><span data-stu-id="32b6e-123">Nullable references and static analysis</span></span>

<span data-ttu-id="32b6e-124">이전 섹션의 예제에서는 nullable 참조 형식의 특성을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-124">The examples in the previous section illustrate the nature of nullable reference types.</span></span> <span data-ttu-id="32b6e-125">nullable 참조 형식은 새 클래스 형식이 아니라 기존 참조 형식의 주석입니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-125">Nullable reference types aren't new class types, but rather annotations on existing reference types.</span></span> <span data-ttu-id="32b6e-126">컴파일러는 해당 주석을 사용하여 코드에서 잠재적 null 참조 오류를 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-126">The compiler uses those annotations to help you find potential null reference errors in your code.</span></span> <span data-ttu-id="32b6e-127">null을 허용하지 않는 참조 형식과 nullable 참조 형식 간에는 런타임 차이가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-127">There's no runtime difference between a non-nullable reference type and a nullable reference type.</span></span> <span data-ttu-id="32b6e-128">컴파일러는 null을 허용하지 않는 참조 형식에 대한 런타임 검사를 추가하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-128">The compiler doesn't add any runtime checking for non-nullable reference types.</span></span> <span data-ttu-id="32b6e-129">컴파일 시간 분석에는 이점이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-129">The benefits are in the compile-time analysis.</span></span> <span data-ttu-id="32b6e-130">컴파일러는 코드에서 잠재적 null 오류를 찾고 해결하는 데 도움이 되는 경고를 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-130">The compiler generates warnings that help you find and fix potential null errors in your code.</span></span> <span data-ttu-id="32b6e-131">의도를 선언하고 코드가 해당 의도를 위반하면 컴파일러가 경고를 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-131">You declare your intent, and the compiler warns you when your code violates that intent.</span></span>

<span data-ttu-id="32b6e-132">nullable 사용 컨텍스트에서 컴파일러는 nullable 참조 형식 및 null을 허용하지 않는 참조 형식의 변수에서 정적 분석을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-132">In a nullable enabled context, the compiler performs static analysis on variables of any reference type, both nullable and non-nullable.</span></span> <span data-ttu-id="32b6e-133">컴파일러는 각 참조 변수의 null 상태를 ‘null이 아님’ 또는 ‘null일 수 있음’으로 추적합니다.  </span><span class="sxs-lookup"><span data-stu-id="32b6e-133">The compiler tracks the null state of each reference variable as either *not null* or *maybe null*.</span></span> <span data-ttu-id="32b6e-134">null을 허용하지 않는 참조의 기본 상태는 ‘null이 아님’입니다. </span><span class="sxs-lookup"><span data-stu-id="32b6e-134">The default state of a non-nullable reference is *not null*.</span></span> <span data-ttu-id="32b6e-135">nullable 참조의 기본 상태는 ‘null일 수 있음’입니다. </span><span class="sxs-lookup"><span data-stu-id="32b6e-135">The default state of a nullable reference is *maybe null*.</span></span>

<span data-ttu-id="32b6e-136">null을 허용하지 않는 참조 형식은 해당 null 상태가 ‘null이 아님’이므로 항상 안전하게 역참조할 수 있습니다. </span><span class="sxs-lookup"><span data-stu-id="32b6e-136">Non-nullable reference types should always be safe to dereference because their null state is *not null*.</span></span> <span data-ttu-id="32b6e-137">해당 규칙을 적용하기 위해 null을 허용하지 않는 참조 형식이 null이 아닌 값으로 초기화되지 않는 경우 컴파일러는 경고를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-137">To enforce that rule, the compiler issues warnings if a non-nullable reference type isn't initialized to a non-null value.</span></span> <span data-ttu-id="32b6e-138">지역 변수는 선언된 위치에 할당되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-138">Local variables must be assigned where they're declared.</span></span> <span data-ttu-id="32b6e-139">모든 생성자는 본문, 호출된 생성자 또는 필드 이니셜라이저를 사용하여 모든 필드를 할당해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-139">Every constructor must assign every field, either in its body, a called constructor, or using a field initializer.</span></span> <span data-ttu-id="32b6e-140">상태가 ‘null일 수 있음’인 참조에 null을 허용하지 않는 참조가 할당되는 경우 컴파일러는 경고를 실행합니다. </span><span class="sxs-lookup"><span data-stu-id="32b6e-140">The compiler issues warnings if a non-nullable reference is assigned to a reference whose state is *maybe null*.</span></span> <span data-ttu-id="32b6e-141">그러나 null을 허용하지 않는 참조는 ‘null이 아님’이므로 해당 변수가 역참조될 때 경고가 실행되지 않습니다. </span><span class="sxs-lookup"><span data-stu-id="32b6e-141">However, because a non-nullable reference is *not null*, no warnings are issued when those variables are de-referenced.</span></span>

<span data-ttu-id="32b6e-142">nullable 참조 형식은 `null`에 초기화되거나 할당될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-142">Nullable reference types may be initialized or assigned to `null`.</span></span> <span data-ttu-id="32b6e-143">따라서 정적 분석에서는 역참조되기 전에 변수가 ‘null이 아님’인지 확인해야 합니다. </span><span class="sxs-lookup"><span data-stu-id="32b6e-143">Therefore, static analysis must determine that a variable is *not null* before it's dereferenced.</span></span> <span data-ttu-id="32b6e-144">nullable 참조가 ‘null일 수 있음’으로 확인되면 해당 참조는 null을 허용하지 않는 참조 변수에 할당될 수 없습니다. </span><span class="sxs-lookup"><span data-stu-id="32b6e-144">If a nullable reference is determined to be *maybe null*, it can't be assigned to a non-nullable reference variable.</span></span> <span data-ttu-id="32b6e-145">다음 클래스는 해당 경고의 예를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-145">The following class shows examples of these warnings:</span></span>

:::code language="csharp" source="snippets/shared/NullableReferenceTypes.cs" id="SnippetClassWithNullable":::

<span data-ttu-id="32b6e-146">다음 코드 조각은 이 클래스를 사용하는 경우 컴파일러가 경고를 내보내는 위치를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-146">The following snippet shows where the compiler emits warnings when using this class:</span></span>

:::code language="csharp" source="snippets/shared/NullableReferenceTypes.cs" id="SnippetLocalWarnings":::

<span data-ttu-id="32b6e-147">앞의 예제에서는 참조 변수의 null 상태를 확인하는 컴파일러의 정적 분석을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-147">The preceding examples demonstrate the compiler's static analysis to determine the null state of reference variables.</span></span> <span data-ttu-id="32b6e-148">컴파일러는 null 검사 및 할당에 대한 언어 규칙을 적용하여 분석에 대해 알립니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-148">The compiler applies language rules for null checks and assignments to inform its analysis.</span></span>  <span data-ttu-id="32b6e-149">컴파일러는 메서드 또는 속성의 의미 체계를 가정할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-149">The compiler can't make assumptions about the semantics of methods or properties.</span></span> <span data-ttu-id="32b6e-150">Null 검사를 수행하는 메서드를 호출하는 경우 컴파일러는 해당 메서드가 변수의 null 상태에 영향을 준다는 것을 알 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-150">If you call methods that perform null checks, the compiler can't know those methods affect a variable's null state.</span></span> <span data-ttu-id="32b6e-151">컴파일러에 인수 및 반환 값의 의미 체계를 알리는 여러 가지 특성을 API에 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-151">There are a number of attributes you can add to your APIs to inform the compiler about the semantics of arguments and return values.</span></span> <span data-ttu-id="32b6e-152">해당 특성은 .NET Core 라이브러리의 여러 일반적인 API에 적용되었습니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-152">These attributes have been applied to many common APIs in the .NET Core libraries.</span></span> <span data-ttu-id="32b6e-153">예를 들어 <xref:System.String.IsNullOrEmpty%2A>가 업데이트되었으며 컴파일러는 해당 메서드를 null 검사로 올바르게 해석합니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-153">For example, <xref:System.String.IsNullOrEmpty%2A> has been updated, and the compiler correctly interprets that method as a null check.</span></span> <span data-ttu-id="32b6e-154">Null 상태 정적 분석에 적용되는 특성에 대한 자세한 내용은 [nullable 특성](../attributes/nullable-analysis.md) 문서를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="32b6e-154">For more information about the attributes that apply to null state static analysis, see the article on [Nullable attributes](../attributes/nullable-analysis.md).</span></span>

## <a name="setting-the-nullable-context"></a><span data-ttu-id="32b6e-155">nullable 컨텍스트 설정</span><span class="sxs-lookup"><span data-stu-id="32b6e-155">Setting the nullable context</span></span>

<span data-ttu-id="32b6e-156">두 가지 방법으로 nullable 컨텍스트를 제어할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-156">There are two ways to control the nullable context.</span></span> <span data-ttu-id="32b6e-157">프로젝트 수준에서 `<Nullable>enable</Nullable>` 프로젝트 설정을 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-157">At the project level, you can add the `<Nullable>enable</Nullable>` project setting.</span></span> <span data-ttu-id="32b6e-158">단일 C# 소스 파일에서 `#nullable enable` pragma를 추가하여 nullable 컨텍스트를 사용하도록 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="32b6e-158">In a single C# source file, you can add the `#nullable enable` pragma to enable the nullable context.</span></span> <span data-ttu-id="32b6e-159">[nullable 전략 설정](../../nullable-migration-strategies.md) 문서를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="32b6e-159">See the article on [setting a nullable strategy](../../nullable-migration-strategies.md).</span></span>

## <a name="c-language-specification"></a><span data-ttu-id="32b6e-160">C# 언어 사양</span><span class="sxs-lookup"><span data-stu-id="32b6e-160">C# language specification</span></span>

<span data-ttu-id="32b6e-161">자세한 내용은 [C# 언어 사양](~/_csharplang/spec/introduction.md)의 다음 제안을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="32b6e-161">For more information, see the following proposals for the [C# language specification](~/_csharplang/spec/introduction.md):</span></span>

- [<span data-ttu-id="32b6e-162">nullable 참조 형식</span><span class="sxs-lookup"><span data-stu-id="32b6e-162">Nullable reference types</span></span>](~/_csharplang/proposals/csharp-8.0/nullable-reference-types.md)
- [<span data-ttu-id="32b6e-163">Nullable 참조 형식 사양 초안</span><span class="sxs-lookup"><span data-stu-id="32b6e-163">Draft nullable reference types specification</span></span>](~/_csharplang/proposals/csharp-9.0/nullable-reference-types-specification.md)

## <a name="see-also"></a><span data-ttu-id="32b6e-164">참조</span><span class="sxs-lookup"><span data-stu-id="32b6e-164">See also</span></span>

- [<span data-ttu-id="32b6e-165">C# 참조</span><span class="sxs-lookup"><span data-stu-id="32b6e-165">C# reference</span></span>](../index.md)
- [<span data-ttu-id="32b6e-166">Nullable 값 형식</span><span class="sxs-lookup"><span data-stu-id="32b6e-166">Nullable value types</span></span>](nullable-value-types.md)
