---
title: 'CA2326: None 외의 TypeNameHandling 값을 사용 하지 않습니다 (코드 분석).'
description: 코드 분석 규칙 CA2326에 대 한 정보를 제공 합니다. 예를 들어, 위반을 해결 하는 방법, 위반 하는 경우를 포함 합니다.
ms.date: 08/20/2019
ms.topic: reference
author: dotpaul
ms.author: paulming
dev_langs:
- CSharp
- VB
f1_keywords:
- CA2326
ms.openlocfilehash: 6762501016173b162744a030a779a674dad51a0d
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99630217"
---
# <a name="ca2326-do-not-use-typenamehandling-values-other-than-none"></a><span data-ttu-id="7a61c-103">CA2326: None 이외의 TypeNameHandling 값을 사용하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="7a61c-103">CA2326: Do not use TypeNameHandling values other than None</span></span>

| | <span data-ttu-id="7a61c-104">값</span><span class="sxs-lookup"><span data-stu-id="7a61c-104">Value</span></span> |
|-|-|
| <span data-ttu-id="7a61c-105">**규칙 ID**</span><span class="sxs-lookup"><span data-stu-id="7a61c-105">**Rule ID**</span></span> |<span data-ttu-id="7a61c-106">CA2326</span><span class="sxs-lookup"><span data-stu-id="7a61c-106">CA2326</span></span>|
| <span data-ttu-id="7a61c-107">**범주**</span><span class="sxs-lookup"><span data-stu-id="7a61c-107">**Category**</span></span> |[<span data-ttu-id="7a61c-108">보안</span><span class="sxs-lookup"><span data-stu-id="7a61c-108">Security</span></span>](security-warnings.md)|
| <span data-ttu-id="7a61c-109">**수정이 중단 되거나 중단 되지 않습니다.**</span><span class="sxs-lookup"><span data-stu-id="7a61c-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="7a61c-110">최신이 아님</span><span class="sxs-lookup"><span data-stu-id="7a61c-110">Non-breaking</span></span>|

## <a name="cause"></a><span data-ttu-id="7a61c-111">원인</span><span class="sxs-lookup"><span data-stu-id="7a61c-111">Cause</span></span>

<span data-ttu-id="7a61c-112">이 규칙은 다음 조건 중 하나에 해당 하는 경우에 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="7a61c-112">This rule fires when either of the following conditions are me:</span></span>

- <span data-ttu-id="7a61c-113">[Newtonsoft.Js입니다. ](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_TypeNameHandling.htm)이 아닌 TypeNameHandling 열거형 값 `None` 이 참조 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7a61c-113">A [Newtonsoft.Json.TypeNameHandling](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_TypeNameHandling.htm) enumeration value, other than `None`, is referenced.</span></span>
- <span data-ttu-id="7a61c-114">0이 아닌 값을 나타내는 정수 값이 [TypeNameHandling](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_TypeNameHandling.htm) 변수에 할당 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7a61c-114">An integer value representing a non-zero value is assigned to a [TypeNameHandling](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_TypeNameHandling.htm) variable.</span></span>

## <a name="rule-description"></a><span data-ttu-id="7a61c-115">규칙 설명</span><span class="sxs-lookup"><span data-stu-id="7a61c-115">Rule description</span></span>

[!INCLUDE[insecure-deserializers-description](~/includes/code-analysis/insecure-deserializers-description.md)]

<span data-ttu-id="7a61c-116">이 규칙은 `None`이 아닌[ newtonsoft.json. TypeNameHandling](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_TypeNameHandling.htm) 값을 찾습니다.</span><span class="sxs-lookup"><span data-stu-id="7a61c-116">This rule finds [Newtonsoft.Json.TypeNameHandling](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_TypeNameHandling.htm) values other than `None`.</span></span> <span data-ttu-id="7a61c-117">가Newtonsoft.Js경우에만 deserialize 하려면 [ 입니다. ISerializationBinder](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_Serialization_ISerializationBinder.htm) 를 지정 하 여 deserialize 된 형식을 제한 하 고,이 규칙을 사용 하지 않도록 설정 하 고, [CA2327](ca2327.md), [CA2328](ca2328.md), [CA2329](ca2329.md)및 [CA2330](ca2330.md) 규칙을 대신 사용 하도록 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="7a61c-117">If you want to deserialize only when a [Newtonsoft.Json.Serialization.ISerializationBinder](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_Serialization_ISerializationBinder.htm) is specified to restrict deserialized types, disable this rule and enable rules [CA2327](ca2327.md), [CA2328](ca2328.md), [CA2329](ca2329.md), and [CA2330](ca2330.md) instead.</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="7a61c-118">위반 문제를 해결하는 방법</span><span class="sxs-lookup"><span data-stu-id="7a61c-118">How to fix violations</span></span>

- <span data-ttu-id="7a61c-119">가능하면 [TypeNameHandling](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_TypeNameHandling.htm)의 `None`값을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="7a61c-119">Use [TypeNameHandling](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_TypeNameHandling.htm)'s `None` value, if possible.</span></span>
- <span data-ttu-id="7a61c-120">Serialize 된 데이터를 변조 방지로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="7a61c-120">Make the serialized data tamper-proof.</span></span> <span data-ttu-id="7a61c-121">Serialization 후 직렬화 된 데이터를 암호화 하 여 서명 합니다.</span><span class="sxs-lookup"><span data-stu-id="7a61c-121">After serialization, cryptographically sign the serialized data.</span></span> <span data-ttu-id="7a61c-122">Deserialization 전에 암호화 서명 유효성을 검사 합니다.</span><span class="sxs-lookup"><span data-stu-id="7a61c-122">Before deserialization, validate the cryptographic signature.</span></span> <span data-ttu-id="7a61c-123">암호화 키가 공개 되지 않도록 보호 하 고 키 회전을 설계 합니다.</span><span class="sxs-lookup"><span data-stu-id="7a61c-123">Protect the cryptographic key from being disclosed and design for key rotations.</span></span>
- <span data-ttu-id="7a61c-124">Deserialize 된 형식을 제한 합니다.</span><span class="sxs-lookup"><span data-stu-id="7a61c-124">Restrict deserialized types.</span></span> <span data-ttu-id="7a61c-125">에서 사용자 지정 [Newtonsoft.Js를 구현 합니다. ISerializationBinder](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_Serialization_ISerializationBinder.htm).</span><span class="sxs-lookup"><span data-stu-id="7a61c-125">Implement a custom [Newtonsoft.Json.Serialization.ISerializationBinder](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_Serialization_ISerializationBinder.htm).</span></span> <span data-ttu-id="7a61c-126">Json.NET를 사용 하 여 deserialize 하기 전에 사용자 지정 [ISerializationBinder](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_Serialization_ISerializationBinder.htm) 이 [ SerializationBinder 속성Newtonsoft.Json.Js](https://www.newtonsoft.com/json/help/html/P_Newtonsoft_Json_JsonSerializerSettings_SerializationBinder.htm) 에 지정 되어 있는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="7a61c-126">Before deserializing with Json.NET, ensure your custom [ISerializationBinder](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_Serialization_ISerializationBinder.htm) is specified in the [Newtonsoft.Json.JsonSerializerSettings.SerializationBinder](https://www.newtonsoft.com/json/help/html/P_Newtonsoft_Json_JsonSerializerSettings_SerializationBinder.htm) property.</span></span> <span data-ttu-id="7a61c-127">재정의 된 [Newtonsoft.Js의입니다. ISerializationBinder BindToType](https://www.newtonsoft.com/json/help/html/M_Newtonsoft_Json_Serialization_ISerializationBinder_BindToType.htm) 메서드 (형식이 예기치 않은 경우)를 반환 `null` 하거나 예외를 throw 하 여 deserialization을 중지 합니다.</span><span class="sxs-lookup"><span data-stu-id="7a61c-127">In the overridden [Newtonsoft.Json.Serialization.ISerializationBinder.BindToType](https://www.newtonsoft.com/json/help/html/M_Newtonsoft_Json_Serialization_ISerializationBinder_BindToType.htm) method, if the type is unexpected, return `null` or throw an exception to stop deserialization.</span></span>
  - <span data-ttu-id="7a61c-128">Deserialize 된 형식을 제한 하는 경우이 규칙을 사용 하지 않도록 설정 하 고 [CA2327](ca2327.md), [CA2328](ca2328.md), [CA2329](ca2329.md)및 [CA2330](ca2330.md)규칙을 사용 하도록 설정 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="7a61c-128">If you restrict deserialized types, you may want to disable this rule and enable rules [CA2327](ca2327.md), [CA2328](ca2328.md), [CA2329](ca2329.md), and [CA2330](ca2330.md).</span></span> <span data-ttu-id="7a61c-129">[CA2327](ca2327.md), [CA2328](ca2328.md), [CA2329](ca2329.md)및 [CA2330](ca2330.md) 규칙은 이외의 [ISerializationBinder](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_TypeNameHandling.htm) 값을 사용 하는 경우 [TypeNameHandling](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_Serialization_ISerializationBinder.htm) 를 사용 하도록 도와줍니다 `None` .</span><span class="sxs-lookup"><span data-stu-id="7a61c-129">Rules [CA2327](ca2327.md), [CA2328](ca2328.md), [CA2329](ca2329.md), and [CA2330](ca2330.md) help to ensure that you use a [ISerializationBinder](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_Serialization_ISerializationBinder.htm) when using [TypeNameHandling](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_TypeNameHandling.htm) values other than `None`.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="7a61c-130">경고를 표시 하지 않는 경우</span><span class="sxs-lookup"><span data-stu-id="7a61c-130">When to suppress warnings</span></span>

[!INCLUDE[insecure-deserializers-common-safe-to-suppress](~/includes/code-analysis/insecure-deserializers-common-safe-to-suppress.md)]

## <a name="pseudo-code-examples"></a><span data-ttu-id="7a61c-131">의사 코드 예제</span><span class="sxs-lookup"><span data-stu-id="7a61c-131">Pseudo-code examples</span></span>

### <a name="violation"></a><span data-ttu-id="7a61c-132">위반</span><span class="sxs-lookup"><span data-stu-id="7a61c-132">Violation</span></span>

```csharp
using Newtonsoft.Json;

public class ExampleClass
{
    public JsonSerializerSettings Settings { get; }

    public ExampleClass()
    {
        Settings = new JsonSerializerSettings();
        Settings.TypeNameHandling = TypeNameHandling.All;    // CA2326 violation.
    }
}
```

```vb
Imports Newtonsoft.Json

Public Class ExampleClass
    Public ReadOnly Property Settings() As JsonSerializerSettings

    Public Sub New()
        Settings = New JsonSerializerSettings()
        Settings.TypeNameHandling = TypeNameHandling.All    ' CA2326 violation.
    End Sub
End Class
```

### <a name="solution"></a><span data-ttu-id="7a61c-133">해결 방법</span><span class="sxs-lookup"><span data-stu-id="7a61c-133">Solution</span></span>

```csharp
using Newtonsoft.Json;

public class ExampleClass
{
    public JsonSerializerSettings Settings { get; }

    public ExampleClass()
    {
        Settings = new JsonSerializerSettings();

        // The default value of Settings.TypeNameHandling is TypeNameHandling.None.
    }
}
```

```vb
Imports Newtonsoft.Json

Public Class ExampleClass
    Public ReadOnly Property Settings() As JsonSerializerSettings

    Public Sub New()
        Settings = New JsonSerializerSettings()

        ' The default value of Settings.TypeNameHandling is TypeNameHandling.None.
    End Sub
End Class
```

## <a name="related-rules"></a><span data-ttu-id="7a61c-134">관련 규칙</span><span class="sxs-lookup"><span data-stu-id="7a61c-134">Related rules</span></span>

[<span data-ttu-id="7a61c-135">CA2327: 안전하지 않은 JsonSerializerSettings를 사용하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="7a61c-135">CA2327: Do not use insecure JsonSerializerSettings</span></span>](ca2327.md)

[<span data-ttu-id="7a61c-136">CA2328: JsonSerializerSettings가 안전한지 확인하세요.</span><span class="sxs-lookup"><span data-stu-id="7a61c-136">CA2328: Ensure that JsonSerializerSettings are secure</span></span>](ca2328.md)

[<span data-ttu-id="7a61c-137">CA2329: 안전하지 않은 구성을 사용하여 JsonSerializer로 역직렬화하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="7a61c-137">CA2329: Do not deserialize with JsonSerializer using an insecure configuration</span></span>](ca2329.md)

[<span data-ttu-id="7a61c-138">CA2330: 역직렬화할 때 JsonSerializer에 보안 구성이 있는지 확인하세요.</span><span class="sxs-lookup"><span data-stu-id="7a61c-138">CA2330: Ensure that JsonSerializer has a secure configuration when deserializing</span></span>](ca2330.md)
