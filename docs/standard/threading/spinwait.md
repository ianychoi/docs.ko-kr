---
title: SpinWait
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- synchronization primitives, SpinWait
ms.assetid: 36012f42-34e5-4f86-adf4-973f433ed6c6
ms.openlocfilehash: 2031ebc30d0789181786053d401e69da782a619f
ms.sourcegitcommit: 965a5af7918acb0a3fd3baf342e15d511ef75188
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/18/2020
ms.locfileid: "94826211"
---
# <a name="spinwait"></a><span data-ttu-id="f8a92-102">SpinWait</span><span class="sxs-lookup"><span data-stu-id="f8a92-102">SpinWait</span></span>

<span data-ttu-id="f8a92-103"><xref:System.Threading.SpinWait?displayProperty=nameWithType>는 커널 이벤트에 필요한 비용이 많이 드는 컨텍스트 스위치 및 커널 전환을 방지하기 위해 하위 수준 시나리오에서 사용할 수 있는 단순한 동기화 유형입니다.</span><span class="sxs-lookup"><span data-stu-id="f8a92-103"><xref:System.Threading.SpinWait?displayProperty=nameWithType> is a lightweight synchronization type that you can use in low-level scenarios to avoid the expensive context switches and kernel transitions that are required for kernel events.</span></span> <span data-ttu-id="f8a92-104">멀티 코어 컴퓨터에서, 리소스를 장기간 보유하지 않아도 되는 경우 몇십 번 또는 몇백 번의 주기 동안 대기 스레드가 사용자 모드에서 회전한 다음, 리소스를 획득하려고 시도하는 것이 더 효율적일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f8a92-104">On multicore computers, when a resource is not expected to be held for long periods of time, it can be more efficient for a waiting thread to spin in user mode for a few dozen or a few hundred cycles, and then retry to acquire the resource.</span></span> <span data-ttu-id="f8a92-105">회전 후에 리소스가 사용 가능해지면 몇천 번의 주기를 절약하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="f8a92-105">If the resource is available after spinning, then you have saved several thousand cycles.</span></span> <span data-ttu-id="f8a92-106">리소스를 여전히 사용할 수 없는 경우에는 몇 번의 주기만 사용한 것이며 커널 기반의 대기를 계속 입력할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f8a92-106">If the resource is still not available, then you have spent only a few cycles and can still enter a kernel-based wait.</span></span> <span data-ttu-id="f8a92-107">이 회전 후 대기 조합을 ‘2단계 대기 작업’이라고도 합니다. </span><span class="sxs-lookup"><span data-stu-id="f8a92-107">This spinning-then-waiting combination is sometimes referred to as a *two-phase wait operation*.</span></span>  
  
 <span data-ttu-id="f8a92-108"><xref:System.Threading.SpinWait>는 <xref:System.Threading.ManualResetEvent>와 같은 커널 이벤트를 래핑하는 .NET 형식과 함께 사용하도록 설계되었습니다.</span><span class="sxs-lookup"><span data-stu-id="f8a92-108"><xref:System.Threading.SpinWait> is designed to be used in conjunction with the .NET types that wrap kernel events such as <xref:System.Threading.ManualResetEvent>.</span></span> <span data-ttu-id="f8a92-109"><xref:System.Threading.SpinWait>는 한 프로그램의 기본 회전 기능에 대해 자동으로 사용될 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f8a92-109"><xref:System.Threading.SpinWait> can also be used by itself for basic spinning functionality in just one program.</span></span>  
  
 <span data-ttu-id="f8a92-110"><xref:System.Threading.SpinWait>는 빈 루프보다 큽니다.</span><span class="sxs-lookup"><span data-stu-id="f8a92-110"><xref:System.Threading.SpinWait> is more than just an empty loop.</span></span> <span data-ttu-id="f8a92-111">일반적인 경우에는 올바른 회전 동작을 제공하도록 신중하게 구현되며, 충분히(대략 커널 전환에 필요한 시간 동안) 회전하는 경우 컨텍스트 스위치를 자동으로 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="f8a92-111">It is carefully implemented to provide correct spinning behavior for the general case, and will itself initiate context switches if it spins long enough (roughly the length of time required for a kernel transition).</span></span> <span data-ttu-id="f8a92-112">예를 들어 단일 코어 컴퓨터에서는, 회전 블록이 모든 스레드에서 진행되므로 <xref:System.Threading.SpinWait>가 스레드의 시간 조각을 즉시 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="f8a92-112">For example, on single-core computers, <xref:System.Threading.SpinWait> yields the time slice of the thread immediately because spinning blocks forward progress on all threads.</span></span> <span data-ttu-id="f8a92-113">또한 <xref:System.Threading.SpinWait>은 대기 스레드가 우선 순위가 높은 스레드 또는 가비지 수집기를 차단하는 것을 방지하기 위해 멀티 코어 컴퓨터에서도 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="f8a92-113"><xref:System.Threading.SpinWait> also yields even on multi-core machines to prevent the waiting thread from blocking higher-priority threads or the garbage collector.</span></span> <span data-ttu-id="f8a92-114">따라서 2단계 대기 작업에서 <xref:System.Threading.SpinWait>를 사용하는 경우, <xref:System.Threading.SpinWait>가 자동으로 컨텍스트 스위치를 시작하기 전에 커널 대기를 호출하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="f8a92-114">Therefore, if you are using a <xref:System.Threading.SpinWait> in a two-phase wait operation, we recommend that you invoke the kernel wait before the <xref:System.Threading.SpinWait> itself initiates a context switch.</span></span> <span data-ttu-id="f8a92-115"><xref:System.Threading.SpinWait>는 <xref:System.Threading.SpinWait.NextSpinWillYield%2A> 속성을 제공합니다. 이 속성은 <xref:System.Threading.SpinWait.SpinOnce%2A>에 대한 모든 호출 전에 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f8a92-115"><xref:System.Threading.SpinWait> provides the <xref:System.Threading.SpinWait.NextSpinWillYield%2A> property, which you can check before every call to <xref:System.Threading.SpinWait.SpinOnce%2A>.</span></span> <span data-ttu-id="f8a92-116">속성에서 `true`를 반환하면 고유한 대기 작업을 시작하세요.</span><span class="sxs-lookup"><span data-stu-id="f8a92-116">When the property returns `true`, initiate your own Wait operation.</span></span> <span data-ttu-id="f8a92-117">자세한 내용은 [방법: SpinWait을 사용하여 2단계 대기 작업 구현](how-to-use-spinwait-to-implement-a-two-phase-wait-operation.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f8a92-117">For an example, see [How to: Use SpinWait to Implement a Two-Phase Wait Operation](how-to-use-spinwait-to-implement-a-two-phase-wait-operation.md).</span></span>  
  
 <span data-ttu-id="f8a92-118">2단계 대기 작업을 수행하지 않지만 일부 조건이 true가 될 때까지 회전하는 경우, Windows 운영 체제 환경에 적합하게 되도록 <xref:System.Threading.SpinWait>가 자신의 컨텍스트 스위치를 수행하도록 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f8a92-118">If you are not performing a two-phase wait operation but are just spinning until some condition is true, you can enable <xref:System.Threading.SpinWait> to perform its context switches so that it is a good citizen in the Windows operating system environment.</span></span> <span data-ttu-id="f8a92-119">다음 기본 예제는 잠금 해제 스택의 <xref:System.Threading.SpinWait>를 보여줍니다.</span><span class="sxs-lookup"><span data-stu-id="f8a92-119">The following basic example shows a <xref:System.Threading.SpinWait> in a lock-free stack.</span></span> <span data-ttu-id="f8a92-120">스레드로부터 안전한 고성능 스택이 필요한 경우 <xref:System.Collections.Concurrent.ConcurrentStack%601?displayProperty=nameWithType>을 사용하세요.</span><span class="sxs-lookup"><span data-stu-id="f8a92-120">If you require a high-performance, thread-safe stack, consider using <xref:System.Collections.Concurrent.ConcurrentStack%601?displayProperty=nameWithType>.</span></span>  
  
 [!code-csharp[CDS_SpinWait#05](../../../samples/snippets/csharp/VS_Snippets_Misc/cds_spinwait/cs/spinwait.cs#05)]
 [!code-vb[CDS_SpinWait#05](../../../samples/snippets/visualbasic/VS_Snippets_Misc/cds_spinwait/vb/cds_spinwait1.vb#05)]  
  
## <a name="see-also"></a><span data-ttu-id="f8a92-121">참고 항목</span><span class="sxs-lookup"><span data-stu-id="f8a92-121">See also</span></span>

- <xref:System.Threading.Thread.SpinWait%2A>
- [<span data-ttu-id="f8a92-122">스레딩 개체 및 기능</span><span class="sxs-lookup"><span data-stu-id="f8a92-122">Threading Objects and Features</span></span>](threading-objects-and-features.md)
