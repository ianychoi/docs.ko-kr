---
title: 대기 모드
ms.date: 03/30/2017
helpviewer_keywords:
- garbage collection, intrusiveness
- garbage collection, latency modes
ms.assetid: 96278bb7-6eab-4612-8594-ceebfc887d81
ms.openlocfilehash: 2e7b30a50e2513c567abf2116ab5495e717a8e22
ms.sourcegitcommit: 965a5af7918acb0a3fd3baf342e15d511ef75188
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/18/2020
ms.locfileid: "94831197"
---
# <a name="latency-modes"></a><span data-ttu-id="1c99d-102">대기 시간 모드</span><span class="sxs-lookup"><span data-stu-id="1c99d-102">Latency modes</span></span>

<span data-ttu-id="1c99d-103">개체를 회수하려면, 가비지 수집기(GC)가 애플리케이션의 실행 스레드를 모두 중지해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-103">To reclaim objects, the garbage collector (GC) must stop all the executing threads in an application.</span></span> <span data-ttu-id="1c99d-104">가비지 수집기가 활성 상태인 기간을 *대기 시간* 이라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-104">The period of time during which the garbage collector is active is referred to as its *latency*.</span></span>

<span data-ttu-id="1c99d-105">애플리케이션이 데이터를 검색하거나 콘텐츠를 표시하는 경우와 같은 일부 상황에서는 전체 가비지 컬렉션이 중요한 시간에 발생하여 성능이 저하될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-105">In some situations, such as when an application retrieves data or displays content, a full garbage collection can occur at a critical time and impede performance.</span></span> <span data-ttu-id="1c99d-106"><xref:System.Runtime.GCSettings.LatencyMode%2A?displayProperty=nameWithType> 속성을 <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> 값 중 하나로 설정하여 가비지 수집기의 개입을 조정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-106">You can adjust the intrusiveness of the garbage collector by setting the <xref:System.Runtime.GCSettings.LatencyMode%2A?displayProperty=nameWithType> property to one of the <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> values.</span></span>

## <a name="low-latency-settings"></a><span data-ttu-id="1c99d-107">짧은 대기 시간 설정</span><span class="sxs-lookup"><span data-stu-id="1c99d-107">Low latency settings</span></span>

<span data-ttu-id="1c99d-108">"짧은" 대기 시간 설정을 사용하면 가비지 수집기의 애플리케이션 개입이 줄어듭니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-108">Using a "low" latency setting means the garbage collector intrudes less in your application.</span></span> <span data-ttu-id="1c99d-109">가비지 수집은 좀 더 적은 양의 메모리를 회수합니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-109">Garbage collection is more conservative about reclaiming memory.</span></span>

<span data-ttu-id="1c99d-110"><xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> 열거형은 두 개의 짧은 대기 시간 설정을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-110">The <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> enumeration provides two low latency settings:</span></span>

- <span data-ttu-id="1c99d-111">[GCLatencyMode.LowLatency](xref:System.Runtime.GCLatencyMode.LowLatency)는 2세대 컬렉션을 사용하지 않고 0세대 및 1세대 컬렉션만 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-111">[GCLatencyMode.LowLatency](xref:System.Runtime.GCLatencyMode.LowLatency) suppresses generation 2 collections and performs only generation 0 and 1 collections.</span></span> <span data-ttu-id="1c99d-112">짧은 시간 동안에만 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-112">It can be used only for short periods of time.</span></span> <span data-ttu-id="1c99d-113">긴 시간 동안 사용하여 시스템의 메모리 사용량이 많을 경우 가비지 수집기가 애플리케이션을 잠시 중지하고 시간 결정적 작업을 방해할 수 있는 수집을 트리거합니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-113">Over longer periods, if the system is under memory pressure, the garbage collector will trigger a collection, which can briefly pause the application and disrupt a time-critical operation.</span></span> <span data-ttu-id="1c99d-114">이 설정은 워크스테이션 가비지 컬렉션에서만 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-114">This setting is available only for workstation garbage collection.</span></span>

- <span data-ttu-id="1c99d-115">[GCLatencyMode.SustainedLowLatency](xref:System.Runtime.GCLatencyMode.SustainedLowLatency)는 2세대 포그라운드 컬렉션을 사용하지 않고 0세대, 1세대 및 2세대 백그라운드 컬렉션만 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-115">[GCLatencyMode.SustainedLowLatency](xref:System.Runtime.GCLatencyMode.SustainedLowLatency) suppresses foreground generation 2 collections and performs only generation 0, 1, and background generation 2 collections.</span></span> <span data-ttu-id="1c99d-116">오랜 시간 동안 사용할 수 있으며 워크스테이션 및 서버 가비지 컬렉션 모두에 대해 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-116">It can be used for longer periods of time, and is available for both workstation and server garbage collection.</span></span> <span data-ttu-id="1c99d-117">백그라운드 가비지 수집을 사용하지 않을 경우 이 설정을 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-117">This setting cannot be used if background garbage collection is disabled.</span></span>

<span data-ttu-id="1c99d-118">대기 시간이 짧은 기간 중에는 다음이 발생하지 않는 한 2세대 컬렉션이 사용되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-118">During low latency periods, generation 2 collections are suppressed unless the following occurs:</span></span>

- <span data-ttu-id="1c99d-119">시스템에 운영 체제에서 메모리 부족 알림을 받습니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-119">The system receives a low memory notification from the operating system.</span></span>

- <span data-ttu-id="1c99d-120">애플리케이션 코드는 <xref:System.GC.Collect%2A?displayProperty=nameWithType> 메서드를 호출하고 `generation` 매개 변수에 대해 2를 지정하여 수집을 줄입니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-120">Application code induces a collection by calling the <xref:System.GC.Collect%2A?displayProperty=nameWithType> method and specifying 2 for the `generation` parameter.</span></span>

## <a name="scenarios"></a><span data-ttu-id="1c99d-121">시나리오</span><span class="sxs-lookup"><span data-stu-id="1c99d-121">Scenarios</span></span>

<span data-ttu-id="1c99d-122">다음 표에서는 <xref:System.Runtime.GCLatencyMode> 값을 사용하는 애플리케이션 시나리오를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-122">The following table lists the application scenarios for using the <xref:System.Runtime.GCLatencyMode> values:</span></span>

|<span data-ttu-id="1c99d-123">대기 시간 모드</span><span class="sxs-lookup"><span data-stu-id="1c99d-123">Latency mode</span></span>|<span data-ttu-id="1c99d-124">애플리케이션 시나리오</span><span class="sxs-lookup"><span data-stu-id="1c99d-124">Application scenarios</span></span>|
|------------------|---------------------------|
|<xref:System.Runtime.GCLatencyMode.Batch>|<span data-ttu-id="1c99d-125">UI(사용자 인터페이스) 또는 서버 쪽 작업이 없는 애플리케이션.</span><span class="sxs-lookup"><span data-stu-id="1c99d-125">For applications that have no user interface (UI) or server-side operations.</span></span><br /><br /><span data-ttu-id="1c99d-126">백그라운드 가비지 수집을 사용하지 않도록 설정하면, 이 설정이 워크스테이션 및 서버 가비지 수집의 기본 모드입니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-126">When background garbage collection is disabled, this is the default mode for workstation and server garbage collection.</span></span> <span data-ttu-id="1c99d-127">또한 <xref:System.Runtime.GCLatencyMode.Batch> 모드에서 [gcConcurrent](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) 설정을 재정의합니다. 즉, 백그라운드 또는 동시 컬렉션을 방지합니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-127"><xref:System.Runtime.GCLatencyMode.Batch> mode also overrides the [gcConcurrent](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) setting, that is, it prevents background or concurrent collections.</span></span>|
|<xref:System.Runtime.GCLatencyMode.Interactive>|<span data-ttu-id="1c99d-128">UI가 있는 대부분의 애플리케이션의 경우.</span><span class="sxs-lookup"><span data-stu-id="1c99d-128">For most applications that have a UI.</span></span><br /><br /><span data-ttu-id="1c99d-129">워크스테이션 및 서버 가비지 수집의 기본 모드입니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-129">This is the default mode for workstation and server garbage collection.</span></span> <span data-ttu-id="1c99d-130">그러나 앱이 호스트되는 경우 호스팅 프로세스의 가비지 수집기 설정이 우선적으로 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-130">However, if an app is hosted, the garbage collector settings of the hosting process take precedence.</span></span>|
|<xref:System.Runtime.GCLatencyMode.LowLatency>|<span data-ttu-id="1c99d-131">가비지 수집기의 방해로 인한 영향을 받을 수 있는 단기간의 시간이 중요한 작업이 있는 애플리케이션(예:</span><span class="sxs-lookup"><span data-stu-id="1c99d-131">For applications that have short-term, time-sensitive operations during which interruptions from the garbage collector could be disruptive.</span></span> <span data-ttu-id="1c99d-132">예를 들어, 애니메이션이나 데이터 획득 함수를 렌더링하는 애플리케이션입니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-132">For example, applications that render animations or data acquisition functions.</span></span>|
|<xref:System.Runtime.GCLatencyMode.SustainedLowLatency>|<span data-ttu-id="1c99d-133">가비지 수집기의 방해로 인한 영향을 받을 수 있는 포함된 기간이지만 잠재적으로 장기간의 시간 결정적인 작업이 있는 애플리케이션(예:</span><span class="sxs-lookup"><span data-stu-id="1c99d-133">For applications that have time-sensitive operations for a contained but potentially longer duration of time during which interruptions from the garbage collector could be disruptive.</span></span> <span data-ttu-id="1c99d-134">거래 시간 동안 시장 데이터가 변경될 때 빠른 응답 시간을 필요로 하는 애플리케이션)</span><span class="sxs-lookup"><span data-stu-id="1c99d-134">For example, applications that need quick response times as market data changes during trading hours.</span></span><br /><br /><span data-ttu-id="1c99d-135">이 모드에서는 다른 모드보다 관리되는 힙 크기가 더 큽니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-135">This mode results in a larger managed heap size than other modes.</span></span> <span data-ttu-id="1c99d-136">관리되는 힙을 압축하지 않기 때문에 조각화의 수준이 더 높을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-136">Because it does not compact the managed heap, higher fragmentation is possible.</span></span> <span data-ttu-id="1c99d-137">충분한 메모리를 사용할 수 있는지 확인하세요.</span><span class="sxs-lookup"><span data-stu-id="1c99d-137">Ensure that sufficient memory is available.</span></span>|

## <a name="guidelines-for-using-low-latency"></a><span data-ttu-id="1c99d-138">짧은 대기 시간 사용에 대한 지침</span><span class="sxs-lookup"><span data-stu-id="1c99d-138">Guidelines for using low latency</span></span>

<span data-ttu-id="1c99d-139">[GCLatencyMode.LowLatency](xref:System.Runtime.GCLatencyMode.LowLatency) 모드를 사용하는 경우 다음과 같은 지침을 고려합니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-139">When you use [GCLatencyMode.LowLatency](xref:System.Runtime.GCLatencyMode.LowLatency) mode, consider the following guidelines:</span></span>

- <span data-ttu-id="1c99d-140">짧은 대기 시간 기간을 가능한 한 짧게 유지합니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-140">Keep the period of time in low latency as short as possible.</span></span>

- <span data-ttu-id="1c99d-141">짧은 대기 시간 기간 중 많은 양의 메모리를 할당하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="1c99d-141">Avoid allocating high amounts of memory during low latency periods.</span></span> <span data-ttu-id="1c99d-142">가비지 수집에서 확보하는 개체 수가 더 적기 때문에 메모리 부족 알림이 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-142">Low memory notifications can occur because garbage collection reclaims fewer objects.</span></span>

- <span data-ttu-id="1c99d-143">짧은 대기 시간 모드에서는 새 할당 수, 특히 대형 개체 힙 및 고정 개체에 대한 할당 수를 최소화합니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-143">While in the low latency mode, minimize the number of new allocations, in particular allocations onto the large object heap and pinned objects.</span></span>

- <span data-ttu-id="1c99d-144">할당할 수 있는 스레드를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-144">Be aware of threads that could be allocating.</span></span> <span data-ttu-id="1c99d-145"><xref:System.Runtime.GCSettings.LatencyMode%2A> 속성 설정은 프로세스 전체에 적용되므로, 할당되는 모든 스레드에서 <xref:System.OutOfMemoryException> 예외가 생성될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-145">Because the <xref:System.Runtime.GCSettings.LatencyMode%2A> property setting is process-wide, <xref:System.OutOfMemoryException> exceptions can be generated on any thread that is allocating.</span></span>

- <span data-ttu-id="1c99d-146">제약이 있는 실행 영역에서 짧은 대기 시간 코드를 래핑합니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-146">Wrap the low latency code in constrained execution regions.</span></span> <span data-ttu-id="1c99d-147">자세한 내용은 [제약이 있는 실행 영역](../../framework/performance/constrained-execution-regions.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="1c99d-147">For more information, see [Constrained execution regions](../../framework/performance/constrained-execution-regions.md).</span></span>

- <span data-ttu-id="1c99d-148"><xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%29?displayProperty=nameWithType> 메서드를 호출하여 짧은 대기 시간 기간 중 2세대 수집을 강제할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1c99d-148">You can force generation 2 collections during a low latency period by calling the <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%29?displayProperty=nameWithType> method.</span></span>

## <a name="see-also"></a><span data-ttu-id="1c99d-149">참고 항목</span><span class="sxs-lookup"><span data-stu-id="1c99d-149">See also</span></span>

- <xref:System.GC?displayProperty=nameWithType>
- [<span data-ttu-id="1c99d-150">인덱싱된 컬렉션</span><span class="sxs-lookup"><span data-stu-id="1c99d-150">Induced Collections</span></span>](induced.md)
- [<span data-ttu-id="1c99d-151">가비지 수집</span><span class="sxs-lookup"><span data-stu-id="1c99d-151">Garbage Collection</span></span>](index.md)
