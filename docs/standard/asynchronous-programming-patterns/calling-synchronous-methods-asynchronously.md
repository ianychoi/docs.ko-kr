---
title: 동기 메서드를 비동기 방식으로 호출
description: BeginInvoke 및 EndInvoke 메서드를 사용하여 .NET에서 동기 메서드를 비동기적으로 호출하는 방법을 알아봅니다.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- asynchronous programming, delegates
- asynchronous delegates
- AsyncWaitHandle property
- callback methods
- calling synchronous methods in asynchronous manner
- WaitHandle class, code examples
- asynchronous programming, status polling
- polling asynchronous operation status
- delegates [.NET], asynchronous
- synchronous calling in asynchronous manner
- waiting for asynchronous calls
- status information [.NET], asynchronous operations
ms.assetid: 41972034-92ed-450a-9664-ab93fcc6f1fb
ms.openlocfilehash: 668ac7552289a9d1015b62ed9e68f53415dd6211
ms.sourcegitcommit: 965a5af7918acb0a3fd3baf342e15d511ef75188
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/18/2020
ms.locfileid: "94830443"
---
# <a name="calling-synchronous-methods-asynchronously"></a><span data-ttu-id="4ad76-103">동기 메서드를 비동기 방식으로 호출</span><span class="sxs-lookup"><span data-stu-id="4ad76-103">Calling Synchronous Methods Asynchronously</span></span>

<span data-ttu-id="4ad76-104">.NET에서는 모든 메서드를 비동기 방식으로 호출할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-104">.NET enables you to call any method asynchronously.</span></span> <span data-ttu-id="4ad76-105">해당 작업을 수행하려면 호출하려는 메서드와 동일한 시그니처를 사용하여 대리자를 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-105">To do this, you define a delegate with the same signature as the method you want to call.</span></span> <span data-ttu-id="4ad76-106">공용 언어 런타임은 적절한 시그니처를 사용하여 이 대리자에 대한 `BeginInvoke` 및 `EndInvoke` 메서드를 자동으로 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-106">The common language runtime automatically defines `BeginInvoke` and `EndInvoke` methods for this delegate, with the appropriate signatures.</span></span>

> [!NOTE]
> <span data-ttu-id="4ad76-107">특히 `BeginInvoke` 및 `EndInvoke` 메서드와 같은 비동기 대리자는 .NET Compact Framework에서 호출할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-107">Asynchronous delegate calls, specifically the `BeginInvoke` and `EndInvoke` methods, are not supported in the .NET Compact Framework.</span></span>

<span data-ttu-id="4ad76-108">`BeginInvoke` 메서드는 비동기 호출을 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-108">The `BeginInvoke` method initiates the asynchronous call.</span></span> <span data-ttu-id="4ad76-109">이 메서드의 매개 변수는 비동기 방식으로 실행하려는 메서드의 매개 변수와 같으며 두 개의 선택적인 매개 변수가 추가로 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-109">It has the same parameters as the method that you want to execute asynchronously, plus two additional optional parameters.</span></span> <span data-ttu-id="4ad76-110">첫 번째 매개 변수는 비동기 호출이 완료될 때 호출될 메서드를 참조하는 <xref:System.AsyncCallback> 대리자이고</span><span class="sxs-lookup"><span data-stu-id="4ad76-110">The first parameter is an <xref:System.AsyncCallback> delegate that references a method to be called when the asynchronous call completes.</span></span> <span data-ttu-id="4ad76-111">두 번째 매개 변수는 콜백 메서드에 정보를 전달하는 사용자 정의 개체입니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-111">The second parameter is a user-defined object that passes information into the callback method.</span></span> <span data-ttu-id="4ad76-112">`BeginInvoke` 는 비동기 호출이 완료되기를 기다리지 않고 즉시 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-112">`BeginInvoke` returns immediately and does not wait for the asynchronous call to complete.</span></span> <span data-ttu-id="4ad76-113">`BeginInvoke` 는 비동기 호출의 진행률을 모니터링하는 데 사용할 수 있는 <xref:System.IAsyncResult>를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-113">`BeginInvoke` returns an <xref:System.IAsyncResult>, which can be used to monitor the progress of the asynchronous call.</span></span>

<span data-ttu-id="4ad76-114">`EndInvoke` 메서드는 비동기 호출의 결과를 검색합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-114">The `EndInvoke` method retrieves the results of the asynchronous call.</span></span> <span data-ttu-id="4ad76-115">이 메서드는 `BeginInvoke`를 호출한 후 언제든지 호출할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-115">It can be called any time after `BeginInvoke`.</span></span> <span data-ttu-id="4ad76-116">비동기 호출이 완료되지 않은 경우 `EndInvoke` 는 호출이 완료될 때까지 호출하는 스레드를 차단합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-116">If the asynchronous call has not completed, `EndInvoke` blocks the calling thread until it completes.</span></span> <span data-ttu-id="4ad76-117">`EndInvoke`의 매개 변수에는 비동기 방식으로 실행하려는 메서드의 `out` 및 `ref` 매개 변수(Visual Basic의 경우 `<Out>` `ByRef` 및 `ByRef`)와 `BeginInvoke`에서 반환하는 <xref:System.IAsyncResult>가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-117">The parameters of `EndInvoke` include the `out` and `ref` parameters (`<Out>` `ByRef` and `ByRef` in Visual Basic) of the method that you want to execute asynchronously, plus the <xref:System.IAsyncResult> returned by `BeginInvoke`.</span></span>

> [!NOTE]
> <span data-ttu-id="4ad76-118">Visual Studio의 IntelliSense 기능은 `BeginInvoke` 및 `EndInvoke`의 매개 변수를 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-118">The IntelliSense feature in Visual Studio displays the parameters of `BeginInvoke` and `EndInvoke`.</span></span> <span data-ttu-id="4ad76-119">Visual Studio 또는 이와 유사한 도구를 사용하지 않거나 Visual Studio와 C#을 함께 사용하는 경우 이러한 메서드에 대해 정의된 매개 변수 설명을 보려면 [APM(비동기 프로그래밍 모델)](asynchronous-programming-model-apm.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="4ad76-119">If you're not using Visual Studio or a similar tool, or if you're using C# with Visual Studio, see [Asynchronous Programming Model (APM)](asynchronous-programming-model-apm.md) for a description of the parameters defined for these methods.</span></span>

<span data-ttu-id="4ad76-120">이 항목의 코드 예제에서는 `BeginInvoke` 및 `EndInvoke` 를 사용하여 비동기 호출을 수행하는 네 가지 일반적인 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-120">The code examples in this topic demonstrate four common ways to use `BeginInvoke` and `EndInvoke` to make asynchronous calls.</span></span> <span data-ttu-id="4ad76-121">`BeginInvoke` 를 호출한 후 다음과 같은 작업을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-121">After calling `BeginInvoke` you can do the following:</span></span>

- <span data-ttu-id="4ad76-122">작업을 수행한 다음 `EndInvoke` 를 호출하여 호출이 완료될 때까지 실행을 차단합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-122">Do some work and then call `EndInvoke` to block until the call completes.</span></span>

- <span data-ttu-id="4ad76-123"><xref:System.Threading.WaitHandle> 속성을 사용하여 <xref:System.IAsyncResult.AsyncWaitHandle%2A?displayProperty=nameWithType> 을 가져오고 해당 <xref:System.Threading.WaitHandle.WaitOne%2A> 메서드를 사용하여 <xref:System.Threading.WaitHandle> 이 신호를 받을 때까지 실행을 차단한 다음 `EndInvoke`를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-123">Obtain a <xref:System.Threading.WaitHandle> using the <xref:System.IAsyncResult.AsyncWaitHandle%2A?displayProperty=nameWithType> property, use its <xref:System.Threading.WaitHandle.WaitOne%2A> method to block execution until the <xref:System.Threading.WaitHandle> is signaled, and then call `EndInvoke`.</span></span>

- <span data-ttu-id="4ad76-124"><xref:System.IAsyncResult> 에서 반환한 `BeginInvoke` 를 폴링하여 비동기 호출이 완료되는 시점을 확인한 다음 `EndInvoke`를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-124">Poll the <xref:System.IAsyncResult> returned by `BeginInvoke` to determine when the asynchronous call has completed, and then call `EndInvoke`.</span></span>

- <span data-ttu-id="4ad76-125">콜백 메서드의 대리자를 `BeginInvoke`에 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-125">Pass a delegate for a callback method to `BeginInvoke`.</span></span> <span data-ttu-id="4ad76-126">이 메서드는 비동기 호출이 완료될 때 <xref:System.Threading.ThreadPool> 스레드에서 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-126">The method is executed on a <xref:System.Threading.ThreadPool> thread when the asynchronous call completes.</span></span> <span data-ttu-id="4ad76-127">콜백 메서드는 `EndInvoke`를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-127">The callback method calls `EndInvoke`.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="4ad76-128">사용하는 방법에 관계없이 항상 `EndInvoke` 를 호출하여 비동기 호출을 완료해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-128">No matter which technique you use, always call `EndInvoke` to complete your asynchronous call.</span></span>

## <a name="defining-the-test-method-and-asynchronous-delegate"></a><span data-ttu-id="4ad76-129">테스트 메서드 및 비동기 대리자 정의</span><span class="sxs-lookup"><span data-stu-id="4ad76-129">Defining the Test Method and Asynchronous Delegate</span></span>
 <span data-ttu-id="4ad76-130">다음 코드 예제에서는 동일한 장기 실행 메서드인 `TestMethod`를 비동기 방식으로 호출하는 다양한 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-130">The code examples that follow demonstrate various ways of calling the same long-running method, `TestMethod`, asynchronously.</span></span> <span data-ttu-id="4ad76-131">`TestMethod` 메서드는 처리를 시작했음을 나타내는 콘솔 메시지를 표시하고 몇 초간 대기한 후 종료됩니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-131">The `TestMethod` method displays a console message to show that it has begun processing, sleeps for a few seconds, and then ends.</span></span> <span data-ttu-id="4ad76-132">`TestMethod` 에는 `out` 및 `BeginInvoke` 의 시그니처에 해당 매개 변수가 추가되는 방식을 보여 주는 `EndInvoke`매개 변수가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-132">`TestMethod` has an `out` parameter to demonstrate the way such parameters are added to the signatures of `BeginInvoke` and `EndInvoke`.</span></span> <span data-ttu-id="4ad76-133">`ref` 매개 변수도 마찬가지로 처리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-133">You can handle `ref` parameters similarly.</span></span>

 <span data-ttu-id="4ad76-134">다음 코드 예제에서는 `TestMethod` 의 정의와 `AsyncMethodCaller` 를 비동기식으로 호출하는 데 사용할 수 있는 `TestMethod` 라는 대리자를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-134">The following code example shows the definition of `TestMethod` and the delegate named `AsyncMethodCaller` that can be used to call `TestMethod` asynchronously.</span></span> <span data-ttu-id="4ad76-135">코드 예제를 컴파일하려면 `TestMethod` 및 `AsyncMethodCaller` 대리자의 정의를 포함해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-135">To compile the code examples, you must include the definitions for `TestMethod` and the `AsyncMethodCaller` delegate.</span></span>

 [!code-cpp[AsyncDelegateExamples#1](../../../samples/snippets/cpp/VS_Snippets_CLR/AsyncDelegateExamples/cpp/TestMethod.cpp#1)]
 [!code-csharp[AsyncDelegateExamples#1](../../../samples/snippets/csharp/VS_Snippets_CLR/AsyncDelegateExamples/CS/TestMethod.cs#1)]
 [!code-vb[AsyncDelegateExamples#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/AsyncDelegateExamples/VB/TestMethod.vb#1)]

## <a name="waiting-for-an-asynchronous-call-with-endinvoke"></a><span data-ttu-id="4ad76-136">EndInvoke로 비동기 호출 대기</span><span class="sxs-lookup"><span data-stu-id="4ad76-136">Waiting for an Asynchronous Call with EndInvoke</span></span>
 <span data-ttu-id="4ad76-137">메서드를 비동기 방식으로 실행하는 가장 간단한 방법은 대리자의 `BeginInvoke` 메서드를 호출하여 메서드 실행을 시작하고 주 스레드에서 작업을 수행한 다음 대리자의 `EndInvoke` 메서드를 호출하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-137">The simplest way to execute a method asynchronously is to start executing the method by calling the delegate's `BeginInvoke` method, do some work on the main thread, and then call the delegate's `EndInvoke` method.</span></span> <span data-ttu-id="4ad76-138">`EndInvoke` 는 비동기 호출이 완료될 때까지 반환되지 않으므로 호출하는 스레드를 차단할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-138">`EndInvoke` might block the calling thread because it does not return until the asynchronous call completes.</span></span> <span data-ttu-id="4ad76-139">이 방법은 파일 또는 네트워크 작업에 적합합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-139">This is a good technique to use with file or network operations.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="4ad76-140">`EndInvoke` 는 실행을 차단할 수 있으므로 사용자 인터페이스를 제공하는 스레드에서는 호출하지 말아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-140">Because `EndInvoke` might block, you should never call it from threads that service the user interface.</span></span>

 [!code-cpp[AsyncDelegateExamples#2](../../../samples/snippets/cpp/VS_Snippets_CLR/AsyncDelegateExamples/cpp/EndInvoke.cpp#2)]
 [!code-csharp[AsyncDelegateExamples#2](../../../samples/snippets/csharp/VS_Snippets_CLR/AsyncDelegateExamples/CS/EndInvoke.cs#2)]
 [!code-vb[AsyncDelegateExamples#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/AsyncDelegateExamples/VB/EndInvoke.vb#2)]

## <a name="waiting-for-an-asynchronous-call-with-waithandle"></a><span data-ttu-id="4ad76-141">WaitHandle로 비동기 호출 대기</span><span class="sxs-lookup"><span data-stu-id="4ad76-141">Waiting for an Asynchronous Call with WaitHandle</span></span>
 <span data-ttu-id="4ad76-142"><xref:System.Threading.WaitHandle> 에서 반환하는 <xref:System.IAsyncResult.AsyncWaitHandle%2A> 의 <xref:System.IAsyncResult> 속성을 사용하여 `BeginInvoke`을 가져올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-142">You can obtain a <xref:System.Threading.WaitHandle> by using the <xref:System.IAsyncResult.AsyncWaitHandle%2A> property of the <xref:System.IAsyncResult> returned by `BeginInvoke`.</span></span> <span data-ttu-id="4ad76-143">비동기 호출이 완료되면 <xref:System.Threading.WaitHandle> 은 신호를 받으며 <xref:System.Threading.WaitHandle.WaitOne%2A> 메서드를 호출하여 대기할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-143">The <xref:System.Threading.WaitHandle> is signaled when the asynchronous call completes, and you can wait for it by calling the <xref:System.Threading.WaitHandle.WaitOne%2A> method.</span></span>

 <span data-ttu-id="4ad76-144"><xref:System.Threading.WaitHandle>을 사용하는 경우 비동기 호출이 완료되기 전이나 후에 추가 작업을 처리한 다음 `EndInvoke` 를 호출하여 결과를 검색할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-144">If you use a <xref:System.Threading.WaitHandle>, you can perform additional processing before or after the asynchronous call completes, but before calling `EndInvoke` to retrieve the results.</span></span>

> [!NOTE]
> <span data-ttu-id="4ad76-145">대기 핸들은 `EndInvoke`를 호출할 때 자동으로 닫히지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-145">The wait handle is not closed automatically when you call `EndInvoke`.</span></span> <span data-ttu-id="4ad76-146">대기 핸들에 대한 모든 참조를 해제하면 가비지 수집에서 대기 핸들을 회수할 때 시스템 리소스가 확보됩니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-146">If you release all references to the wait handle, system resources are freed when garbage collection reclaims the wait handle.</span></span> <span data-ttu-id="4ad76-147">대기 핸들 사용을 마친 후 시스템 리소스를 즉시 확보하려면 <xref:System.Threading.WaitHandle.Close%2A?displayProperty=nameWithType> 메서드를 호출하여 핸들을 삭제합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-147">To free the system resources as soon as you are finished using the wait handle, dispose of it by calling the <xref:System.Threading.WaitHandle.Close%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="4ad76-148">삭제 가능한 개체를 명시적으로 삭제하면 가비지 수집의 효율성이 향상됩니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-148">Garbage collection works more efficiently when disposable objects are explicitly disposed.</span></span>

 [!code-cpp[AsyncDelegateExamples#3](../../../samples/snippets/cpp/VS_Snippets_CLR/AsyncDelegateExamples/cpp/waithandle.cpp#3)]
 [!code-csharp[AsyncDelegateExamples#3](../../../samples/snippets/csharp/VS_Snippets_CLR/AsyncDelegateExamples/CS/waithandle.cs#3)]
 [!code-vb[AsyncDelegateExamples#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/AsyncDelegateExamples/VB/WaitHandle.vb#3)]

## <a name="polling-for-asynchronous-call-completion"></a><span data-ttu-id="4ad76-149">비동기 호출 완료에 대한 폴링</span><span class="sxs-lookup"><span data-stu-id="4ad76-149">Polling for Asynchronous Call Completion</span></span>
 <span data-ttu-id="4ad76-150"><xref:System.IAsyncResult.IsCompleted%2A> 에서 반환하는 <xref:System.IAsyncResult> 의 `BeginInvoke` 속성을 사용하여 비동기 호출이 완료되는 시점을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-150">You can use the <xref:System.IAsyncResult.IsCompleted%2A> property of the <xref:System.IAsyncResult> returned by `BeginInvoke` to discover when the asynchronous call completes.</span></span> <span data-ttu-id="4ad76-151">사용자 인터페이스를 제공하는 스레드에서 비동기 호출을 수행하는 경우 이 동작을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-151">You might do this when making the asynchronous call from a thread that services the user interface.</span></span> <span data-ttu-id="4ad76-152">완료에 대해 폴링하면 비동기 호출이 <xref:System.Threading.ThreadPool> 스레드에서 실행되는 동안 호출 스레드가 계속 실행될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-152">Polling for completion allows the calling thread to continue executing while the asynchronous call executes on a <xref:System.Threading.ThreadPool> thread.</span></span>

 [!code-cpp[AsyncDelegateExamples#4](../../../samples/snippets/cpp/VS_Snippets_CLR/AsyncDelegateExamples/cpp/polling.cpp#4)]
 [!code-csharp[AsyncDelegateExamples#4](../../../samples/snippets/csharp/VS_Snippets_CLR/AsyncDelegateExamples/CS/polling.cs#4)]
 [!code-vb[AsyncDelegateExamples#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/AsyncDelegateExamples/VB/polling.vb#4)]

## <a name="executing-a-callback-method-when-an-asynchronous-call-completes"></a><span data-ttu-id="4ad76-153">비동기 호출이 완료될 때 콜백 메서드 실행</span><span class="sxs-lookup"><span data-stu-id="4ad76-153">Executing a Callback Method When an Asynchronous Call Completes</span></span>
 <span data-ttu-id="4ad76-154">비동기 호출을 시작하는 스레드와 결과를 처리하는 스레드가 서로 다를 수 있는 경우에는 호출이 완료될 때 콜백 메서드를 실행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-154">If the thread that initiates the asynchronous call does not need to be the thread that processes the results, you can execute a callback method when the call completes.</span></span> <span data-ttu-id="4ad76-155">콜백 메서드는 <xref:System.Threading.ThreadPool> 스레드에서 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-155">The callback method is executed on a <xref:System.Threading.ThreadPool> thread.</span></span>

 <span data-ttu-id="4ad76-156">콜백 메서드를 사용하려면 `BeginInvoke` 에 콜백 메서드를 나타내는 <xref:System.AsyncCallback> 대리자를 전달해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-156">To use a callback method, you must pass `BeginInvoke` an <xref:System.AsyncCallback> delegate that represents the callback method.</span></span> <span data-ttu-id="4ad76-157">콜백 메서드에서 사용할 정보가 들어 있는 개체를 전달할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-157">You can also pass an object that contains information to be used by the callback method.</span></span> <span data-ttu-id="4ad76-158">콜백 메서드에서는 콜백 메서드의 유일한 매개 변수인 <xref:System.IAsyncResult>를 <xref:System.Runtime.Remoting.Messaging.AsyncResult> 개체로 캐스팅할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-158">In the callback method, you can cast the <xref:System.IAsyncResult>, which is the only parameter of the callback method, to an <xref:System.Runtime.Remoting.Messaging.AsyncResult> object.</span></span> <span data-ttu-id="4ad76-159">그런 다음 <xref:System.Runtime.Remoting.Messaging.AsyncResult.AsyncDelegate%2A?displayProperty=nameWithType> 속성을 사용하여 호출을 시작하는 데 사용된 대리자를 가져오면 `EndInvoke`를 호출할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-159">You can then use the <xref:System.Runtime.Remoting.Messaging.AsyncResult.AsyncDelegate%2A?displayProperty=nameWithType> property to get the delegate that was used to initiate the call so that you can call `EndInvoke`.</span></span>

 <span data-ttu-id="4ad76-160">예제 관련 참고 사항:</span><span class="sxs-lookup"><span data-stu-id="4ad76-160">Notes on the example:</span></span>

- <span data-ttu-id="4ad76-161">`TestMethod`의 `threadId` 매개 변수는 `out` 매개 변수(Visual Basic의 경우 [`<Out>` `ByRef`)이므로 입력 값은 `TestMethod`에서 사용되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-161">The `threadId` parameter of `TestMethod` is an `out` parameter ([`<Out>` `ByRef` in Visual Basic), so its input value is never used by `TestMethod`.</span></span> <span data-ttu-id="4ad76-162">`BeginInvoke` 를 호출할 때는 더미 변수가 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-162">A dummy variable is passed to the `BeginInvoke` call.</span></span> <span data-ttu-id="4ad76-163">`threadId` 매개 변수가 `ref` 매개 변수(Visual Basic의 경우`ByRef` )인 경우에는 변수가 `BeginInvoke` 및 `EndInvoke`에 전달 가능한 클래스 수준 필드여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-163">If the `threadId` parameter were a `ref` parameter (`ByRef` in Visual Basic), the variable would have to be a class-level field so that it could be passed to both `BeginInvoke` and `EndInvoke`.</span></span>

- <span data-ttu-id="4ad76-164">`BeginInvoke` 에 전달되는 상태 정보는 콜백 메서드에서 출력 메시지의 형식을 지정하는 데 사용하는 형식 문자열입니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-164">The state information that is passed to `BeginInvoke` is a format string, which the callback method uses to format an output message.</span></span> <span data-ttu-id="4ad76-165">이 문자열은 <xref:System.Object>형식으로 전달되므로 상태 정보를 적절한 형식으로 캐스팅해야 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-165">Because it is passed as type <xref:System.Object>, the state information must be cast to its proper type before it can be used.</span></span>

- <span data-ttu-id="4ad76-166">콜백은 <xref:System.Threading.ThreadPool> 스레드에서 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-166">The callback is made on a <xref:System.Threading.ThreadPool> thread.</span></span> <span data-ttu-id="4ad76-167"><xref:System.Threading.ThreadPool> 스레드는 주 스레드가 종료된 경우 애플리케이션 실행을 유지하지 않는 배경 스레드이므로 예제의 주 스레드는 콜백이 완료될 때까지 충분히 대기해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4ad76-167"><xref:System.Threading.ThreadPool> threads are background threads, which do not keep the application running if the main thread ends, so the main thread of the example has to sleep long enough for the callback to finish.</span></span>

 [!code-cpp[AsyncDelegateExamples#5](../../../samples/snippets/cpp/VS_Snippets_CLR/AsyncDelegateExamples/cpp/callback.cpp#5)]
 [!code-csharp[AsyncDelegateExamples#5](../../../samples/snippets/csharp/VS_Snippets_CLR/AsyncDelegateExamples/CS/callback.cs#5)]
 [!code-vb[AsyncDelegateExamples#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/AsyncDelegateExamples/VB/callback.vb#5)]

## <a name="see-also"></a><span data-ttu-id="4ad76-168">참조</span><span class="sxs-lookup"><span data-stu-id="4ad76-168">See also</span></span>

- <xref:System.Delegate>
- [<span data-ttu-id="4ad76-169">EAP(이벤트 기반 비동기 패턴)</span><span class="sxs-lookup"><span data-stu-id="4ad76-169">Event-based Asynchronous Pattern (EAP)</span></span>](event-based-asynchronous-pattern-eap.md)
